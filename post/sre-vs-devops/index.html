
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <script type="text/javascript">
    var host = "wsgzao.github.io";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
        window.location.protocol = "https";
  </script> 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LJ3PMGPVCK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LJ3PMGPVCK');
</script>
  
    <title>SRE和DevOps | HelloDog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="wsgzao">
    

    
    <meta name="description" content="SRE vs. DevOps: competing standards or close friends?">
<meta property="og:type" content="article">
<meta property="og:title" content="SRE和DevOps">
<meta property="og:url" content="https://wsgzao.github.io/post/sre-vs-devops/index.html">
<meta property="og:site_name" content="HelloDog">
<meta property="og:description" content="SRE vs. DevOps: competing standards or close friends?">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190626155041.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190626154902.png">
<meta property="article:published_time" content="2019-06-25T06:59:49.000Z">
<meta property="article:modified_time" content="2023-02-27T05:33:07.111Z">
<meta property="article:author" content="wsgzao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190626155041.png">

    
    <link rel="alternative" href="/atom.xml" title="HelloDog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="HelloDog" title="HelloDog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="HelloDog">HelloDog</a></h1>
				<h2 class="blog-motto">Keep Calm and Carry On</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页 | Home</a></li>
					
						<li><a href="/index/">索引 | Index</a></li>
					
						<li><a href="/archives/">归档 | Archives</a></li>
					
						<li><a href="/about/">简介 | About</a></li>
					
					<li>
 					
						<form class="search">
							<label>Search</label>
						<input type="text" id="search" class="st-default-search-input" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/post/sre-vs-devops/" title="SRE和DevOps" itemprop="url">SRE和DevOps</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wsgzao" target="_blank" itemprop="author">wsgzao</a>
		
  <p class="article-time">
    <time datetime="2019-06-25T06:59:49.000Z" itemprop="datePublished"> 发表于 2019-06-25</time>
    
  </p>
</header>
	<div class="article-content">
<!-- 		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%8E%86%E5%8F%B2"><span class="toc-number">2.</span> <span class="toc-text">更新历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8B%B1%E6%96%87%E5%8E%9F%E6%96%87"><span class="toc-number">3.</span> <span class="toc-text">英文原文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-The-difference-between-DevOps-and-SRE"><span class="toc-number">3.1.</span> <span class="toc-text">1. The difference between DevOps and SRE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SLIs-SLOs-and-SLAs"><span class="toc-number">3.2.</span> <span class="toc-text">2. SLIs, SLOs, and SLAs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Risk-and-error-budgets"><span class="toc-number">3.3.</span> <span class="toc-text">3. Risk and error budgets</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Toil-and-toil-budgets"><span class="toc-number">3.4.</span> <span class="toc-text">4. Toil and toil budgets</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Customer-Reliability-Engineering-CRE"><span class="toc-number">3.5.</span> <span class="toc-text">5. Customer Reliability Engineering (CRE)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Looking-forward-with-SRE"><span class="toc-number">3.6.</span> <span class="toc-text">Looking forward with SRE</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91"><span class="toc-number">4.</span> <span class="toc-text">中文翻译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%B6%E4%BC%B8%E9%98%85%E8%AF%BB"><span class="toc-number">5.</span> <span class="toc-text">延伸阅读</span></a></li></ol>
		
		</div>
		 -->
		<p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190626155041.png"></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在搜索SRE和DevOps相关概念的过程中偶然发现Google Cloud的Blog专门制作了这样一篇文章，国内虽然有不少翻译但并没有完全做到翻译术语中的“信，雅，达”，这里转载Google官方的文章和YouTube视频，同时也选择了网友精心翻译的文章并把视频搬运至bilibili也就是B站方便大家浏览，相信大家可以对SRE和DevOps有更深入的理解。</p>
<blockquote>
<p>SRE vs. DevOps: competing standards or close friends?</p>
</blockquote>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2019年06月25日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/sre-vs-devops/">https://wsgzao.github.io/post/sre-vs-devops/</a></p>
<p><strong>扩展阅读</strong></p>
<p>SRE vs. DevOps: competing standards or close friends? - <a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/gcp/sre-vs-devops-competing-standards-or-close-friends">https://cloud.google.com/blog/products/gcp/sre-vs-devops-competing-standards-or-close-friends</a><br>DevOps 和 SRE - <a target="_blank" rel="noopener" href="https://blog.alswl.com/2018/09/devops-and-sre/">https://blog.alswl.com/2018/09/devops-and-sre/</a></p>
<hr>
<h2 id="英文原文"><a href="#英文原文" class="headerlink" title="英文原文"></a>英文原文</h2><p><a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/gcp/sre-vs-devops-competing-standards-or-close-friends">SRE vs. DevOps: competing standards or close friends?</a></p>
<p>Seth Vargo: Staff Developer Advocate<br>Liz Fong-Jones: Site Reliability Engineer<br>May 9, 2018</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/uTEL8Ff1Zvk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Site Reliability Engineering (SRE) and DevOps are two trending disciplines with quite a bit of overlap. In the past, some have called SRE a competing set of practices to DevOps. But we think they’re not so different after all.</p>
<p>What exactly is SRE and how does it relate to DevOps? Earlier this year, we (<a target="_blank" rel="noopener" href="https://twitter.com/lizthegrey">Liz Fong-Jones</a> and <a target="_blank" rel="noopener" href="https://twitter.com/sethvargo">Seth Vargo</a>) launched a video series to help answer some of these questions and reduce the friction between the communities. This blog post summarizes the themes and lessons of each video in the series to offer actionable steps toward better, more reliable systems.</p>
<h3 id="1-The-difference-between-DevOps-and-SRE"><a href="#1-The-difference-between-DevOps-and-SRE" class="headerlink" title="1. The difference between DevOps and SRE"></a>1. The difference between DevOps and SRE</h3><p>It’s useful to start by understanding the differences and similarities between SRE and DevOps to lay the groundwork for future conversation.</p>
<p>The <a target="_blank" rel="noopener" href="https://itrevolution.com/devops-culture-part-1/">DevOps movement</a> began because developers would write code with little understanding of how it would run in production. They would throw this code over the proverbial wall to the operations team, which would be responsible for keeping the applications up and running. This often resulted in tension between the two groups, as each group’s priorities were misaligned with the needs of the business. DevOps emerged as a culture and a set of practices that aims to reduce the gaps between software development and software operation. However, the DevOps movement <a target="_blank" rel="noopener" href="https://www.sethvargo.com/the-ten-myths-of-devops/">does not explicitly define <em>how</em> to succeed</a> in these areas. In this way, DevOps is like an abstract class or interface in programming. It defines the overall behavior of the system, but the implementation details are left up to the author.</p>
<p>SRE, which evolved at Google to meet internal needs in the early 2000s independently of the DevOps movement, happens to embody the philosophies of DevOps, but has a much more prescriptive way of measuring and achieving reliability through engineering and operations work. In other words, SRE prescribes how to succeed in the various DevOps areas. For example, the table below illustrates the five DevOps pillars and the corresponding SRE practices:</p>
<table>
<thead>
<tr>
<th>DevOps</th>
<th>SRE</th>
</tr>
</thead>
<tbody><tr>
<td>Reduce organization silos</td>
<td>Share ownership with developers by using the same tools and techniques across the stack</td>
</tr>
<tr>
<td>Accept failure as normal</td>
<td>Have a formula for balancing accidents and failures against new releases</td>
</tr>
<tr>
<td>Implement gradual change</td>
<td>Encourage moving quickly by reducing costs of failure</td>
</tr>
<tr>
<td>Leverage tooling &amp; automation</td>
<td>Encourages “automating this year’s job away” and minimizing manual systems work to focus on efforts that bring long-term value to the system</td>
</tr>
<tr>
<td>Measure everything</td>
<td>Believes that operations is a software problem, and defines prescriptive ways for measuring availability, uptime, outages, toil, etc.</td>
</tr>
</tbody></table>
<p>If you think of DevOps like an interface in a programming language, <strong>class SRE implements DevOps</strong>. While the SRE program did not explicitly set out to satisfy the DevOps interface, both disciplines independently arrived at a similar set of conclusions. But just like in programming, classes often include more behavior than just what their interface defines, or they might implement multiple interfaces. SRE includes additional practices and recommendations that are not necessarily part of the DevOps interface.</p>
<p>DevOps and SRE are not two competing methods for software development and operations, but rather close friends designed to break down organizational barriers to deliver better software faster. If you prefer books, check out <a target="_blank" rel="noopener" href="https://www.safaribooksonline.com/library/view/how-sre-relates/9781492030645/">How SRE relates to DevOps</a> (Betsy Beyer, Niall Richard Murphy, Liz Fong-Jones) for a more thorough explanation.</p>
<h3 id="2-SLIs-SLOs-and-SLAs"><a href="#2-SLIs-SLOs-and-SLAs" class="headerlink" title="2. SLIs, SLOs, and SLAs"></a>2. SLIs, SLOs, and SLAs</h3><p>The SRE discipline collaboratively decides on a system’s availability targets and measures availability with input from engineers, product owners and customers.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/tEylFyxbDLE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>It can be challenging to have a productive conversation about software development without a consistent and agreed-upon way to describe a system’s uptime and availability. Operations teams are constantly putting out fires, some of which end up being bugs in developer’s code. But without a clear measurement of uptime and a clear prioritization on availability, product teams may not agree that reliability is a problem. This very challenge affected Google in the early 2000s, and it was one of the motivating factors for developing the SRE discipline.</p>
<p>SRE ensures that everyone agrees on how to measure availability, and what to do when availability falls out of specification. This process includes individual contributors at every level, all the way up to VPs and executives, and it creates a shared responsibility for availability across the organization. SREs work with stakeholders to decide on Service Level Indicators (SLIs) and Service Level Objectives (SLOs).</p>
<ul>
<li>SLIs are metrics over time such as request latency, throughput of requests per second, or failures per request. These are usually aggregated over time and then converted to a rate, average or percentile subject to a threshold.</li>
<li>SLOs are targets for the cumulative success of SLIs over a window of time (like “last 30 days” or “this quarter”), agreed-upon by stakeholders</li>
</ul>
<p>The video also discusses Service Level Agreements (SLAs). Although not specifically part of the day-to-day concerns of SREs, an SLA is a promise by a service provider, to a service consumer, about the availability of a service and the ramifications of failing to deliver the agreed-upon level of service. SLAs are usually defined and negotiated by account executives for customers and offer a lower availability than the SLO. After all, you want to break your own internal SLO before you break a customer-facing SLA.</p>
<p>SLIs, SLOs and SLAs tie back closely to the DevOps pillar of “measure everything” and one of the reasons we say <strong>class SRE implements DevOps</strong>.</p>
<h3 id="3-Risk-and-error-budgets"><a href="#3-Risk-and-error-budgets" class="headerlink" title="3. Risk and error budgets"></a>3. Risk and error budgets</h3><p>We focus here on measuring risk through error budgets, which are quantitative ways in which SREs collaborate with product owners to balance availability and feature development. This video also discusses why 100% is not a viable availability target.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/y2ILKr8kCJU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Maximizing a system’s stability is both counterproductive and pointless. Unrealistic reliability targets limit how quickly new features can be delivered to users, and users typically won’t notice extreme availability (like 99.999999%) because the quality of their experience is dominated by less reliable components like ISPs, cellular networks or WiFi. Having a 100% availability requirement severely limits a team or developer’s ability to deliver updates and improvements to a system. Service owners who want to deliver many new features should opt for less stringent SLOs, thereby giving them the freedom to continue shipping in the event of a bug. Service owners focused on reliability can choose a higher SLO, but accept that breaking that SLO will delay feature releases. The SRE discipline quantifies this acceptable risk as an “error budget.” When error budgets are depleted, the focus shifts from feature development to improving reliability.</p>
<p>As mentioned in the second video, leadership buy-in is an important pillar in the SRE discipline. Without this cooperation, nothing prevents teams from breaking their agreed-upon SLOs, forcing SREs to work overtime or waste too much time toiling to just keep the systems running. If SRE teams do not have the ability to enforce error budgets (or if the error budgets are not taken seriously), the system fails.</p>
<p>Risk and error budgets quantitatively accept failure as normal and enforce the DevOps pillar to implement gradual change. Non-gradual changes risk exceeding error budgets.</p>
<h3 id="4-Toil-and-toil-budgets"><a href="#4-Toil-and-toil-budgets" class="headerlink" title="4. Toil and toil budgets"></a>4. Toil and toil budgets</h3><p>An important component of the SRE discipline is toil, toil budgets and ways to reduce toil. Toil occurs each time a human operator needs to manually touch a system during normal operations—but the definition of “normal” is constantly changing.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/IvQ-15-yE_c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Toil is not simply “work I don’t like to do.” For example, the following tasks are overhead, but are specifically not toil: submitting expense reports, attending meetings, responding to email, commuting to work, etc. Instead, toil is specifically tied to the running of a production service. It is work that tends to be manual, repetitive, automatable, tactical and devoid of long-term value. Additionally, toil tends to scale linearly as the service grows. Each time an operator needs to touch a system, such as responding to a page, working a ticket or unsticking a process, toil has likely occurred.</p>
<p>The SRE discipline aims to reduce toil by focusing on the “engineering” component of Site Reliability Engineering. When SREs find tasks that can be automated, they work to engineer a solution to prevent that toil in the future. While minimizing toil is important, it’s realistically impossible to completely eliminate. Google aims to ensure that at least 50% of each SRE’s time is spent doing engineering projects, and these SREs individually report their toil in quarterly surveys to identify operationally overloaded teams. That being said, toil is not always bad. Predictable, repetitive tasks are great ways to onboard a new team member and often produce an immediate sense of accomplishment and satisfaction with low risk and low stress. Long-term toil assignments, however, quickly outweigh the benefits and can cause career stagnation.</p>
<p>Toil and toil budgets are closely related to the DevOps pillars of “measure everything” and “reduce organizational silos.”</p>
<h3 id="5-Customer-Reliability-Engineering-CRE"><a href="#5-Customer-Reliability-Engineering-CRE" class="headerlink" title="5. Customer Reliability Engineering (CRE)"></a>5. Customer Reliability Engineering (CRE)</h3><p>Finally, Customer Reliability Engineering (CRE) completes the tenets of SRE (with the help in the video of a futuristic friend). CRE aims to teach SRE practices to customers and service consumers.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/GQPzaq-owYM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>In the past, Google did not talk publicly about SRE. We thought of it as a competitive advantage we had to keep secret from the world. However, every time a customer had a problem because they used a system in an unexpected way, we had to stop innovating and help solve the problem. That tiny bit of friction, spread across billions of users, adds up very quickly. It became clear that we needed to start talking about SRE publicly and teaching our customers about SRE practices so they could replicate them within their organizations.</p>
<p>Thus, in 2016, we <a target="_blank" rel="noopener" href="https://cloudplatform.googleblog.com/2016/10/introducing-a-new-era-of-customer-support-Google-Customer-Reliability-Engineering.html">launched the CRE program</a> as both a means of helping our Google Cloud Platform (GCP) customers with improving their reliability, and a means of exposing Google SREs directly to the challenges customers face. The CRE program aims to reduce customer anxiety by teaching them SRE principles and helping them adopt SRE practices.</p>
<p>CRE aligns with the DevOps pillars of “reduce organization silos” by forcing collaboration across organizations, and it also closely relates to the concepts of “accepting failure as normal” and “measure everything” by creating a shared responsibility among all stakeholders in the form of shared SLOs.</p>
<h3 id="Looking-forward-with-SRE"><a href="#Looking-forward-with-SRE" class="headerlink" title="Looking forward with SRE"></a>Looking forward with SRE</h3><p>We are working on some exciting new content across a variety of mediums to help showcase how users can adopt DevOps and SRE on Google Cloud, and we cannot wait to share them with you. What SRE topics are you interested in hearing about? Please <a target="_blank" rel="noopener" href="https://twitter.com/GCPcloud">give us a tweet</a> or <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj&index=1">watch our videos</a>.</p>
<p>Posted in:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/devops-sre">DevOps &amp; SRE</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/application-development">Application Development</a></li>
</ul>
<h2 id="中文翻译"><a href="#中文翻译" class="headerlink" title="中文翻译"></a>中文翻译</h2><blockquote>
<p>中文翻译原文为繁体中文，我转化为简体中文，视频替换为B站</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://medium.com/kkstream/%E5%A5%BD%E6%96%87%E7%BF%BB%E8%AD%AF-%E4%BD%A0%E5%9C%A8%E6%89%BE%E7%9A%84%E6%98%AF-sre-%E9%82%84%E6%98%AF-devops-2ded43c2852">[好文翻譯] 你在找的是 SRE 還是 DevOps？</a></p>
<p>Neil Wei in KKStream<br>Aug 3, 2018</p>
<p>敝社这半年来开始<a target="_blank" rel="noopener" href="https://jobs.lever.co/kkstream">大举征才</a>，其中不乏 DevOps 和 SRE 的职缺，然而 HR (或其他部门的同事) 对于两者的相异之处并不了解，甚至认为 SRE 和传统维运单位一样，只是换个名字，从管机房到管云端而已，究竟两者到底有什么差别呢？</p>
<p>这对前来的面试的应征者会有负面的影响，好像连我们自己要找什么样的人都不清楚似的。于是，花了点时间跟 HR 介绍两者的差异，也在支援了 SRE 团队四个月后留下这篇翻译文加一点点心得。</p>
<blockquote>
<p>请先记得…</p>
<p>SRE <strong>is</strong> a DevOps (香蕉是一种水果)</p>
<p>DevOps <strong>is</strong> NOT a SRE (水果不是香蕉)</p>
<p>DevOps 并不是一个 “工作职称”，SRE 才是</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/wsgzao/storage-public/master/img/20190626154902.png"></p>
<p>《本文已取得原作者之一 <a target="_blank" rel="noopener" href="https://mobile.twitter.com/sethvargo">Seth Vargo</a> 同意翻译刊登》</p>
<p>原文网址：<a target="_blank" rel="noopener" href="https://cloudplatform.googleblog.com/2018/05/SRE-vs-DevOps-competing-standards-or-close-friends.html?m=1">https://cloudplatform.googleblog.com/2018/05/SRE-vs-DevOps-competing-standards-or-close-friends.html?m&#x3D;1</a></p>
<hr>
<blockquote>
<p>正文开始</p>
</blockquote>
<p>Site Reliability Engineering (SRE) 和 DevOps 是目前相当热门的开发与维运文化，有着很高的相似程度。然而，早期有些人会把 SRE 视为和 DevOps 不同的实践方式，认为两者不一样，必需选择其一来执行，但是现在大家更倾向两者其实其实很相似。</p>
<p>究竟 SRE 和 DevOps 有什么相同点呢？在年初，Google 的工程师 (<a target="_blank" rel="noopener" href="https://twitter.com/lizthegrey">Liz Fong-Jones</a> 与 <a target="_blank" rel="noopener" href="https://twitter.com/sethvargo">Seth Vargo</a>) 准备了一系列的影片去解答这些问题以及尝试跳出来去减少社群间的意见分歧，本篇文章总结了影片中所涵盖到的主题，以及如何实际去建置一个更加可靠的系统。</p>
<hr>
<blockquote>
<p>1. SRE 和 DevOps 的差异</p>
</blockquote>
<p>在开始之前，先了解一下 SRE 和 DevOps 有什么相同之处？又有什么相异之处？</p>
<iframe src="//player.bilibili.com/player.html?aid=56870162&cid=99334829&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>DevOps 文化的兴起是因为在早期 (约十年前)，有许多开发者对于自己的程式是怎么跑在真实世界，其实所知有限。开发者要做的事情就是将程式打包好，然后扔给维运部门后，自己的工作周期就结束了，而维运部门会负责将程式安装与部署到所有生产环境的机器上，同时也要想尽各种辨法与善用各种工具，确保这些程式持续正常地执行，即使维运部门完全不了解这些程式的实作细节。</p>
<p>这样的工作模式很容易造成两个部门之间的对立，各自的部门都有自己的目标，而各自的目标和公司商业需求可能会不一致。DevOps 的出现是为了带来一种<strong>新的软体开发文化，用以降低开发与维运之间的鸿沟。</strong></p>
<p>然而，DevOps 的本质并不是教导大家<strong>怎么做</strong>才会成功，而是订定一些<strong>基本原则让大家各自发挥</strong>，以程式设计的术语来说，DevOps 比较像是一个抽象类别 (abstract class)，或是介面 (interface)，定义了这种文化该有什么样的行为，实作则是靠各个部门成员一起决定，只要符合这个「介面」，就可以说是 DevOps 文化的实践。</p>
<p>SRE 一词由 Google 提出，是 Google 在这十多年间为了解决内部日渐庞大的系统而制定出一连串的规范和实作，和 DevOps 不同的是，它实作了 DevOps 的所定义的抽象方法，而且规范了更多关于<strong>如何用软体工程的方法与从维运的角度出发，以达成让系统稳定的目的</strong>。简单来说，SRE 实作了 DevOps 这个介面 (interface)，以下列出五点 DevOps 定义的<strong>介面</strong>以及 SRE 如何<strong>实作</strong>：</p>
<blockquote>
<p><strong>DevOps：</strong>减少组织之间的谷仓效应</p>
<p><strong>SRE：</strong>在整个开发周期中，和开发团队使用相同的工具以及一起分享与所有权。(注：<a target="_blank" rel="noopener" href="https://medium.com/kkstream/infrastructure-as-code-%E5%A6%82%E4%BD%95%E6%94%B9%E5%96%84%E6%88%91%E5%80%91%E7%9A%84%E7%94%9F%E6%B4%BB%E5%93%81%E8%B3%AA-ee11e9d67b71">Infra as code</a>, <a target="_blank" rel="noopener" href="https://medium.com/kkstream/%E5%B0%8E%E5%85%A5-configuration-as-code-%E5%AE%8C%E6%88%90%E4%B8%89%E4%BD%8D%E4%B8%80%E9%AB%94-all-are-codes-ede2c1470513">configuration as code</a>)</p>
<p><strong>DevOps</strong>：接受失效，视失效为开发周期中的一个元素</p>
<p><strong>SRE：</strong> 对于新的版本，建立一套可以量化的指标去衡量 “意外” 和 “失效”</p>
<p><strong>DevOps：</strong> 逐渐改变</p>
<p><strong>SRE</strong>：鼓励团队透过降低排除故障的成本来达成速交付的目的 (就是不需要一次做到最好，而是逐渐改变)</p>
<p><strong>DevOps</strong>：善用工具和自动化</p>
<p><strong>SRE</strong>：鼓励团队把自己今年的工作自动化，最小化” 工人智慧” 要做的事，把精力放在中长期的系统改善。</p>
<p><strong>DevOps</strong>：任何事都是可以被量测的</p>
<p><strong>SRE</strong>：相信维运是软体工程的范筹，规范关于可用性，运行时间 (uptime)，停机时间 (outages)，哪些是苦工等量测值。</p>
</blockquote>
<p>如果你已经认同 DevOps 是一个 “介面 (interface)”，那么以程式语言的角度来说就是：</p>
<blockquote>
<p><em>class SRE implements DevOps</em></p>
</blockquote>
<p>虽然实际上两者之间仍有需多独立的原则，SRE 并非完全 1:1 实作了 DevOps 的所有的概念，但最终他们两个的结论是相同的，也和程式语言相同，类别在继承介面之后，可以做更多的延伸，也可以实作更多不同的介面，SRE 包含了更多细节是 DevOps 原本所没有定义的。</p>
<p>在软体开发和维运的领域中，<strong>DevOps 和 SRE 并非互相竞争谁才是业界标准</strong>，相反地，两者都是为了减少组职之间的隔阂与更快更好的软体所设计出来的方法，如果你想看更多细节的话，<a target="_blank" rel="noopener" href="https://www.safaribooksonline.com/library/view/how-sre-relates/9781492030645/">How SRE relates to DevOps</a> (Betsy Beyer, Niall Richard Murphy, Liz Fong-Jones) 这本书值得一看。</p>
<hr>
<blockquote>
<p>2. SLIs, SLOs, and SLAs</p>
</blockquote>
<p>SRE 的原则之一是针对不同的职务，给出不同的量测值。对于工程师，PM，和客户来说，整个系统的可用程度是多少，以及该如何测量，都有不同的呈现方式。</p>
<iframe src="//player.bilibili.com/player.html?aid=56870270&cid=99335415&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>如果无法衡量一个系统的运行时间与可用程度的话，是非常难以维运已经上线的系统，常常会造成维运团队持续处在一个救火队的状态，而最终找到问题的根源时，可能会是开发团队写的 code 出了问题。</p>
<p>如果无法定出运行时间与可用程度的量测方法的话，开发团队往往不会将「稳定度」视为一个潜在的问题，这个问题已经困扰了 Google 好多年，这也是为什么要发展出 SRE 原则的动机之一。</p>
<p>SRE 确保每一个人都知道怎么去衡量可靠度以及当服务失效时该做什么事。这会细到当问题发生时，从 VP 或是 CxO，至最组织内部的每一个相关员工，都有做己该做的事。每一个「人」，该做什么「事」都被规范清楚，SRE 会和所有的相关人员沟通，去决定出 Service Level Indicators (SLIs) 与 Service Level Objectives (SLOs)。</p>
<blockquote>
<p>SLIs 定义了和系统「回应时间」相关的指标，例如回应时间，每秒的吞吐量，请求量，等等，常常会将这个指标转化为比率或平均值。</p>
<p>SLOs 则是和相关人员讨论后，得出的一个时间区间，期望 SLIs 所能维持一定水准的数字，例如「每个月 SLIs 要有如何的水准」，比较偏内部的指标。</p>
</blockquote>
<p>该影片也讨论到了 Service Level Agreements (SLAs)，即使这不是 SRE 每天所关心的数字。作为一个线上服务的提供者，<strong>SLA 是对客户的承诺</strong>，确保服务持续运行的百分比，通常是和客户「谈」出来的，每年 (或每月) 的停机时间不得低于几分钟。</p>
<p>SLI, SLO, SLA 的概念和 DevOps 所提的「任何事都可以被量测」非常相似，这也就是为什么会说 class SRE implements DevOps 的原因之一了。</p>
<hr>
<blockquote>
<p>3. 风险和犯错预算</p>
</blockquote>
<p>对于风险，我们会用犯错预算来评估，犯错预算是一个量化的值，用来描述服务每天 (或每月) 可以失效的时间，若服务的 SLAs 是 99.9%，那么开发团队就等于有 0.1％的犯错预算通可以用。这个值是一个和 Product Owner 和开发团队谈过之后取得平衡的值，以下的影片也讲到了为什么 0 犯错预算并不是一个适合的值。</p>
<iframe src="//player.bilibili.com/player.html?aid=56870355&cid=99335555&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>致力于将一个系统的可用程度维持在 100% 是一件会累死你又无意义的事情，不切实际的目标会限制了开发团队推出新功能到使用者手上速度，而且使用者多半也不会注意到这件事 (例如可靠度是 99.999999%)，因为他们的 ISP 业者，3G&#x2F;4G 网路，或是家里的 WiFi 可能都小于这个数字。致力维持一个 100% 不间断的服务会严重限制开发团队将新功能交付出去的时间。为了要达成这个严酷的限制，开发人员往往会选择不要修 bug，不要增加功能，不要改进系统，反之，应该要保留一些弹性让开发团队可以自由发挥。</p>
<p>SRE 的原则之一就是计算出可以容忍的「犯错预算」，一旦这个预算耗尽，才应该开始将重点放在可靠性的改善而非持续开发新功能。</p>
<p>如第二个影片提到的，这个文化能让管理阶层买单是最重要的事，因为 SLIs 是大家一起订出来的，如果不照游戏规则走的话，SRE 又会沦为持续为了让系统维持一定的稳定度了而一直做苦力的事，但是没人知道 (因为没有订标准)，最终这个服务一定会失败。风险和犯错预算会将犯错视为正常的事，而改善的方式之一是让新功能持续且小规模的发布，这也和 DevOps 的原则相符合。</p>
<hr>
<blockquote>
<p>4. 琐事和琐事预算</p>
</blockquote>
<p>另一个 SRE 的原则是琐事的控管，如何减少琐事？何谓琐事？</p>
<blockquote>
<p>维运中需要手动性操作的、重复的，可以被自动化的</p>
<p>或是一次性，没有持久价值的工作，都是琐事。</p>
</blockquote>
<iframe src="//player.bilibili.com/player.html?aid=56870600&cid=99336041&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>然而琐事并不是「我不想做的事」，举例来说，公司会有许多经常性的事务，一再的发生，例如开会，沟通，回 email，这些都不是琐事。</p>
<p>反之，像是每天手动登入某台机器，取得某个档案后做后续的处理，然后做成报告寄出来，这种就是琐事，因为他是手动，重复，可以被自动化的。</p>
<p>SRE 的原则是尝试使用软体工程的方法消除这些事情，当 SRE 发现事情可以被自动化后，便会着手执行自动化流程的开发，避免之后再做一样的事情，虽然使琐事最小化很重要，但实际上，这是不可能完全消除的，<strong>Google 致力于将 SRE 的日常琐事缩小到 50% 以下</strong>，使得 SRE 成员可以将时间发费在更有意义的事情上，每季的回顾也都会检视成果。</p>
<p>然而琐事也并非完全是坏事，对于新进成员来说，先参与这事例行事务有助于了解这个服务该做些什么事情，这是相对低风险与低压力的，但是长远来看，任何一个工程师都不该一直在做琐事。</p>
<p>琐事管理也和 DevOps 的原则 — 任何事都是可被测量与减少组织之间的谷仓效应相符。</p>
<hr>
<blockquote>
<p>5. 客户可靠性工程 (Customer Reliability Engineering, CRE)</p>
</blockquote>
<p>个人觉得这个主题对目前而言稍微走远了，就不逐句翻译。</p>
<p>大意如何将 SRE 的概念传达出去，让 GCP 的客户知道该怎么正确的使用 GCP 的各项服务以及推广 SRE 的风气。</p>
<iframe src="//player.bilibili.com/player.html?aid=56870699&cid=99336238&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<hr>
<blockquote>
<p>个人后记</p>
</blockquote>
<p>其实目前敝社渐渐转型中，的确处在一个从传统开发与维运转互相独立，到目前渐渐实做 DevOps 文化的路上，在支援了 SRE 部门 4 个月后，参与了很多现实面会碰到的挑战，也和大家一起制定自动化流程与改善目前现有的琐事，也渐渐朝 DevOps 的文化前进中，希望让大家可以知道：</p>
<blockquote>
<p>SRE 是软体工程，不该只是维运人员或是系统管理员。</p>
<p>DevOps 并不是一个职称，SRE 才是，就像你不会到市场菜摊跟老板说我要买 “青菜”，而且会说要买高丽菜还是小白菜吧！</p>
</blockquote>
<p>不过理想总是完美的，还是要面对现实，我们的公司不叫 Google，大部份的人也进不去 Google，Google 的 SRE 可能比大多数公司的软体开发工程师还要会写 code，比网路工程师还要懂网路，比维运工程师还要懂维运，在我们周围的环境所开的 SRE 职缺，其实很多都不是想象中的这样美好，琐事 &#x2F; 手动的事可能还是占大多数，部门间还是存在隔阂，不会写 code 的 SRE 可能也很多，维运还是占日常工作的多数等现况。</p>
<p>传统维运人员或 IT 网管人员若想往 SRE 发展的话，也必需改变一下思维，跳脱舒适圈，在这个什么都 as code，什么都 as a service 的年代，不写 code 就等著等淘汰了。</p>
<p>改变是缓慢而且需要慢慢培养的，就让我们… 咦…P0 事件发生了！先这样啦！</p>
<h2 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h2><blockquote>
<p>在此感谢所有人的分享，推动技术的不断进步</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.ithome.com.tw/news/105366">Google 储存 SRE 团队负责人第一手经验大公开</a></li>
<li><a target="_blank" rel="noopener" href="https://rickhw.github.io/categories/DevOps/SRE/">https://rickhw.github.io/categories/DevOps/SRE/</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/mQCofTmfWOhZPiga6nHKOA">一篇文章彻底读懂 DevOps 与 SRE 来龙去脉 (译)?</a></li>
<li><a target="_blank" rel="noopener" href="https://landing.google.com/sre/book.html">Site Reliability Engineering</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.alswl.com/2018/09/devops-and-sre/">DevOps 和 SRE</a></li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0-Study/">学习 | Study</a>
</div>


</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://wsgzao.github.io/post/sre-vs-devops/" data-title="SRE和DevOps | HelloDog" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/post/netperf/" title="netperf和iperf网络性能测试小结">
  <strong>上一篇：</strong><br/>
  <span>
  netperf和iperf网络性能测试小结</span>
</a>
</div>


<div class="next">
<a href="/post/osi/"  title="OSI 七层模型与 TCP/IP 四层模型">
 <strong>下一篇：</strong><br/> 
 <span>OSI 七层模型与 TCP/IP 四层模型
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%8E%86%E5%8F%B2"><span class="toc-number">2.</span> <span class="toc-text">更新历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8B%B1%E6%96%87%E5%8E%9F%E6%96%87"><span class="toc-number">3.</span> <span class="toc-text">英文原文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-The-difference-between-DevOps-and-SRE"><span class="toc-number">3.1.</span> <span class="toc-text">1. The difference between DevOps and SRE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SLIs-SLOs-and-SLAs"><span class="toc-number">3.2.</span> <span class="toc-text">2. SLIs, SLOs, and SLAs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Risk-and-error-budgets"><span class="toc-number">3.3.</span> <span class="toc-text">3. Risk and error budgets</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Toil-and-toil-budgets"><span class="toc-number">3.4.</span> <span class="toc-text">4. Toil and toil budgets</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Customer-Reliability-Engineering-CRE"><span class="toc-number">3.5.</span> <span class="toc-text">5. Customer Reliability Engineering (CRE)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Looking-forward-with-SRE"><span class="toc-number">3.6.</span> <span class="toc-text">Looking forward with SRE</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91"><span class="toc-number">4.</span> <span class="toc-text">中文翻译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%B6%E4%BC%B8%E9%98%85%E8%AF%BB"><span class="toc-number">5.</span> <span class="toc-text">延伸阅读</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="wsgzao" data-theme="medium"></div>
<script type="text/javascript" src="//lab.lepture.com/github-cards/widget.js" ></script>
</div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Hexo/" title="Hexo">Hexo<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/学习-Study/" title="学习 | Study">学习 | Study<sup>195</sup></a></li>
		  
		
		  
			<li><a href="/categories/生活-Life/" title="生活 | Life">生活 | Life<sup>30</sup></a></li>
		  
		
		  
			<li><a href="/categories/软件-Soft/" title="软件 | Soft">软件 | Soft<sup>5</sup></a></li>
		  
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.linkedin.com/in/aowang" target="_blank" title="LinkedIn">LinkedIn</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, I&#39;m OX. This is my blog on GitHub. <br/>
			Keep Calm and Carry On.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/wsgzao" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		<a href="https://www.linkedin.com/in/aowang" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2024 
		
		<a href="/about" target="_blank" title="wsgzao">wsgzao</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-3.6.4.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery-qrcode-0.18.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'wsgzao';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>








<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-77732745-1', 'wsgzao.github.io');  
ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?c2c5fc7d844d0973d9f77abd87f49c3c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- swiftype Begin -->

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','_4qDmKrBPn9Es3UvQHT4','2.0.0');
</script>

<!-- swiftype End -->

  </body>
</html>
