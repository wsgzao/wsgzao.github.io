
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <script type="text/javascript">
    var host = "wsgzao.github.io";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
        window.location.protocol = "https";
  </script> 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LJ3PMGPVCK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LJ3PMGPVCK');
</script>
  
    <title>3proxy安装配置实践 | HelloDog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="wsgzao">
    

    
    <meta name="description" content="3proxy tiny free proxy server">
<meta property="og:type" content="article">
<meta property="og:title" content="3proxy安装配置实践">
<meta property="og:url" content="https://wsgzao.github.io/post/3proxy/index.html">
<meta property="og:site_name" content="HelloDog">
<meta property="og:description" content="3proxy tiny free proxy server">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-10T06:59:49.000Z">
<meta property="article:modified_time" content="2023-02-27T05:33:06.676Z">
<meta property="article:author" content="wsgzao">
<meta name="twitter:card" content="summary">

    
    <link rel="alternative" href="/atom.xml" title="HelloDog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="HelloDog" title="HelloDog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="HelloDog">HelloDog</a></h1>
				<h2 class="blog-motto">Keep Calm and Carry On</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页 | Home</a></li>
					
						<li><a href="/index/">索引 | Index</a></li>
					
						<li><a href="/archives/">归档 | Archives</a></li>
					
						<li><a href="/about/">简介 | About</a></li>
					
					<li>
 					
						<form class="search">
							<label>Search</label>
						<input type="text" id="search" class="st-default-search-input" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/post/3proxy/" title="3proxy安装配置实践" itemprop="url">3proxy安装配置实践</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wsgzao" target="_blank" itemprop="author">wsgzao</a>
		
  <p class="article-time">
    <time datetime="2022-08-10T06:59:49.000Z" itemprop="datePublished"> 发表于 2022-08-10</time>
    
  </p>
</header>
	<div class="article-content">
<!-- 		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%8E%86%E5%8F%B2"><span class="toc-number">2.</span> <span class="toc-text">更新历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3proxy%E7%AE%80%E4%BB%8B"><span class="toc-number">3.</span> <span class="toc-text">3proxy简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3proxy%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">3proxy安装配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux"><span class="toc-number">4.1.</span> <span class="toc-text">Linux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows"><span class="toc-number">4.2.</span> <span class="toc-text">Windows</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3proxy%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E9%87%8A"><span class="toc-number">5.</span> <span class="toc-text">3proxy配置文件解释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3proxy-cfg"><span class="toc-number">5.1.</span> <span class="toc-text">3proxy.cfg</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3proxy%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="toc-number">6.</span> <span class="toc-text">3proxy容器化部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BB%A3%E7%90%86%E4%BD%BF%E7%94%A8"><span class="toc-number">7.</span> <span class="toc-text">客户端代理使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#windows"><span class="toc-number">7.1.</span> <span class="toc-text">windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-1"><span class="toc-number">7.2.</span> <span class="toc-text">Linux</span></a></li></ol></li></ol>
		
		</div>
		 -->
		<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文推荐的是3proxy但是也不能不提一下SSH端口转发，因为很多使用场景可能只需要借助SSH即可实现。SSH有三种端口转发模式，本地端口转发(Local Port Forwarding)，远程端口转发(Remote Port Forwarding)以及动态端口转发(Dynamic Port Forwarding)。对于本地&#x2F;远程端口转发，两者的方向恰好相反。动态端口转发则可以用于科学上网。3roxy的角色类似于CCProxy，如果你熟悉CCProxy那配置3proxy应该也不会存在太大问题。</p>
<blockquote>
<p>3proxy tiny free proxy server</p>
</blockquote>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2022年08月10日 - 完善内容<br>2018年04月17日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/3proxy/">https://wsgzao.github.io/post/3proxy/</a></p>
<p><strong>扩展阅读</strong></p>
<p>3proxy - <a target="_blank" rel="noopener" href="https://3proxy.ru/">https://3proxy.ru/</a></p>
<hr>
<h2 id="3proxy简介"><a href="#3proxy简介" class="headerlink" title="3proxy简介"></a>3proxy简介</h2><p>3proxy是一款代理软件支持http&#x2F;socks，支持windows和linux平台，安装和配置都很简单<br><a target="_blank" rel="noopener" href="http://3proxy.ru/">http://3proxy.ru/</a></p>
<p>详细的配置文档可以参考3proxy documentation How To (English, very incomplete)<br><a target="_blank" rel="noopener" href="https://3proxy.ru/doc/howtoe.html">https://3proxy.ru/doc/howtoe.html</a></p>
<p>关于3proxy的比较好的资料是<br><a target="_blank" rel="noopener" href="http://linux.die.net/man/3/3proxy.cfg">http://linux.die.net/man/3/3proxy.cfg</a><br><a target="_blank" rel="noopener" href="https://github.com/z3APA3A/3proxy/wiki">https://github.com/z3APA3A/3proxy/wiki</a></p>
<h2 id="3proxy安装配置"><a href="#3proxy安装配置" class="headerlink" title="3proxy安装配置"></a>3proxy安装配置</h2><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>3proxy的代码代管在github上面，地址是：<br><a target="_blank" rel="noopener" href="https://github.com/z3APA3A/3proxy">https://github.com/z3APA3A/3proxy</a></p>
<p>最新版的安装包(包括rpm,deb)下载地址:<br><a target="_blank" rel="noopener" href="https://3proxy.org/download/stable/">https://3proxy.org/download/stable/</a></p>
<p>安装步骤如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过git下载最新版3proxy源码</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/z3APA3A/3proxy.git</span><br><span class="line"><span class="comment"># 切换到3proxy目录</span></span><br><span class="line"><span class="built_in">cd</span> 3proxy</span><br><span class="line"><span class="comment"># 编译3proxy,如果你的系统没有gcc，你需求先安装gcc</span></span><br><span class="line">make -f Makefile.Linux</span><br><span class="line"><span class="comment"># 安装3proxy</span></span><br><span class="line">make -f Makefile.Linux install</span><br></pre></td></tr></table></figure>

<p>编辑生成3proxy.cfg配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/3proxy/conf/3proxy.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/local/bin/3proxy</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#nserver 8.8.8.8</span></span><br><span class="line"><span class="comment">#nserver 8.8.4.4</span></span><br><span class="line">nscache 65536</span><br><span class="line">maxconn 1000</span><br><span class="line"><span class="built_in">log</span> /logs/3proxy-%y%m%d.log D</span><br><span class="line">rotate 7</span><br><span class="line">external 0.0.0.0</span><br><span class="line">internal 0.0.0.0</span><br><span class="line">auth none</span><br><span class="line">allow *</span><br><span class="line">proxy -a -p6666</span><br><span class="line">socks -p6667</span><br></pre></td></tr></table></figure>

<p>执行配置文件，如果有报错比如日志目录不存在和语法错误都会有具体提示</p>
<pre><code>3proxy 3proxy.cfg 
</code></pre>
<p>后台执行</p>
<pre><code>3proxy 3proxy.cfg &amp;
</code></pre>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>Windows安装3proxy<br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1567809">https://cloud.tencent.com/developer/article/1567809</a></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># string into 3proxy.cfg. Now, start command prompt (cmd.exe). Change directory to 3proxy installation and run 3proxy.exe --install:</span></span><br><span class="line">D:\&gt;C:</span><br><span class="line">C:\&gt;<span class="built_in">cd</span> C:\Program Files\<span class="number">3</span>proxy</span><br><span class="line">C:\Program Files\<span class="number">3</span>proxy&gt;<span class="number">3</span>proxy.exe <span class="literal">--install</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Now, you should have 3proxy service installed and running. If service is not started, remove &quot;service&quot; string from 3proxy.cfg, run 3proxy.exe manually and correct all errors.</span></span><br><span class="line"><span class="comment"># To remove 3proxy run 3proxy --remove:</span></span><br><span class="line"></span><br><span class="line">D:\&gt;C:</span><br><span class="line">C:\&gt;<span class="built_in">cd</span> C:\Program Files\<span class="number">3</span>proxy</span><br><span class="line">C:\Program Files\<span class="number">3</span>proxy&gt;net stop <span class="number">3</span>proxy</span><br><span class="line">C:\Program Files\<span class="number">3</span>proxy&gt;<span class="number">3</span>proxy.exe <span class="literal">--remove</span></span><br></pre></td></tr></table></figure>

<h2 id="3proxy配置文件解释"><a href="#3proxy配置文件解释" class="headerlink" title="3proxy配置文件解释"></a>3proxy配置文件解释</h2><p>How To (English, very incomplete)<br><a target="_blank" rel="noopener" href="https://3proxy.org/doc/howtoe.html">https://3proxy.org/doc/howtoe.html</a><br><a target="_blank" rel="noopener" href="https://github.com/3proxy/3proxy/wiki/How-To-(incomplete)">https://github.com/3proxy/3proxy/wiki/How-To-(incomplete)</a></p>
<p>Recommendations for high load<br><a target="_blank" rel="noopener" href="https://3proxy.org/doc/highload.html">https://3proxy.org/doc/highload.html</a><br><a target="_blank" rel="noopener" href="https://github.com/3proxy/3proxy/wiki/High%20Load">https://github.com/3proxy/3proxy/wiki/High%20Load</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">proxy -v</span><br><span class="line"></span><br><span class="line">proxy of 3proxy-0.9.4 ()</span><br><span class="line">Usage: proxy options</span><br><span class="line">Available options are:</span><br><span class="line"> -I inetd mode (requires real socket, doesn&#x27;t work with TTY)</span><br><span class="line"> -l@IDENT log to syslog IDENT</span><br><span class="line"> -d go to background (daemon)</span><br><span class="line"> -Di(DEVICENAME) bind internal interface to device, e.g. eth1</span><br><span class="line"> -De(DEVICENAME) bind external interface to device, e.g. eth1</span><br><span class="line"> -fFORMAT logging format (see documentation)</span><br><span class="line"> -l log to stderr</span><br><span class="line"> -lFILENAME log to FILENAME</span><br><span class="line"> -b(BUFSIZE) size of network buffer (default 4096 for TCP, 16384 for UDP)</span><br><span class="line"> -S(STACKSIZE) value to add to default client thread stack size</span><br><span class="line"> -t be silent (do not log service start/stop)</span><br><span class="line"></span><br><span class="line"> -iIP ip address or internal interface (clients are expected to connect)</span><br><span class="line"> -eIP ip address or external interface (outgoing connection will have this)</span><br><span class="line"> -rHOST:PORT Use IP:port for connect back proxy instead of listen port</span><br><span class="line"> -RHOST:PORT Use PORT to listen connect back proxy connection to pass data to</span><br><span class="line"> -4 Use IPv4 for outgoing connections</span><br><span class="line"> -6 Use IPv6 for outgoing connections</span><br><span class="line"> -46 Prefer IPv4 for outgoing connections, use both IPv4 and IPv6</span><br><span class="line"> -64 Prefer IPv6 for outgoing connections, use both IPv4 and IPv6</span><br><span class="line"> -ocOPTIONS, -osOPTIONS, -olOPTIONS, -orOPTIONS -oROPTIONS - options for</span><br><span class="line"> to-client (oc), to-server (os), listening (ol) socket, connect back client</span><br><span class="line"> (or) socket, connect back server (oR) listening socket</span><br><span class="line"> where possible options are:</span><br><span class="line">	TCP_NODELAY</span><br><span class="line">	TCP_CORK</span><br><span class="line">	TCP_DEFER_ACCEPT</span><br><span class="line">	TCP_QUICKACK</span><br><span class="line">	SO_REUSEADDR</span><br><span class="line">	SO_REUSEPORT</span><br><span class="line">	SO_KEEPALIVE</span><br><span class="line">	SO_DONTROUTE</span><br><span class="line">	IP_TRANSPARENT</span><br><span class="line"> -pPORT - service port to accept connections</span><br><span class="line">-a - anonymous proxy</span><br><span class="line">-a1 - anonymous proxy with random client IP spoofing</span><br><span class="line">	Example: proxy -i127.0.0.1</span><br><span class="line"></span><br><span class="line">(c)3APA3A, Vladimir Dubrovin &amp; 3proxy.org</span><br><span class="line">Documentation and sources: https://3proxy.org/</span><br><span class="line"></span><br><span class="line">3proxy -v</span><br><span class="line">Usage: 3proxy [conffile]</span><br><span class="line"></span><br><span class="line"> if conffile is missing, configuration is expected from stdin</span><br><span class="line">available socket options:</span><br><span class="line">	TCP_NODELAY</span><br><span class="line">	TCP_CORK</span><br><span class="line">	TCP_DEFER_ACCEPT</span><br><span class="line">	TCP_QUICKACK</span><br><span class="line">	SO_REUSEADDR</span><br><span class="line">	SO_REUSEPORT</span><br><span class="line">	SO_KEEPALIVE</span><br><span class="line">	SO_DONTROUTE</span><br><span class="line">	IP_TRANSPARENT</span><br><span class="line"></span><br><span class="line">3proxy tiny proxy server 3proxy-0.9.4 ()</span><br><span class="line">(c)3APA3A, Vladimir Dubrovin &amp; 3proxy.org</span><br><span class="line">Documentation and sources: https://3proxy.org/</span><br><span class="line">Please read license agreement in &#x27;copying&#x27; file.</span><br><span class="line">You may not use this program without accepting license agreement</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3proxy-cfg"><a href="#3proxy-cfg" class="headerlink" title="3proxy.cfg"></a>3proxy.cfg</h3><p><a target="_blank" rel="noopener" href="https://3proxy.org/doc/man3/3proxy.cfg.3.html">https://3proxy.org/doc/man3/3proxy.cfg.3.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br></pre></td><td class="code"><pre><span class="line">Common structure:</span><br><span class="line">Configuration file is a text file 3proxy reads configuration from. Each line of the file is a <span class="built_in">command</span> executed immediately, as it was given from console. Sequence of commands is important. Configuration file as actually a script <span class="keyword">for</span> 3proxy executable. Each line of the file is treated as a blank (space or tab) separated <span class="built_in">command</span> line. Additional space characters are ignored. Think about 3proxy as <span class="string">&quot;application level router&quot;</span> with console interface.</span><br><span class="line"></span><br><span class="line">Comments:</span><br><span class="line">Any string beginning with space character or ´<span class="comment">#´ character is comment. It´s ignored. &lt;LF&gt;s are ignored. &lt;CR&gt; is end of command.</span></span><br><span class="line"></span><br><span class="line">Quotation:</span><br><span class="line">Quotation character is <span class="string">&quot; (double quote). Quotation must be used to quote spaces or another special characters. To use quotation character inside quotation character must be dubbed (BASIC convention). For example to use HELLO &quot;</span>WORLD<span class="string">&quot; as an argument you should use it as &quot;</span>HELLO <span class="string">&quot;&quot;</span>WORLD<span class="string">&quot;&quot;</span><span class="string">&quot;. Good practice is to quote any argument you use.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">File inclusion:</span></span><br><span class="line"><span class="string">You can include file by using <span class="variable">$FILENAME</span> macro (replace FILENAME with a path to file, for example $/usr/local/etc/3proxy/conf.incl or</span></span><br><span class="line"><span class="string">$&quot;</span>c:\\Program Files\3proxy\include.cfg<span class="string">&quot; Quotation is required in last example because path contains space character. For included file &lt;CR&gt; (end of line characters) is treated as space character (arguments delimiter instead of end of command delimiter). Thus, include files are only useful to store long signle-line commands (like userlist, network lists, etc). To use dollar sign somewhere in argument it must be quoted. Recursion is not allowed.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Next commands start gateway services:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">proxy [options]</span></span><br><span class="line"><span class="string">socks [options]</span></span><br><span class="line"><span class="string">pop3p [options]</span></span><br><span class="line"><span class="string">ftppr [options]</span></span><br><span class="line"><span class="string">admin [options]</span></span><br><span class="line"><span class="string">dnspr [options]</span></span><br><span class="line"><span class="string">tcppm [options] &lt;SRCPORT&gt; &lt;DSTADDR&gt; &lt;DSTPORT&gt;</span></span><br><span class="line"><span class="string">udppm [options] &lt;SRCPORT&gt; &lt;DSTADDR&gt; &lt;DSTPORT&gt;</span></span><br><span class="line"><span class="string">Descriptions:</span></span><br><span class="line"><span class="string">proxy HTTP/HTTPS proxy (default port 3128)</span></span><br><span class="line"><span class="string">socks SOCKS 4/4.5/5 proxy (default port 1080)</span></span><br><span class="line"><span class="string">pop3p POP3 proxy (default port 110)</span></span><br><span class="line"><span class="string">ftppr FTP proxy (default port 21)</span></span><br><span class="line"><span class="string">admin Web interface (default port 80)</span></span><br><span class="line"><span class="string">dnspr caching DNS proxy (default port 53)</span></span><br><span class="line"><span class="string">tcppm TCP portmapper</span></span><br><span class="line"><span class="string">udppm UDP portmapper</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Options:</span></span><br><span class="line"><span class="string">-pNUMBER change default server port to NUMBER</span></span><br><span class="line"><span class="string">-n disable NTLM authentication (required if passwords are stored in Unix crypt format).</span></span><br><span class="line"><span class="string">-n1 enable NTLMv1 authentication.</span></span><br><span class="line"><span class="string">-s</span></span><br><span class="line"><span class="string">(for admin) secure, allow only secure operations, currently only traffic counters view without ability to reset.</span></span><br><span class="line"><span class="string">(for dnspr) simple, do not use resolver and 3proxy cache, always use external DNS server.</span></span><br><span class="line"><span class="string">(for udppm) singlepacket, expect only one packet from both client and server</span></span><br><span class="line"><span class="string">-u Never ask for username/password</span></span><br><span class="line"><span class="string">-u2 (for socks) require username/password in authentication methods</span></span><br><span class="line"><span class="string">-a (for proxy) anonymous proxy (no information about client reported)</span></span><br><span class="line"><span class="string">-a1 (for proxy) anonymous proxy (random client information reported)</span></span><br><span class="line"><span class="string">-a2 (for proxy) generate Via: and X-Forwared-For: instead of Forwarded:</span></span><br><span class="line"><span class="string">-6 Only resolve IPv6 addresses. IPv4 addresses are packed in IPv6 in IPV6_V6ONLY compatible way.</span></span><br><span class="line"><span class="string">-4 Only resolve IPv4 addresses</span></span><br><span class="line"><span class="string">-46 Resolve IPv6 addresses if IPv4 address is not resolvable</span></span><br><span class="line"><span class="string">-64 Resolve IPv4 addresses if IPv6 address is not resolvable</span></span><br><span class="line"><span class="string">-RHOST:port listen on given local HOST:port for incoming connections instead of making remote outgoing connection. Can be used with another 3proxy service running -r option for connect back functionality. Most commonly used with tcppm. HOST can be given as IP or hostname, useful in case of dynamic DNS.</span></span><br><span class="line"><span class="string">-rHOST:port connect to given remote HOST:port instead of listening local connection on -p or default port. Can be used with another 3proxy service running -R option for connect back functionality. Most commonly used with proxy or socks. HOST can be given as IP or hostname, useful in case of dynamic DNS.</span></span><br><span class="line"><span class="string">-ocOPTIONS, -osOPTIONS, -olOPTIONS, -orOPTIONS, -oROPTIONS options for proxy-to-client (oc), proxy-to-server (os), proxy listening (ol), connect back client (or), connect back listening (oR) sockets. Options like TCP_CORK, TCP_NODELAY, TCP_DEFER_ACCEPT, TCP_QUICKACK, TCP_TIMESTAMPS, USE_TCP_FASTOPEN, SO_REUSEADDR, SO_REUSEPORT, SO_PORT_SCALABILITY, SO_REUSE_UNICASTPORT, SO_KEEPALIVE, SO_DONTROUTE may be supported depending on OS.</span></span><br><span class="line"><span class="string">-DiINTERFACE, -DeINTERFACE bind internal interface / external inteface to given INTERFACE (e.g. eth0) if SO_BINDTODEVICE supported by system. You may need to run as root or to have CAP_NET_RAW capability in order to bind to interface, depending on system, so this option may require root privileges and can be incompatible with some configuraton commands like chroot and setuid (and daemon if setcap is used).</span></span><br><span class="line"><span class="string">-e External address. IP address of interface proxy should initiate connections from. External IP must be specified if you need incoming connections. By default system will deside which address to use in accordance with routing table.</span></span><br><span class="line"><span class="string">-i Internal address. IP address proxy accepts connections to. By default connection to any interface is accepted.</span></span><br><span class="line"><span class="string">-N (for socks) External NAT address 3proxy reports to client for BIND and UDPASSOC By default external address is reported. It’s only useful in the case of IP-IP NAT (will not work for PAT)</span></span><br><span class="line"><span class="string">Also, all options mentioned for proxy(8) socks(8) pop3p(8) tcppm(8) udppm(8) ftppr(8)</span></span><br><span class="line"><span class="string">are also supported.</span></span><br><span class="line"><span class="string">Portmapping services listen at SRCPORT and connect to DSTADDR:DSTPORT HTTP and SOCKS proxies are standard.</span></span><br><span class="line"><span class="string">POP3 proxy must be configured as POP3 server and requires username in the form of: pop3username@pop3server. If POP3 proxy access must be authenticated, you can specify username as proxy_username:proxy_password:POP3_username@pop3server</span></span><br><span class="line"><span class="string">DNS proxy resolves any types of records but only hostnames are cached. It requires nserver/nscache to be configured. If nserver is configured as TCP, redirections are applied on connection, so parent proxy may be used to resolve names to IP.</span></span><br><span class="line"><span class="string">FTP proxy can be used as FTP server in any FTP client or configured as FTP proxy on a client with FTP proxy support. Username format is one of</span></span><br><span class="line"><span class="string">FTPuser@FTPServer</span></span><br><span class="line"><span class="string">FTPuser:FTPpassword@FTPserver</span></span><br><span class="line"><span class="string">proxyuser:proxypassword:FTPuser:FTPpassword@FTPserver</span></span><br><span class="line"><span class="string">Please note, if you use FTP client interface for FTP proxy do not add FTPpassword and FTPServer to username, because FTP client does it for you. That is, if you use 3proxy with authentication use proxyuser:proxypassword:FTPuser as FTP username, otherwise do not change original FTP user name</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">include &lt;path&gt;</span></span><br><span class="line"><span class="string">Include config file</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">config &lt;path&gt;</span></span><br><span class="line"><span class="string">Path to configuration file to use on 3proxy restart or to save configuration.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">writable</span></span><br><span class="line"><span class="string">ReOpens configuration file for write access via Web interface, and rereads it. Usually should be first command on config file but in combination with config it can be used anywhere to open alternate config file. Think twice before using it.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">End of configuration</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">log [[@|&amp;]logfile] [&lt;LOGTYPE&gt;]</span></span><br><span class="line"><span class="string">sets logfile for all gateways</span></span><br><span class="line"><span class="string">@ (for Unix) use syslog, filename is used as ident name</span></span><br><span class="line"><span class="string">&amp; use ODBC, filename consists of comma-delimited datasource,username,password (username and password are optional)</span></span><br><span class="line"><span class="string">radius - use RADIUS for logging</span></span><br><span class="line"><span class="string">LOGTYPE is one of:</span></span><br><span class="line"><span class="string">M Monthly</span></span><br><span class="line"><span class="string">W Weekly (starting from Sunday)</span></span><br><span class="line"><span class="string">D Daily</span></span><br><span class="line"><span class="string">H Hourly</span></span><br><span class="line"><span class="string">if logfile is not specified logging goes to stdout. You can specify individual logging options for gateway by using -l option in gateway configuration.</span></span><br><span class="line"><span class="string">log command supports same format specifications for filename template as &quot;</span>logformat<span class="string">&quot; (if filename contains ´%´ sign it´s believed to be template). As with &quot;</span>logformat<span class="string">&quot; filename must begin with ´L´ or ´G´ to specify Local or Grinwitch time zone for all time-based format specificators.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">rotate &lt;n&gt;</span></span><br><span class="line"><span class="string">how many archived log files to keep</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">logformat &lt;format&gt;</span></span><br><span class="line"><span class="string">Format for log record. First symbol in format must be L (local time) or G (absolute Grinwitch time). It can be preceeded with -XXX+Y where XXX is list of characters to be filtered in user input (any non-printable characters are filtered too in this case) and Y is replacement character. For example, &quot;</span>-,%+ L<span class="string">&quot; in the beginning of logformat means comma and percent are replaced with space and all time based elemnts are in local time zone.</span></span><br><span class="line"><span class="string">You can use:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">%y Year in 2 digit format</span></span><br><span class="line"><span class="string">%Y Year in 4 digit format</span></span><br><span class="line"><span class="string">%m Month number</span></span><br><span class="line"><span class="string">%o Month abbriviature</span></span><br><span class="line"><span class="string">%d Day</span></span><br><span class="line"><span class="string">%H Hour</span></span><br><span class="line"><span class="string">%M Minute</span></span><br><span class="line"><span class="string">%S Second</span></span><br><span class="line"><span class="string">%t Timstamp (in seconds since 01-Jan-1970)</span></span><br><span class="line"><span class="string">%. milliseconds</span></span><br><span class="line"><span class="string">%z timeZone (from Grinvitch)</span></span><br><span class="line"><span class="string">%D request duration (in milliseconds)</span></span><br><span class="line"><span class="string">%b average send rate per request (in Bytes per second) this speed is typically below connection speed shown by download manager.</span></span><br><span class="line"><span class="string">%B average receive rate per request (in Bytes per second) this speed is typically below connection speed shown by download manager.</span></span><br><span class="line"><span class="string">%U Username</span></span><br><span class="line"><span class="string">%N service Name</span></span><br><span class="line"><span class="string">%p service Port</span></span><br><span class="line"><span class="string">%E Error code</span></span><br><span class="line"><span class="string">%C Client IP</span></span><br><span class="line"><span class="string">%c Client port</span></span><br><span class="line"><span class="string">%R Remote IP</span></span><br><span class="line"><span class="string">%r Remote port</span></span><br><span class="line"><span class="string">%i Internal IP used to accept client connection</span></span><br><span class="line"><span class="string">%e External IP used to establish connection</span></span><br><span class="line"><span class="string">%Q Requested IP</span></span><br><span class="line"><span class="string">%q Requested port</span></span><br><span class="line"><span class="string">%n requested hostname</span></span><br><span class="line"><span class="string">%I bytes In</span></span><br><span class="line"><span class="string">%O bytes Out</span></span><br><span class="line"><span class="string">%h Hops (redirections) count</span></span><br><span class="line"><span class="string">%T service specific Text</span></span><br><span class="line"><span class="string">%N1-N2T (N1 and N2 are positive numbers) log only fields from N1 thorugh N2 of service specific text</span></span><br><span class="line"><span class="string">in the case of ODBC logging logformat specifies SQL statement, for exmample:</span></span><br><span class="line"><span class="string">logformat &quot;</span>-´+_Linsert into <span class="built_in">log</span> (l_date, l_user, l_service, l_in, l_out, l_descr) values (´%d-%m-%Y %H:%M:%S´, ´%U´, ´%N´, %I, %O, ´%T´)<span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">logdump &lt;in_traffic_limit&gt; &lt;out_traffic_limit&gt;</span></span><br><span class="line"><span class="string">Immediately creates additional log records if given amount of incoming/outgoing traffic is achieved for connection, without waiting for connection to finish. It may be useful to prevent information about long-lasting downloads on server shutdown.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">archiver &lt;ext&gt; &lt;commandline&gt;</span></span><br><span class="line"><span class="string">Archiver to use for log files. &lt;ext&gt; is file extension produced by archiver. Filename will be last argument to archiver, optionally you can use %A as produced archive name and %F as filename.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">timeouts &lt;BYTE_SHORT&gt; &lt;BYTE_LONG&gt; &lt;STRING_SHORT&gt; &lt;STRING_LONG&gt; &lt;CONNECTION_SHORT&gt; &lt;CONNECTION_LONG&gt; &lt;DNS&gt; &lt;CHAIN&gt; &lt;CONNECT&gt; &lt;CONNECTBACK&gt;</span></span><br><span class="line"><span class="string">Sets timeout values, defaults 1, 5, 30, 60, 180, 1800, 15, 60, 15, 5.</span></span><br><span class="line"><span class="string">BYTE_SHORT short timeout for single byte, is usually used for receiving single byte from stream.</span></span><br><span class="line"><span class="string">BYTE_LONG long timeout for single byte, is usually used for receiving first byte in frame (for example first byte in socks request).</span></span><br><span class="line"><span class="string">STRING_SHORT short timeout, for character string within stream (for example to wait between 2 HTTP headers)</span></span><br><span class="line"><span class="string">STRING_LONG long timeout, for first string in stream (for example to wait for HTTP request).</span></span><br><span class="line"><span class="string">CONNECTION_SHORT inactivity timeout for short connections (HTTP, POP3, etc).</span></span><br><span class="line"><span class="string">CONNECTION_LONG inactivity timeout for long connection (SOCKS, portmappers, etc).</span></span><br><span class="line"><span class="string">DNS timeout for DNS request before requesting next server</span></span><br><span class="line"><span class="string">CHAIN timeout for reading data from chained connection</span></span><br><span class="line"><span class="string">default timeouts 1 5 30 60 180 1800 15 60 15 5</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">radius &lt;NAS_SECRET&gt; &lt;radius_server_1[:port][/local_address_1]&gt; &lt;radius_server_2[:port][/local_address_2]&gt;</span></span><br><span class="line"><span class="string">Configures RADIUS servers to be used for logging and authentication (log and auth types must be set to radius). port and local address to use with given server may be specified.</span></span><br><span class="line"><span class="string">Attributes within request: User-Name, Password: (username and password if presented by client), Service Type: Authenticate-Only, NAS-Port-Type: NAS-Port-Virtual, NAS-Port-ID: (proxy service port, e.g. 1080), NAS-IPv6-Address / NAS-IP-Address: (proxy interface accessed by client), NAS-Identifier: (text identifing proxy, e.g. PROXY or SOCKSv5), Framed-IPv6-Address / Framed-IP-Address: (IP address of the client), Called-Station-ID: (requested Hostname, if presents), Login-Service: (type of request, e.g. 1001 - SOCKS CONNECT, 1010 - HTTP GET, 1013 - HTTP CONNECT), Login-TCP-Port: (requested port), Login-IPv6-Host / Login-IP-Host: (requested IP).</span></span><br><span class="line"><span class="string">Supported reply attributes for authentication: Framed-IP-Address / Framed-IPv6-Address (IP to assign to user), Reply-Message. Use authcache to speedup authentication. RADIUS feature is currently experimental.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nserver &lt;ipaddr&gt;[:port][/tcp]</span></span><br><span class="line"><span class="string">Nameserver to use for name resolutions. If none specified system routines for name resolution is used. Optional port number may be specified. If optional /tcp is added to IP address, name resolution is performed over TCP.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nscache &lt;cachesize&gt; nscache6 &lt;cachesize&gt;</span></span><br><span class="line"><span class="string">Cache &lt;cachesize&gt; records for name resolution (nscache for IPv4, nscache6 for IPv6). Cachesize usually should be large enougth (for example 65536).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nsrecord &lt;hostname&gt; &lt;hostaddr&gt;</span></span><br><span class="line"><span class="string">Adds static record to nscache. nscache must be enabled. If 0.0.0.0 is used as a hostaddr host will never resolve, it can be used to blacklist something or together with dialer command to set up UDL for dialing.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">fakeresolve</span></span><br><span class="line"><span class="string">All names are resolved to 127.0.0.2 address. Usefull if all requests are redirected to parent proxy with http, socks4+, connect+ or socks5+.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">dialer &lt;progname&gt;</span></span><br><span class="line"><span class="string">Execute progname if external name can´t be resolved. Hint: if you use nscache, dialer may not work, because names will be resolved through cache. In this case you can use something like http://dial.right.now/ from browser to set up connection.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">internal &lt;ipaddr&gt;</span></span><br><span class="line"><span class="string">sets ip address of internal interface. This IP address will be used to bind gateways. Alternatively you can use -i option for individual gateways. Since 0.8 version, IPv6 address may be used.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">external &lt;ipaddr&gt;</span></span><br><span class="line"><span class="string">sets ip address of external interface. This IP address will be source address for all connections made by proxy. Alternatively you can use -e option to specify individual address for gateway. Since 0.8 version External or -e can be given twice: once with IPv4 and once with IPv6 address.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">maxconn &lt;number&gt;</span></span><br><span class="line"><span class="string">sets maximum number of simulationeous connections to each services started after this command. Default is 250.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">service</span></span><br><span class="line"><span class="string">(depricated). Indicates 3proxy to behave as Windows 95/98/NT/2000/XP service, no effect for Unix. Not required for 3proxy 0.6 and above. If you upgraded from previous version of 3proxy use --remove and --install to reinstall service.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daemon</span></span><br><span class="line"><span class="string">Should be specified to close console. Do not use ´daemon´ with ´service´. At least under FreeBSD ´daemon´ should preceed any proxy service and log commands to avoid sockets problem. Always place it in the beginning of the configuration file.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">auth &lt;authtype&gt; [...]</span></span><br><span class="line"><span class="string">Type of user authorization. Currently supported:</span></span><br><span class="line"><span class="string">none - no authentication or authorization required.</span></span><br><span class="line"><span class="string">Note: is auth is none any ip based limitation, redirection, etc will not work. This is default authentication type</span></span><br><span class="line"><span class="string">iponly - authentication by access control list with username ignored.</span></span><br><span class="line"><span class="string">Appropriate for most cases</span></span><br><span class="line"><span class="string">useronly - authentication by username without checking for any password with authorization by ACLs. Useful for e.g. SOCKSv4 proxy and icqpr (icqpr set UIN / AOL screen name as a username)</span></span><br><span class="line"><span class="string">dnsname - authentication by DNS hostnname with authorization by ACLs. DNS hostname is resolved via PTR (reverse) record and validated (resolved name must resolve to same IP address). It´s recommended to use authcache by ip for this authentication. NB: there is no any password check, name may be spoofed.</span></span><br><span class="line"><span class="string">strong - username/password authentication required. It will work with SOCKSv5, FTP, POP3 and HTTP proxy.</span></span><br><span class="line"><span class="string">cache - cached authentication, may be used with ´authcache´.</span></span><br><span class="line"><span class="string">radius - authentication with RADIUS.</span></span><br><span class="line"><span class="string">Plugins may add additional authentication types.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">It´s possible to use few authentication types in the same commands. E.g.</span></span><br><span class="line"><span class="string">auth iponly strong</span></span><br><span class="line"><span class="string">In this case ´strong´ authentication will be used only in case resource access can not be performed with ´iponly´ authentication, that is username is required in ACL. It´s usefull to protect access to some resources with password allowing passwordless access to another resources, or to use IP-based authentication for dedicated laptops and request username/password for shared ones.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">authcache &lt;cachtype&gt; &lt;cachtime&gt;</span></span><br><span class="line"><span class="string">Cache authentication information to given amount of time (cachetime) in seconds. Cahtype is one of:</span></span><br><span class="line"><span class="string">ip - after successful authentication all connections during caching time from same IP are assigned to the same user, username is not requested.</span></span><br><span class="line"><span class="string">ip,user username is requested and all connections from the same IP are assigned to the same user without actual authentication.</span></span><br><span class="line"><span class="string">user - same as above, but IP is not checked.</span></span><br><span class="line"><span class="string">user,password - both username and password are checked against cached ones.</span></span><br><span class="line"><span class="string">limit - limit user to use only one ip, ´ip´ and ´user´ are required</span></span><br><span class="line"><span class="string">acl - only use cached auth if user access service with same ACL</span></span><br><span class="line"><span class="string">ext - cache external IP</span></span><br><span class="line"><span class="string">Use auth type ´cache´ for cached authentication</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">allow &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">deny &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">Access control entries. All lists are comma-separated, no spaces are allowed. Usernames are case sensitive (if used with authtype nbname username must be in uppercase). Source and target lists may contain IP addresses (W.X.Y.Z), ranges A.B.C.D - W.X.Y.Z (since 0.8) or CIDRs (W.X.Y.Z/L). Since 0.6, targetlist may also contain host names, instead of addresses. It´s possible to use wildmask in the begginning and in the the end of hostname, e.g. *badsite.com or *badcontent*. Hostname is only checked if hostname presents in request. Targetportlist may contain ports (X) or port ranges lists (X-Y). For any field * sign means ANY. If access list is empty it´s assumed to be</span></span><br><span class="line"><span class="string">allow *</span></span><br><span class="line"><span class="string">If access list is not empty last item in access list is assumed to be</span></span><br><span class="line"><span class="string">deny *</span></span><br><span class="line"><span class="string">You may want explicitly add deny * to the end of access list to prevent HTTP proxy from requesting user´s password. Access lists are checked after user have requested any resource. If you want 3proxy to reject connections from specific addresses immediately without any conditions you should either bind proxy to appropriate interface only or to use ip filters.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Operation is one of:</span></span><br><span class="line"><span class="string">CONNECT establish outgoing TCP connection</span></span><br><span class="line"><span class="string">BIND bind TCP port for listening</span></span><br><span class="line"><span class="string">UDPASSOC make UDP association</span></span><br><span class="line"><span class="string">ICMPASSOC make ICMP association (for future use)</span></span><br><span class="line"><span class="string">HTTP_GET HTTP GET request</span></span><br><span class="line"><span class="string">HTTP_PUT HTTP PUT request</span></span><br><span class="line"><span class="string">HTTP_POST HTTP POST request</span></span><br><span class="line"><span class="string">HTTP_HEAD HTTP HEAD request</span></span><br><span class="line"><span class="string">HTTP_CONNECT HTTP CONNECT request</span></span><br><span class="line"><span class="string">HTTP_OTHER over HTTP request</span></span><br><span class="line"><span class="string">HTTP matches any HTTP request except HTTP_CONNECT</span></span><br><span class="line"><span class="string">HTTPS same as HTTP_CONNECT</span></span><br><span class="line"><span class="string">FTP_GET FTP get request</span></span><br><span class="line"><span class="string">FTP_PUT FTP put request</span></span><br><span class="line"><span class="string">FTP_LIST FTP list request</span></span><br><span class="line"><span class="string">FTP_DATA FTP data connection. Note: FTP_DATA requires access to dynamic non-ptivileged (1024-65535) ports on remote side.</span></span><br><span class="line"><span class="string">FTP matches any FTP/FTP Data request</span></span><br><span class="line"><span class="string">ADMIN access to administration interface</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Weeksdays are week days numbers or periods, 0 or 7 means Sunday, 1 is Monday, 1-5 means Monday through Friday.</span></span><br><span class="line"><span class="string">Timeperiodlists is a list of time periods in HH:MM:SS-HH:MM:SS format. For example, 00:00:00-08:00:00,17:00:00-24:00:00 lists non-working hours.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">parent &lt;weight&gt; &lt;type&gt; &lt;ip&gt; &lt;port&gt; &lt;username&gt; &lt;password&gt;</span></span><br><span class="line"><span class="string">this command must follow &quot;</span>allow<span class="string">&quot; rule. It extends last allow rule to build proxy chain. Proxies may be grouped. Proxy inside the group is selected randomly. If few groups are specified one proxy is randomly picked from each group and chain of proxies is created (that is second proxy connected through first one and so on). Weight is used to group proxies. Weigt is a number between 1 and 1000. Weights are summed and proxies are grouped together untill weight of group is 1000. That is:</span></span><br><span class="line"><span class="string">allow *</span></span><br><span class="line"><span class="string">parent 500 socks5 192.168.10.1 1080</span></span><br><span class="line"><span class="string">parent 500 connect 192.168.10.1 3128</span></span><br><span class="line"><span class="string">makes 3proxy to randomly choose between 2 proxies for all outgoing connections. These 2 proxies form 1 group (summarized weight is 1000).</span></span><br><span class="line"><span class="string">allow * * * 80</span></span><br><span class="line"><span class="string">parent 1000 socks5 192.168.10.1 1080</span></span><br><span class="line"><span class="string">parent 1000 connect 192.168.20.1 3128</span></span><br><span class="line"><span class="string">parent 300 socks4 192.168.30.1 1080</span></span><br><span class="line"><span class="string">parent 700 socks5 192.168.40.1 1080</span></span><br><span class="line"><span class="string">creates chain of 3 proxies: 192.168.10.1, 192.168.20.1 and third is (192.168.30.1 with probability of 0.3 or 192.168.40.1 with probability of 0.7) for outgoing web connections. Chains are only applied to new connections, pipelined (keep-alive) requests in the same connection use the same chain.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">type is one of:</span></span><br><span class="line"><span class="string">extip does not actully redirect request, it sets external address for this request to &lt;ip&gt;. It can be chained with another parent types. It’s usefaul to set external IP based on ACL or make it random.</span></span><br><span class="line"><span class="string">tcp simply redirect connection. TCP is always last in chain. This type of proxy is a simple TCP redirection, it does not support parent authentication.</span></span><br><span class="line"><span class="string">http redirect to HTTP proxy. HTTP is always the last chain. It should only be used with http (proxy) service, if used with different service, it works as tcp redirection.</span></span><br><span class="line"><span class="string">pop3 redirect to POP3 proxy (only local redirection is supported, can only be used as a first hop in chaining)</span></span><br><span class="line"><span class="string">ftp redirect to FTP proxy (only local redirection is supported, can only be used as a first hop in chaining)</span></span><br><span class="line"><span class="string">connect parent is HTTP CONNECT method proxy</span></span><br><span class="line"><span class="string">connect+ parent is HTTP CONNECT proxy with name resolution (hostname is used instead of IP if available)</span></span><br><span class="line"><span class="string">socks4 parent is SOCKSv4 proxy</span></span><br><span class="line"><span class="string">socks4+ parent is SOCKSv4 proxy with name resolution (SOCKSv4a)</span></span><br><span class="line"><span class="string">socks5 parent is SOCKSv5 proxy</span></span><br><span class="line"><span class="string">socks5+ parent is SOCKSv5 proxy with name resolution</span></span><br><span class="line"><span class="string">socks4b parent is SOCKS4b (broken SOCKSv4 implementation with shortened server reply. I never saw this kind ofservers byt they say there are). Normally you should not use this option. Do not mess this option with SOCKSv4a (socks4+).</span></span><br><span class="line"><span class="string">socks5b parent is SOCKS5b (broken SOCKSv5 implementation with shortened server reply. I think you will never find it useful). Never use this option unless you know exactly you need it.</span></span><br><span class="line"><span class="string">admin redirect request to local ´admin´ service (with -s parameter).</span></span><br><span class="line"><span class="string">Use &quot;</span>+<span class="string">&quot; proxy only with &quot;</span>fakeresolve<span class="string">&quot; option</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">IP and port are ip addres and port of parent proxy server. If IP is zero, ip is taken from original request, only port is changed. If port is zero, it´s taken from original request, only IP is changed. If both IP and port are zero - it´s a special case of local redirection, it works only with socks proxy. In case of local redirection request is redirected to different service, ftp locally redirects to ftppr pop3 locally redirects to pop3p http locally redurects to proxy admin locally redirects to admin -s service.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Main purpose of local redirections is to have requested resource (URL or POP3 username) logged and protocol-specific filters to be applied. In case of local redirection ACLs are revied twice: first, by SOCKS proxy up to ´parent´ command and then with gateway service connection is redirected (HTTP, FTP or POP3) after ´parent´ command. It means, additional ´allow´ command is required for redirected requests, for example:</span></span><br><span class="line"><span class="string">allow * * * 80</span></span><br><span class="line"><span class="string">parent 1000 http 0.0.0.0 0</span></span><br><span class="line"><span class="string">allow * * * 80 HTTP_GET,HTTP_POST</span></span><br><span class="line"><span class="string">socks</span></span><br><span class="line"><span class="string">redirects all SOCKS requests with target port 80 to local HTTP proxy, local HTTP proxy parses requests and allows only GET and POST requests.</span></span><br><span class="line"><span class="string">parent 1000 http 1.2.3.4 0</span></span><br><span class="line"><span class="string">Changes external address for given connection to 1.2.3.4 (an equivalent to -e1.2.3.4)</span></span><br><span class="line"><span class="string">Optional username and password are used to authenticate on parent proxy. Username of ´*´ means username must be supplied by user.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nolog &lt;n&gt;</span></span><br><span class="line"><span class="string">extends last allow or deny command to prevent logging, e.g.</span></span><br><span class="line"><span class="string">allow * * 192.168.1.1</span></span><br><span class="line"><span class="string">nolog</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">weight &lt;n&gt;</span></span><br><span class="line"><span class="string">extends last allow or deny command to set weight for this request</span></span><br><span class="line"><span class="string">allow * * 192.168.1.1</span></span><br><span class="line"><span class="string">weight 100</span></span><br><span class="line"><span class="string">Weight may be used for different purposes.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">force</span></span><br><span class="line"><span class="string">noforce</span></span><br><span class="line"><span class="string">If force is specified for service, configuration reload will require all current sessions of this service to be re-authenticated. If ACL is changed or user account is removed, old connections which do not match current are closed. noforce allows to keep previously authenticated connections.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">bandlimin &lt;rate&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nobandlimin &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">bandlimout &lt;rate&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nobandlimout &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">bandlim sets bandwith limitation filter to &lt;rate&gt; bps (bits per second) If you want to specife bytes per second - multiply your value to 8. bandlim rules act in a same manner as allow/deny rules except one thing: bandwidth limiting is applied to all services, not to some specific service. bandlimin and nobandlimin applies to incoming traffic bandlimout and nobandlimout applies to outgoing traffic If tou want to ratelimit your clients with IPs 192.168.10.16/30 (4 addresses) to 57600 bps you have to specify 4 rules like</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.16</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.17</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.18</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.19</span></span><br><span class="line"><span class="string">and every of you clients will have 56K channel. If you specify</span></span><br><span class="line"><span class="string">bandlimin 57600 * 192.168.10.16/30</span></span><br><span class="line"><span class="string">you will have 56K channel shared between all clients. if you want, for example, to limit all speed ecept access to POP3 you can use</span></span><br><span class="line"><span class="string">nobandlimin * * * 110</span></span><br><span class="line"><span class="string">before the rest of bandlim rules.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">connlim &lt;rate&gt; &lt;period&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">noconnlim &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">connlim sets connections rate limit per time period for traffic pattern controlled by ACL. Period is in seconds. If period is 0, connlim limits a number of parallel connections.</span></span><br><span class="line"><span class="string">connlim 100 60 * 127.0.0.1</span></span><br><span class="line"><span class="string">allows 100 connections per minute for 127.0.0.1.</span></span><br><span class="line"><span class="string">connlim 20 0 * 127.0.0.1</span></span><br><span class="line"><span class="string">allows 20 simulationeous connections for 127.0.0.1.</span></span><br><span class="line"><span class="string">Like with bandlimin, if individual limit is required per client, separate rule mustbe added for every client. Like with nobanlimin, noconnlim adds an exception.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">counter &lt;filename&gt; &lt;reporttype&gt; &lt;repotname&gt;</span></span><br><span class="line"><span class="string">countin &lt;number&gt; &lt;type&gt; &lt;limit&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nocountin &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">countout &lt;number&gt; &lt;type&gt; &lt;limit&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nocountout &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">countall &lt;number&gt; &lt;type&gt; &lt;limit&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string">nocountall &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">counter, countin, nocountin, countout, noucountout, countall, nocountall commands are used to set traffic limit in MB for period of time (day, week or month). Filename is a path to a special file where traffic information is permanently stored. number is sequential number of record in this file. If number is 0 this counter is not preserved in counter file (that is if proxy restarted all counters with 0 are flushed) overwise it should be unique sequential number which points to position of the couter within the file. Type specifies a type of counter. Type is one of:</span></span><br><span class="line"><span class="string">H - counter is resetted hourly</span></span><br><span class="line"><span class="string">D - counter is resetted daily</span></span><br><span class="line"><span class="string">W - counter is resetted weekly</span></span><br><span class="line"><span class="string">M - counter is resetted monthely</span></span><br><span class="line"><span class="string">reporttype/repotname may be used to generate traffic reports. Reporttype is one of D,W,M,H(hourly) and repotname specifies filename template for reports. Report is text file with counter values in format:</span></span><br><span class="line"><span class="string">&lt;COUNTERNUMBER&gt; &lt;TRAF&gt;</span></span><br><span class="line"><span class="string">The rest of parameters is identical to bandlim/nobandlim.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">users username[:pwtype:password] ...</span></span><br><span class="line"><span class="string">pwtype is one of:</span></span><br><span class="line"><span class="string">none (empty) - use system authentication</span></span><br><span class="line"><span class="string">CL - password is cleartext</span></span><br><span class="line"><span class="string">CR - password is crypt-style password</span></span><br><span class="line"><span class="string">NT - password is NT password (in hex)</span></span><br><span class="line"><span class="string">example:</span></span><br><span class="line"><span class="string">users test1:CL:password1 &quot;</span>test2:CR:$1$lFDGlder<span class="variable">$pLRb4cU2D7GAT58YQvY49</span>.<span class="string">&quot;</span></span><br><span class="line"><span class="string">users test3:NT:BD7DFBF29A93F93C63CB84790DA00E63</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Note: double quotes are requiered because password contains $ sign.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">flush</span></span><br><span class="line"><span class="string">empty active access list. Access list must be flushed avery time you creating new access list for new service. For example:</span></span><br><span class="line"><span class="string">allow *</span></span><br><span class="line"><span class="string">pop3p</span></span><br><span class="line"><span class="string">flush</span></span><br><span class="line"><span class="string">allow * 192.168.1.0/24</span></span><br><span class="line"><span class="string">socks</span></span><br><span class="line"><span class="string">sets different ACLs for pop3p and socks</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">system &lt;command&gt;</span></span><br><span class="line"><span class="string">execute system command</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">pidfile &lt;filename&gt;</span></span><br><span class="line"><span class="string">write pid of current process to file. It can be used to manipulate 3proxy with signals under Unix. Currently next signals are available:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">monitor &lt;filename&gt;</span></span><br><span class="line"><span class="string">If file monitored changes in modification time or size, 3proxy reloads configuration within one minute. Any number of files may be monitored.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">setuid &lt;uid&gt;</span></span><br><span class="line"><span class="string">calls setuid(uid), uid can be numeric or since 0.9 username. Unix only. Warning: under some Linux kernels setuid() works for current thread only. It makes it impossible to suid for all threads.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">setgid &lt;gid&gt;</span></span><br><span class="line"><span class="string">calls setgid(gid), gid can be numeric or since 0.9 groupname. Unix only.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">chroot &lt;path&gt; [&lt;uid&gt;] [&lt;gid&gt;]</span></span><br><span class="line"><span class="string">calls chroot(path) and sets gid/uid. Unix only. uid/gid supported since 0.9, can be numeric or username/groupname</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">stacksize &lt;value_to_add_to_default_stack_size&gt;</span></span><br><span class="line"><span class="string">Change default size for threads stack. May be required in some situation, e.g. with non-default plugins, on on some platforms (some FreeBSD version may require adjusting stack size due to invalid defined value in system header files, this value is also oftent reqruied to be changed for ODBC and PAM support on Linux. If you experience 3proxy crash on request processing, try to set some positive value. You may start with stacksize 65536 and then find the minimal value for service to work. If you experience memory shortage, you can try to experiment with negative values.</span></span><br></pre></td></tr></table></figure>

<p>Centos7下载安装3proxy<br><a target="_blank" rel="noopener" href="https://juejin.cn/post/7091955944631992350">https://juejin.cn/post/7091955944631992350</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># #DNS服务器</span></span><br><span class="line"><span class="comment"># nserver 202.141.162.123</span></span><br><span class="line"><span class="comment"># nserver 202.141.176.93</span></span><br><span class="line">nserver 127.0.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment">#DNS缓存时间</span></span><br><span class="line">nscache 65536</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将DNS解析交给上级代理完成</span></span><br><span class="line"><span class="comment"># fakeresolve</span></span><br><span class="line"><span class="comment"># dnspr参数表示使用dns</span></span><br><span class="line"><span class="comment"># dnspr</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#超时</span></span><br><span class="line">timeouts 1 5 30 60 180 1800 15 60</span><br><span class="line"></span><br><span class="line"><span class="comment">#对linux及非nt系统应替换为daemon，就可以保证在后台运行。</span></span><br><span class="line">daemon</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志相关配置</span></span><br><span class="line"><span class="comment">## 日志保存目录</span></span><br><span class="line"><span class="built_in">log</span> /var/log/3proxy/3proxy.<span class="built_in">log</span> D</span><br><span class="line"><span class="comment">## 日志格式</span></span><br><span class="line"><span class="comment">#logformat &quot;- +_L%N.%p %E %U %C:%c %R:%r %O %I %h %T&quot;</span></span><br><span class="line">logformat <span class="string">&quot;L%y-%m-%d %H:%M:%S %U %N %C:%c %R:%r %I %O %T&quot;</span></span><br><span class="line"><span class="comment"># 日志保存时长</span></span><br><span class="line">rotate 30</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义了一个用户，用户名：ziyou，密码：pass</span></span><br><span class="line"><span class="comment">## CL表示使用了明文密码。</span></span><br><span class="line"><span class="built_in">users</span> zhouwen:CL:zhouwen123 qiaofei:CL:qiaofei123</span><br><span class="line"></span><br><span class="line"><span class="comment"># 认证方式:使用账号密码认证</span></span><br><span class="line">auth strong</span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许ziyou这个用户访问</span></span><br><span class="line"><span class="comment">## 注意添加完用户还要配置允许用户</span></span><br><span class="line"><span class="comment"># allow zhouwen</span></span><br><span class="line">allow zhouwen,qiaofei</span><br><span class="line"></span><br><span class="line"><span class="comment"># 父代理 轮询比例(1000最大) 协议 ip 端口</span></span><br><span class="line"><span class="comment"># parent 1000 http 43.132.255.122 9999</span></span><br><span class="line">parent 1000 socks5 127.0.0.1 1080</span><br><span class="line"><span class="comment"># 监听端口</span></span><br><span class="line"><span class="comment"># -a表示匿名代理,-p代表监听的端口</span></span><br><span class="line"><span class="comment">## 匿名代理-对方知道你使用了代理,但不知道你的真实ip</span></span><br><span class="line"><span class="comment">## http协议端口3128</span></span><br><span class="line">proxy -a -p10808</span><br><span class="line"></span><br><span class="line"><span class="comment">## socks4协议端口1080</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#socks -p1080</span></span><br><span class="line"><span class="comment"># socks -a -p10808</span></span><br></pre></td></tr></table></figure>

<h2 id="3proxy容器化部署"><a href="#3proxy容器化部署" class="headerlink" title="3proxy容器化部署"></a>3proxy容器化部署</h2><p><a target="_blank" rel="noopener" href="https://hub.docker.com/r/3proxy/3proxy">https://hub.docker.com/r/3proxy/3proxy</a><br><a target="_blank" rel="noopener" href="https://github.com/my6889/3proxy">https://github.com/my6889/3proxy</a></p>
<p>设置用户名密码和服务端口<br>修改3proxy.cfg中的用户名、密码、服务端口</p>
<p>下载项目<br>git clone <a target="_blank" rel="noopener" href="https://github.com/my6889/3proxy.git">https://github.com/my6889/3proxy.git</a></p>
<p>docker-compose<br>docker-compose up -d </p>
<p>Kubernetes<br>创建Configmap<br>kubectl apply -f 3proxy-configmap.yml</p>
<p>如果用Daemonset部署<br>kubectl apply -f 3proxy-daemonset.yml</p>
<p>如果用Deployment部署<br>kubectl apply -f 3proxy-deployment.yml</p>
<h2 id="客户端代理使用"><a href="#客户端代理使用" class="headerlink" title="客户端代理使用"></a>客户端代理使用</h2><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><blockquote>
<p>有钱任性，服务端可以购买使用CCProxy</p>
</blockquote>
<ul>
<li>浏览器代理</li>
<li>Proxifier</li>
</ul>
<h3 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a>Linux</h3><ul>
<li>export http_proxy&#x3D;””</li>
<li>proxychains(proxychains-ng)</li>
<li>redsocks + iptables</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0-Study/">学习 | Study</a>
</div>


</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://wsgzao.github.io/post/3proxy/" data-title="3proxy安装配置实践 | HelloDog" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/post/sre/" title="SRE学习路径">
  <strong>上一篇：</strong><br/>
  <span>
  SRE学习路径</span>
</a>
</div>


<div class="next">
<a href="/post/adguard/"  title="AdGuard过滤规则分享">
 <strong>下一篇：</strong><br/> 
 <span>AdGuard过滤规则分享
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%8E%86%E5%8F%B2"><span class="toc-number">2.</span> <span class="toc-text">更新历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3proxy%E7%AE%80%E4%BB%8B"><span class="toc-number">3.</span> <span class="toc-text">3proxy简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3proxy%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">3proxy安装配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux"><span class="toc-number">4.1.</span> <span class="toc-text">Linux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows"><span class="toc-number">4.2.</span> <span class="toc-text">Windows</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3proxy%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E9%87%8A"><span class="toc-number">5.</span> <span class="toc-text">3proxy配置文件解释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3proxy-cfg"><span class="toc-number">5.1.</span> <span class="toc-text">3proxy.cfg</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3proxy%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="toc-number">6.</span> <span class="toc-text">3proxy容器化部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BB%A3%E7%90%86%E4%BD%BF%E7%94%A8"><span class="toc-number">7.</span> <span class="toc-text">客户端代理使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#windows"><span class="toc-number">7.1.</span> <span class="toc-text">windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-1"><span class="toc-number">7.2.</span> <span class="toc-text">Linux</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="wsgzao" data-theme="medium"></div>
<script type="text/javascript" src="//lab.lepture.com/github-cards/widget.js" ></script>
</div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Hexo/" title="Hexo">Hexo<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/学习-Study/" title="学习 | Study">学习 | Study<sup>195</sup></a></li>
		  
		
		  
			<li><a href="/categories/生活-Life/" title="生活 | Life">生活 | Life<sup>26</sup></a></li>
		  
		
		  
			<li><a href="/categories/软件-Soft/" title="软件 | Soft">软件 | Soft<sup>5</sup></a></li>
		  
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.linkedin.com/in/aowang" target="_blank" title="LinkedIn">LinkedIn</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, I&#39;m OX. This is my blog on GitHub. <br/>
			Keep Calm and Carry On.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/wsgzao" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		<a href="https://www.linkedin.com/in/aowang" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2023 
		
		<a href="/about" target="_blank" title="wsgzao">wsgzao</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-3.6.4.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery-qrcode-0.18.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'wsgzao';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>








<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-77732745-1', 'wsgzao.github.io');  
ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?c2c5fc7d844d0973d9f77abd87f49c3c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- swiftype Begin -->

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','_4qDmKrBPn9Es3UvQHT4','2.0.0');
</script>

<!-- swiftype End -->

  </body>
</html>
