<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HelloDog</title>
  <subtitle>Keep Calm and Carry On</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://wsgzao.github.io/"/>
  <updated>2017-05-16T09:18:00.857Z</updated>
  <id>https://wsgzao.github.io/</id>
  
  <author>
    <name>wsgzao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dokan+SSHFS 文件系统共享心得，代替Samba的理想之选</title>
    <link href="https://wsgzao.github.io/post/winsshfs/"/>
    <id>https://wsgzao.github.io/post/winsshfs/</id>
    <published>2017-05-16T06:59:49.000Z</published>
    <updated>2017-05-16T09:18:00.857Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>2017年5月12日国内校园网络遭受勒索病毒蠕虫入侵损失惨重，国内的安全厂商也在第一时间发布安全告警和预防方案，可是通过防火墙直接禁用445端口来解决安全隐患的方式似乎也带来了其他问题，而Samba文件系统共享正是使用了该端口，由于安全的权重大于一切，在研究过CIFS/NFS共享协议以及GoodSync等数据同步软件后发现Dokan+SSHFS可以作为目前比较理想的解决方案。</p>
<blockquote>
<p>使用Dokan+SSHFS实现Linux与Windows文件系统共享，解决Samba 445端口被禁的矛盾</p>
</blockquote>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2017年05月16日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/winsshfs/" target="_blank" rel="external">https://wsgzao.github.io/post/winsshfs/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Dokan -  <a href="http://dokan-dev.github.io" target="_blank" rel="external">http://dokan-dev.github.io</a><br>WinSSHFS - <a href="https://github.com/Foreveryone-cz/win-sshfs" target="_blank" rel="external">https://github.com/Foreveryone-cz/win-sshfs</a></p>
<hr>
<h2 id="Dokan和SSHFS"><a href="#Dokan和SSHFS" class="headerlink" title="Dokan和SSHFS"></a>Dokan和SSHFS</h2><blockquote>
<p>User mode file system library for windows with FUSE Wrapper</p>
</blockquote>
<p>Dokan是用户态的文件系统驱动，可以称之为fuse for windows。可以用来开发虚拟磁盘，即在“我的电脑”中虚拟出一个硬盘来，可以是硬盘，也可以是可移动磁盘或者网络硬盘。</p>
<p><a href="http://dokan-dev.github.io" target="_blank" rel="external">http://dokan-dev.github.io</a></p>
<blockquote>
<p>SSH(SFTP) filesystem for Windows</p>
</blockquote>
<p>SSH(SFTP) filesystem made using Dokan and SSH.NET library. It allows you to mount remote computers via SFTP protocol like windows network drives .</p>
<p>sshfs 是基于 FUSE 构建的 SSH 文件系统客户端程序，通过它远程主机的配置无需作任何改变，就可以透过 SSH 协议来挂载远程文件系统了，非常方便及安全。</p>
<p><a href="https://github.com/Foreveryone-cz/win-sshfs" target="_blank" rel="external">https://github.com/Foreveryone-cz/win-sshfs</a></p>
<h2 id="WinSSHFS"><a href="#WinSSHFS" class="headerlink" title="WinSSHFS"></a>WinSSHFS</h2><p>使用方法很简单，这里有一篇国外的文章写得非常清晰，大家遇到问题可以参考下<br><a href="https://igikorn.com/sshfs-windows-10/" target="_blank" rel="external">https://igikorn.com/sshfs-windows-10/</a></p>
<p><img src="https://ooo.0o0.ooo/2017/05/16/591ab60fd5298.png" alt=""></p>
<ol>
<li>安装Dokan</li>
<li>安装WinSSHFS</li>
<li>配置WinSSHFS然后Mount远端文件夹</li>
</ol>
<p>Get Dokan here: <a href="https://github.com/dokan-dev/dokany/releases" target="_blank" rel="external">https://github.com/dokan-dev/dokany/releases</a><br>Get WinSSHFS here: <a href="https://github.com/Foreveryone-cz/win-sshfs/releases" target="_blank" rel="external">https://github.com/Foreveryone-cz/win-sshfs/releases</a><br>百度网盘：<a href="http://pan.baidu.com/s/1dEPrPfF" target="_blank" rel="external">http://pan.baidu.com/s/1dEPrPfF</a></p>
<p>如果需要学习Samba可以参考之前的一篇文章<br><a href="https://wsgzao.github.io/post/samba/" target="_blank" rel="external">https://wsgzao.github.io/post/samba/</a></p>
]]></content>
    
    <summary type="html">
    
      使用Dokan+SSHFS实现Linux与Windows文件系统共享，解决Samba 445端口被禁的矛盾
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>使用Samba实现Linux与Windows文件共享实践</title>
    <link href="https://wsgzao.github.io/post/samba/"/>
    <id>https://wsgzao.github.io/post/samba/</id>
    <published>2017-05-16T06:31:57.000Z</published>
    <updated>2017-05-16T08:30:22.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/Pbu91VnP.png" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>一直以来都以为FTP和NFS是局域网文件共享的常用方式，但是在最近接触Samba之后，了解到一些用户需要简化访问学习成本，满足基础的权限控制管理，并支持实时编辑和保存文件，我才明白这些需求使用之前的方法都是很难满足的，而Samba却可以完美的支持上述需求，虽然在开始接触时花了一些时间学习，但把配置和语法梳理清楚之后就很简单了。</p>
<blockquote>
<p>Unix与Windows文件共享的最佳方式之一</p>
</blockquote>
<hr>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2017年05月16日 - 完善内容<br>2015年07月28日 - 增加Samba日志审计部分<br>2015年07月11日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/samba/" target="_blank" rel="external">https://wsgzao.github.io/post/samba/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Samba - <a href="https://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/" target="_blank" rel="external">https://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/</a><br>使用Samba或NFS实现文件共享 - <a href="http://www.linuxprobe.com/chapter-12.html" target="_blank" rel="external">http://www.linuxprobe.com/chapter-12.html</a><br>SAMBA服务器 - <a href="http://vbird.dic.ksu.edu.tw/linux_server/0370samba.php" target="_blank" rel="external">http://vbird.dic.ksu.edu.tw/linux_server/0370samba.php</a><br>RHEL6.5下部署samba企业级文件服务器实战 - <a href="http://yuan2.blog.51cto.com/446689/1588085" target="_blank" rel="external">http://yuan2.blog.51cto.com/446689/1588085</a><br>Samba日志分析 - <a href="http://chenguang.blog.51cto.com/350944/1606746" target="_blank" rel="external">http://chenguang.blog.51cto.com/350944/1606746</a></p>
<hr>
<h2 id="安装samba"><a href="#安装samba" class="headerlink" title="安装samba"></a>安装samba</h2><blockquote>
<p>各个平台的安装都蛮简单的，略过</p>
</blockquote>
<h2 id="配置samba"><a href="#配置samba" class="headerlink" title="配置samba"></a>配置samba</h2><blockquote>
<p>建议合理规划目录和用户权限，可以利用用户组来简化授权管理，参见扩展阅读</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#创建目录（举例）</span></span><br><span class="line">mkdir -p /data2/sm</span><br><span class="line">chmod -R <span class="number">777</span> /data2/sm</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加用户（举例）</span></span><br><span class="line">groupadd dengling</span><br><span class="line">useradd -g dengling <span class="operator">-s</span> /sbin/nologin dengling</span><br><span class="line"><span class="comment">#推荐使用pdbedit</span></span><br><span class="line">smbpasswd <span class="operator">-a</span> dengling</span><br><span class="line"></span><br><span class="line"><span class="comment">#备份smb配置文件并编辑</span></span><br><span class="line"><span class="built_in">cd</span> /etc/samba</span><br><span class="line">cp smb.conf smb.conf.bak</span><br><span class="line">vi smb.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#全局参数</span></span><br><span class="line">[global]</span><br><span class="line">security = share</span><br><span class="line"><span class="built_in">log</span> file = /var/<span class="built_in">log</span>/samba/log.%m</span><br><span class="line">idmap config * : backend = tdb</span><br><span class="line">guest ok = Yes</span><br><span class="line">lanman auth = Yes</span><br><span class="line">client lanman auth = yes</span><br><span class="line">client plaintext auth = yes</span><br><span class="line">hosts allow = <span class="number">127</span>., <span class="number">172</span>., <span class="number">192.168</span>.<span class="number">1</span>., <span class="number">192.168</span>.<span class="number">3</span>.</span><br><span class="line">cups options = raw</span><br><span class="line">        vfs objects = full_audit</span><br><span class="line">        full_audit:failure = none</span><br><span class="line">        full_audit:success = rename unlink rmdir open opendir pwrite write</span><br><span class="line">        full_audit:prefix = %u|%I|%m|%</span><br><span class="line">admin <span class="built_in">log</span> = yes</span><br><span class="line"><span class="built_in">log</span> level = <span class="number">2</span></span><br><span class="line">        syslog = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#共享参数</span></span><br><span class="line">[homes]</span><br><span class="line">    comment = Home Directories</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    browseable = No</span><br><span class="line"></span><br><span class="line">[sheji]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/sheji</span><br><span class="line">    valid users = share, shenwei, xuwei, shenjiamei, humengchu, rensiqiang, yeting, tongying, jinbo, zengfanan, fengpeisi</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0775</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[<span class="built_in">test</span>]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/<span class="built_in">test</span></span><br><span class="line">    valid users = <span class="built_in">test</span>, <span class="built_in">test</span>2, shenwei</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0775</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[q2]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/q2</span><br><span class="line">    valid users = xuejia, sungaoshuai, lujingjing, huangsonghe, yefei, lvwenhan, fangyuan, zhanghuichen, liuguofa, xupeiyu, yangpengfei, lisuitao, sunzhen, shenwei, xuwei, shenjiamei, humengchu, rensiqiang, yeting, tongying, jinbo, zengfanan, fengpeisi, chenye, wuailing, pengnan, liangzhixue, chenhong, daimengyou, wangxiaoshuo, zhoujian, fenglu, linlijun, chenshuxian, linzhimin, yanyoushan, xiaguoying, zhanghuanrong, mayushu, xuyangjing, guogaoyan, huangyouyang, jinzhibin, huyuqing, shenxuemei, liukui</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0775</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[market]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/market</span><br><span class="line">    valid users = zhanghuichen, shenwei, chenye, wuailing, pengnan, liangzhixue, chenhong, daimengyou, wangxiaoshuo, xuyangjing, chenshuxian, linzhimin, caoling, guogaoyan, xiehaibo, huangyouyang, jinzhibin, huyuqing</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[market_finance]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/market_finance</span><br><span class="line">    valid users = yangqiong, shenwei, chenye, wuailing, pengnan, liangzhixue, chenhong, daimengyou, wangxiaoshuo, xiehaibo, gaofangjie, xuyangjing, chenshuxian, linzhimin, huangyouyang, jinzhibin, huyuqing</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[shenwei]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/develop/shenwei</span><br><span class="line">    valid users = shenwei</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[qijun]</span><br><span class="line">    comment = qj</span><br><span class="line">    path = /data2/sm/homedir/qijun</span><br><span class="line">    valid users = qijun</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line">    guest ok = No</span><br><span class="line"></span><br><span class="line">[wenyong]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/develop/wenyong</span><br><span class="line">    valid users = wenyong</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[wudi]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/develop/wudi</span><br><span class="line">    valid users = wudi</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[caijiannan]</span><br><span class="line">    comment = sheji</span><br><span class="line">    path = /data2/sm/develop/caijiannan</span><br><span class="line">    valid users = caijiannan</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[weiduani2]</span><br><span class="line">    comment = weiduan</span><br><span class="line">    path = /data2/sm/develop/raochao/微端</span><br><span class="line">    valid users = wangfeng</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0775</span></span><br><span class="line"></span><br><span class="line">[raochao]</span><br><span class="line">    comment = raochao</span><br><span class="line">    path = /data2/sm/develop/raochao</span><br><span class="line">    <span class="built_in">read</span> list = wangfeng, xuwei, shenjiamei, chenxianzhe, chenye, wuailing, liuyuting, dainan</span><br><span class="line">    write list = raochao</span><br><span class="line"></span><br><span class="line">[product]</span><br><span class="line">    comment = product</span><br><span class="line">    path = /data2/sm/product</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    create mask = <span class="number">0777</span></span><br><span class="line">    directory mask = <span class="number">0777</span></span><br><span class="line"></span><br><span class="line">[jinbo]</span><br><span class="line">    comment = J<span class="keyword">in</span>Bo</span><br><span class="line">    path = /data2/sm/homedir/jinbo</span><br><span class="line">    valid users = jinbo</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    guest ok = No</span><br><span class="line"></span><br><span class="line">[xiaoqiang]</span><br><span class="line">    comment = xiaoqiang</span><br><span class="line">    path = /data2/sm/homedir/xiaoqiang</span><br><span class="line">    valid users = xiaoqiang</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br><span class="line">    guest ok = No</span><br><span class="line"></span><br><span class="line">[share]</span><br><span class="line">    comment = share</span><br><span class="line">    path = /data2/sm/homedir/share</span><br><span class="line">    valid users = share, market, wal, qijun, zhanghua</span><br><span class="line">    <span class="built_in">read</span> only = No</span><br></pre></td></tr></table></figure>
<h2 id="启动samba"><a href="#启动samba" class="headerlink" title="启动samba"></a>启动samba</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">[shared_name]</span><br><span class="line">    path =                              <span class="comment"># 文件系统路径</span></span><br><span class="line">    browseable = &#123;yes|no&#125;               <span class="comment"># 是否可以被查看到</span></span><br><span class="line">    public = &#123;yes|no&#125;                   <span class="comment"># 是否可被所有人读</span></span><br><span class="line">    guest ok = &#123;yes|no&#125;                 <span class="comment"># 与 public 相同</span></span><br><span class="line">    <span class="built_in">read</span> only = yes                     <span class="comment"># 是否只读</span></span><br><span class="line">    writeable = yes                     <span class="comment"># 是否可写</span></span><br><span class="line">    write list = user1, user2           <span class="comment"># 可写用户列表</span></span><br><span class="line">                @group, +group          <span class="comment"># 可写组列表</span></span><br><span class="line">    valid users =                       <span class="comment"># 白名单</span></span><br><span class="line">    invalid users =                     <span class="comment"># 黑名单</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#检查语法</span></span><br><span class="line">testparm</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启smb服务查看状态</span></span><br><span class="line">service smb restart</span><br><span class="line">smbstatus</span><br></pre></td></tr></table></figure>
<h2 id="Windows客户端访问"><a href="#Windows客户端访问" class="headerlink" title="Windows客户端访问"></a>Windows客户端访问</h2><p>1.Windows上访问samba</p>
<p>在“计算机”中输入：<code>\\xxx.xxx.xxx.xxx\</code></p>
<p>2.Windows断开samba共享连接，实在不行可以选择注销或者重启</p>
<p>在【开始】→【运行】→【CMD】回车中输入：<code>net use * /del /y</code></p>
<p>3.将samba共享的Linux目录映射成Windows的一个驱动器盘符</p>
<p>在【右键计算机】→【映射网络驱动器】→【文件夹\XX.XX.XX.XX\】</p>
]]></content>
    
    <summary type="html">
    
      Unix与Windows文件共享的最佳方式之一
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Multipath 多路径配置实践心得</title>
    <link href="https://wsgzao.github.io/post/multipath/"/>
    <id>https://wsgzao.github.io/post/multipath/</id>
    <published>2017-05-04T06:59:49.000Z</published>
    <updated>2017-05-04T06:43:02.710Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>配置存储时一定会遇到 multipath 多路径的问题，不同的厂商比如 EMC PowerPath，Veritas VxDMP 等都有独立的多路径软件，而多路径软件的功能也很清晰主要用于IO流量负载均衡和故障切换恢复等。在 Linux 环境中 device-mapper-multipath 是一个免费的通用型多路径管理软件，其配置文件也非常简单，主要通过修改 /etc/multipath.conf 来调整。文章提供了《HPE 3PAR Red Hat Enterprise Linux和 Oracle Linux 实施指南》，也分享了自己配置 multipath 的实践过程，希望对大家有参考价值。</p>
<blockquote>
<p>记录 3PAR8400 存储 Multipath 多路径配置</p>
</blockquote>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2017年05月04日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/multipath/" target="_blank" rel="external">https://wsgzao.github.io/post/multipath/</a></p>
<p><strong>扩展阅读</strong></p>
<p>multipath - <a href="https://access.redhat.com/labsinfo/multipathhelper" target="_blank" rel="external">https://access.redhat.com/labsinfo/multipathhelper</a><br>[原]红旗上使用multipath复合多条路径 - <a href="http://www.linuxfly.org/post/513/" target="_blank" rel="external">http://www.linuxfly.org/post/513/</a></p>
<hr>
<h2 id="官方最佳实践手册"><a href="#官方最佳实践手册" class="headerlink" title="官方最佳实践手册"></a>官方最佳实践手册</h2><blockquote>
<p>HPE 3PAR Red Hat Enterprise Linux和 Oracle Linux 实施指南</p>
</blockquote>
<p><iframe src="https://www.slideshare.net/slideshow/embed_code/key/MKQJhstxnv4JFy" width="479" height="511" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> </div></p>
<h2 id="什么是multipath"><a href="#什么是multipath" class="headerlink" title="什么是multipath"></a>什么是multipath</h2><p>普通的电脑主机都是一个硬盘挂接到一个总线上，这里是一对一的关系。而到了有光纤组成的SAN环境，由于主机和存储通过了光纤交换机连接，这样的话，就构成了多对多的关系。也就是说，主机到存储可以有多条路径可以选择。主机到存储之间的IO由多条路径可以选择。</p>
<p>既然，每个主机到所对应的存储可以经过几条不同的路径，如果是同时使用的话，I/O流量如何分配？其中一条路径坏掉了，如何处理？还有在操作系统的角度来看，每条路径，操作系统会认为是一个实际存在的物理盘，但实际上只是通向同一个物理盘的不同路径而已，这样是在使用的时候，就给用户带来了困惑。多路径软件就是为了解决上面的问题应运而生的，多路径的主要功能就是和存储设备一起配合实现如下功能：</p>
<ol>
<li>故障的切换和恢复</li>
<li>IO流量的负载均衡</li>
<li>磁盘的虚拟化</li>
</ol>
<h2 id="为什么使用multipath"><a href="#为什么使用multipath" class="headerlink" title="为什么使用multipath"></a>为什么使用multipath</h2><p>由于多路径软件是需要和存储在一起配合使用的，不同的厂商基于不同的操作系统，都提供了不同的版本。并且有的厂商，软件和硬件也不是一起卖的，如果要使用多路径软件的话，可能还需要向厂商购买license才行。比如EMC公司基于Linux下的多路径软件，就需要单独的购买license。其中，EMC提供的就是PowerPath，HDS提供的就是HDLM，Veritas提供的就是VxDMP。当然，使用系统自带的免费多路径软件包，同时也是一个比较通用的包，可以支持大多数存储厂商的设备，即使是一些不是出名的厂商，通过对配置文件进行稍作修改，也是可以支持并运行的很好。</p>
<p>比较重要的一点还是听从原厂工程师的建议根据实际的业务和存储策略使用合适的多路径软件。</p>
<h2 id="配置multipath"><a href="#配置multipath" class="headerlink" title="配置multipath"></a>配置multipath</h2><blockquote>
<p>原理看了一堆，实际配置还是比较简单的，配置文件只有一个：/etc/multipath.conf</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看主机或者存储交换机上的WWN号，在存储上将LUN映射给需要的主机</span></span><br><span class="line">cat /sys/class/<span class="built_in">fc</span>_host/host*/port_name</span><br><span class="line"><span class="number">0</span>x2002d0431efb7f5d</span><br><span class="line"><span class="number">0</span>x2001d0431efb7f5d</span><br><span class="line"></span><br><span class="line"><span class="comment">#在系统内执行扫盘命令，没有命令先安装sg3_utils</span></span><br><span class="line">yum install sg3_utils</span><br><span class="line">rescan-scsi-bus.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看是否映射到对应的</span></span><br><span class="line">fdisk <span class="operator">-l</span></span><br><span class="line">lsblk</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看是否安装了multipath</span></span><br><span class="line">yum install device-mapper-multipath</span><br><span class="line"></span><br><span class="line">rpm -qa | grep device-mapper</span><br><span class="line">device-mapper-libs-<span class="number">1.02</span>.<span class="number">107</span>-<span class="number">5</span>.el7_2.<span class="number">2</span>.x86_64</span><br><span class="line">device-mapper-persistent-data-<span class="number">0.5</span>.<span class="number">5</span>-<span class="number">1</span>.el7.x86_64</span><br><span class="line">device-mapper-multipath-<span class="number">0.4</span>.<span class="number">9</span>-<span class="number">85</span>.el7_2.<span class="number">4</span>.x86_64</span><br><span class="line">device-mapper-<span class="number">1.02</span>.<span class="number">107</span>-<span class="number">5</span>.el7_2.<span class="number">2</span>.x86_64</span><br><span class="line">device-mapper-event-libs-<span class="number">1.02</span>.<span class="number">107</span>-<span class="number">5</span>.el7_2.<span class="number">2</span>.x86_64</span><br><span class="line">device-mapper-event-<span class="number">1.02</span>.<span class="number">107</span>-<span class="number">5</span>.el7_2.<span class="number">2</span>.x86_64</span><br><span class="line">device-mapper-multipath-libs-<span class="number">0.4</span>.<span class="number">9</span>-<span class="number">85</span>.el7_2.<span class="number">4</span>.x86_64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#拷贝默认的multipath.conf到/etc目录下，也可以使用mpathconf命令创建默认模板</span></span><br><span class="line">cp /usr/share/doc/device-mapper-multipath-<span class="number">0.4</span>.<span class="number">9</span>/multipath.conf /etc/multipath.conf</span><br><span class="line">mpathconf --enable --with_multipathd y</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看本地存储wwid</span></span><br><span class="line">/lib/udev/scsi_id --whitelisted --device=/dev/sda</span><br><span class="line"><span class="number">36141877030</span>bcca001d9c4d52106b9d90</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看存储参数</span></span><br><span class="line">cat /sys/block/sdb/device/vendor </span><br><span class="line"><span class="number">3</span>PARdata</span><br><span class="line">cat /sys/block/sdb/device/model</span><br><span class="line">VV</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加本地盘到blacklist内,不同的存储和系统参考官方的最佳实践</span></span><br><span class="line">vim /etc/multipath.conf</span><br><span class="line"></span><br><span class="line">defaults &#123;</span><br><span class="line">polling_interval <span class="number">10</span></span><br><span class="line">user_friendly_names no</span><br><span class="line">find_multipaths yes</span><br><span class="line">&#125;</span><br><span class="line">blacklist &#123;</span><br><span class="line">wwid <span class="string">"&lt;wwid_of_the_local_disk&gt;"</span></span><br><span class="line">&#125;</span><br><span class="line">devices &#123;</span><br><span class="line">device &#123;</span><br><span class="line">vendor <span class="string">"3PARdata"</span></span><br><span class="line">product <span class="string">"VV"</span></span><br><span class="line">path_grouping_policy group_by_prio</span><br><span class="line">path_selector <span class="string">"round-robin 0"</span></span><br><span class="line">path_checker tur</span><br><span class="line">features <span class="string">"0"</span></span><br><span class="line">hardware_handler <span class="string">"1 alua"</span></span><br><span class="line">prio alua</span><br><span class="line">failback immediate</span><br><span class="line">rr_weight uniform</span><br><span class="line">no_path_retry <span class="number">18</span></span><br><span class="line">rr_min_io_rq <span class="number">1</span></span><br><span class="line">detect_prio yes</span><br><span class="line"><span class="comment"># fast_io_fail_tmo 10</span></span><br><span class="line"><span class="comment"># dev_loss_tmo 14</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#固定设备的别名</span></span><br><span class="line">cat /etc/multipath/bindings </span><br><span class="line"><span class="comment"># Multipath bindings, Version : 1.0</span></span><br><span class="line"><span class="comment"># NOTE: this file is automatically maintained by the multipath program.</span></span><br><span class="line"><span class="comment"># You should not need to edit this file in normal circumstances.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Format:</span></span><br><span class="line"><span class="comment"># alias wwid</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">mpatha <span class="number">360002</span>ac000000000000000260001a945</span><br><span class="line">mpathb <span class="number">360002</span>ac000000000000000270001a945</span><br><span class="line">mpathc <span class="number">360002</span>ac000000000000000280001a945</span><br><span class="line">mpathd <span class="number">360002</span>ac000000000000000290001a945</span><br><span class="line">mpathe <span class="number">360002</span>ac0000000000000002a0001a945</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑multipath.conf，增加以下字段</span></span><br><span class="line">vim /etc/multipath.conf</span><br><span class="line"></span><br><span class="line">multipaths &#123;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000260001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN26</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000270001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN27</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000280001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN28</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000290001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN29</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000002a0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN30</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#清空已有的multipath记录</span></span><br><span class="line">multipath -F</span><br><span class="line"><span class="comment">#打印诊断信息</span></span><br><span class="line">multipath -v3</span><br><span class="line"><span class="comment">#启用多路径守护程序以在引导时启动</span></span><br><span class="line">mpathconf --enable</span><br><span class="line"><span class="comment">#启动多路径服务</span></span><br><span class="line">service multipathd start</span><br><span class="line"><span class="comment">#如果在启动 multipath 守护程序后更改多路径配置文件，请运行以下命令以使更改生效。</span></span><br><span class="line">service multipathd reload </span><br><span class="line"><span class="comment">#重启系统测试</span></span><br><span class="line">init <span class="number">6</span></span><br><span class="line"><span class="comment">#查看多路径当前状态</span></span><br><span class="line">multipath -ll</span><br><span class="line"></span><br><span class="line"><span class="comment">#Enable extended logging on the qla2xxx driver</span></span><br><span class="line">chmod u+x /sys/module/qla2xxx/parameters/ql2xextended_error_logging</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1"</span> &gt; /sys/module/qla2xxx/parameters/ql2xextended_error_logging</span><br><span class="line">cat /sys/module/qla2xxx/parameters/ql2xextended_error_logging</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启lvm服务是识别共享存储vg信息</span></span><br><span class="line">systemctl restart lvm2-lvmetad.service</span><br><span class="line">pvs</span><br><span class="line"></span><br><span class="line"><span class="comment">#屏蔽WARNING: duplicate提示信息</span></span><br><span class="line">vim /etc/lvm/lvm.conf</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Configuration option devices/filter.</span></span><br><span class="line">	<span class="comment"># Limit the block devices that are used by LVM commands.</span></span><br><span class="line">	<span class="comment"># This is a list of regular expressions used to accept or reject block</span></span><br><span class="line">	<span class="comment"># device path names. Each regex is delimited by a vertical bar '|'</span></span><br><span class="line">	<span class="comment"># (or any character) and is preceded by 'a' to accept the path, or</span></span><br><span class="line">	<span class="comment"># by 'r' to reject the path. The first regex in the list to match the</span></span><br><span class="line">	<span class="comment"># path is used, producing the 'a' or 'r' result for the device.</span></span><br><span class="line">	<span class="comment"># When multiple path names exist for a block device, if any path name</span></span><br><span class="line">	<span class="comment"># matches an 'a' pattern before an 'r' pattern, then the device is</span></span><br><span class="line">	<span class="comment"># accepted. If all the path names match an 'r' pattern first, then the</span></span><br><span class="line">	<span class="comment"># device is rejected. Unmatching path names do not affect the accept</span></span><br><span class="line">	<span class="comment"># or reject decision. If no path names for a device match a pattern,</span></span><br><span class="line">	<span class="comment"># then the device is accepted. Be careful mixing 'a' and 'r' patterns,</span></span><br><span class="line">	<span class="comment"># as the combination might produce unexpected results (test changes.)</span></span><br><span class="line">	<span class="comment"># Run vgscan after changing the filter to regenerate the cache.</span></span><br><span class="line">	<span class="comment"># See the use_lvmetad comment for a special case regarding filters.</span></span><br><span class="line">	<span class="comment"># </span></span><br><span class="line">	<span class="comment"># Example</span></span><br><span class="line">	<span class="comment"># Accept every block device:</span></span><br><span class="line">	<span class="comment"># filter = [ "a|.*/|" ]</span></span><br><span class="line">	<span class="comment"># Reject the cdrom drive:</span></span><br><span class="line">	<span class="comment"># filter = [ "r|/dev/cdrom|" ]</span></span><br><span class="line">	<span class="comment"># Work with just loopback devices, e.g. for testing:</span></span><br><span class="line">	<span class="comment"># filter = [ "a|loop|", "r|.*|" ]</span></span><br><span class="line">	<span class="comment"># Accept all loop devices and ide drives except hdc:</span></span><br><span class="line">	<span class="comment"># filter = [ "a|loop|", "r|/dev/hdc|", "a|/dev/ide|", "r|.*|" ]</span></span><br><span class="line">	<span class="comment"># Use anchors to be very specific:</span></span><br><span class="line">	<span class="comment"># filter = [ "a|^/dev/hda8$|", "r|.*/|" ]</span></span><br><span class="line">	<span class="comment"># </span></span><br><span class="line">	<span class="comment"># This configuration option has an automatic default value.</span></span><br><span class="line">	<span class="comment"># filter = [ "a|.*/|" ]</span></span><br><span class="line">	filter = [<span class="string">"a/sda/"</span>,<span class="string">"a/mapper/3PAR8400_DEV_LUN26p1/"</span>,<span class="string">"r/.*/"</span>]</span><br><span class="line"><span class="comment">#filter = ["a/sda/","r/.*/"]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># Configuration option devices/global_filter.</span></span><br><span class="line">	<span class="comment"># Limit the block devices that are used by LVM system components.</span></span><br><span class="line">	<span class="comment"># Because devices/filter may be overridden from the command line, it is</span></span><br><span class="line">	<span class="comment"># not suitable for system-wide device filtering, e.g. udev and lvmetad.</span></span><br><span class="line">	<span class="comment"># Use global_filter to hide devices from these LVM system components.</span></span><br><span class="line">	<span class="comment"># The syntax is the same as devices/filter. Devices rejected by</span></span><br><span class="line">	<span class="comment"># global_filter are not opened by LVM.</span></span><br><span class="line">	<span class="comment"># This configuration option has an automatic default value.</span></span><br><span class="line">	<span class="comment"># global_filter = [ "a|.*/|" ]</span></span><br><span class="line">	global_filter = [<span class="string">"a/sda/"</span>,<span class="string">"a/mapper/3PAR8400_DEV_LUN26p1/"</span>,<span class="string">"r/.*/"</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#一个简单的multipath.conf配置文件</span></span><br><span class="line">[root@controller01 ~]<span class="comment"># cat /etc/multipath.conf</span></span><br><span class="line"><span class="comment"># This is a basic configuration file with some examples, for device mapper</span></span><br><span class="line"><span class="comment"># multipath.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For a complete list of the default configuration values, run either</span></span><br><span class="line"><span class="comment"># multipath -t</span></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"><span class="comment"># multipathd show config</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For a list of configuration options with descriptions, see the multipath.conf</span></span><br><span class="line"><span class="comment"># man page</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## By default, devices with vendor = "IBM" and product = "S/390.*" are</span></span><br><span class="line"><span class="comment">## blacklisted. To enable mulitpathing on these devies, uncomment the</span></span><br><span class="line"><span class="comment">## following lines.</span></span><br><span class="line"><span class="comment">#blacklist_exceptions &#123;</span></span><br><span class="line"><span class="comment">#	device &#123;</span></span><br><span class="line"><span class="comment">#		vendor	"IBM"</span></span><br><span class="line"><span class="comment">#		product	"S/390.*"</span></span><br><span class="line"><span class="comment">#	&#125;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Use user friendly names, instead of using WWIDs as names.</span></span><br><span class="line">defaults &#123;</span><br><span class="line">	user_friendly_names yes</span><br><span class="line">	find_multipaths yes</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Here is an example of how to configure some standard options.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#defaults &#123;</span></span><br><span class="line"><span class="comment">#	polling_interval 	10</span></span><br><span class="line"><span class="comment">#	path_selector		"round-robin 0"</span></span><br><span class="line"><span class="comment">#	path_grouping_policy	multibus</span></span><br><span class="line"><span class="comment">#	uid_attribute		ID_SERIAL</span></span><br><span class="line"><span class="comment">#	prio			alua</span></span><br><span class="line"><span class="comment">#	path_checker		readsector0</span></span><br><span class="line"><span class="comment">#	rr_min_io		100</span></span><br><span class="line"><span class="comment">#	max_fds			8192</span></span><br><span class="line"><span class="comment">#	rr_weight		priorities</span></span><br><span class="line"><span class="comment">#	failback		immediate</span></span><br><span class="line"><span class="comment">#	no_path_retry		fail</span></span><br><span class="line"><span class="comment">#	user_friendly_names	yes</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## The wwid line in the following blacklist section is shown as an example</span></span><br><span class="line"><span class="comment">## of how to blacklist devices by wwid.  The 2 devnode lines are the</span></span><br><span class="line"><span class="comment">## compiled in default blacklist. If you want to blacklist entire types</span></span><br><span class="line"><span class="comment">## of devices, such as all scsi devices, you should use a devnode line.</span></span><br><span class="line"><span class="comment">## However, if you want to blacklist specific devices, you should use</span></span><br><span class="line"><span class="comment">## a wwid line.  Since there is no guarantee that a specific device will</span></span><br><span class="line"><span class="comment">## not change names on reboot (from /dev/sda to /dev/sdb for example)</span></span><br><span class="line"><span class="comment">## devnode lines are not recommended for blacklisting specific devices.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">#blacklist &#123;</span></span><br><span class="line"><span class="comment">#       wwid 26353900f02796769</span></span><br><span class="line"><span class="comment">#	devnode "^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*"</span></span><br><span class="line"><span class="comment">#	devnode "^hd[a-z]"</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"><span class="comment">#multipaths &#123;</span></span><br><span class="line"><span class="comment">#	multipath &#123;</span></span><br><span class="line"><span class="comment">#		wwid			3600508b4000156d700012000000b0000</span></span><br><span class="line"><span class="comment">#		alias			yellow</span></span><br><span class="line"><span class="comment">#		path_grouping_policy	multibus</span></span><br><span class="line"><span class="comment">#		path_selector		"round-robin 0"</span></span><br><span class="line"><span class="comment">#		failback		manual</span></span><br><span class="line"><span class="comment">#		rr_weight		priorities</span></span><br><span class="line"><span class="comment">#		no_path_retry		5</span></span><br><span class="line"><span class="comment">#	&#125;</span></span><br><span class="line"><span class="comment">#	multipath &#123;</span></span><br><span class="line"><span class="comment">#		wwid			1DEC_____321816758474</span></span><br><span class="line"><span class="comment">#		alias			red</span></span><br><span class="line"><span class="comment">#	&#125;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"><span class="comment">#devices &#123;</span></span><br><span class="line"><span class="comment">#	device &#123;</span></span><br><span class="line"><span class="comment">#		vendor			"COMPAQ  "</span></span><br><span class="line"><span class="comment">#		product			"HSV110 (C)COMPAQ"</span></span><br><span class="line"><span class="comment">#		path_grouping_policy	multibus</span></span><br><span class="line"><span class="comment">#		path_checker		readsector0</span></span><br><span class="line"><span class="comment">#		path_selector		"round-robin 0"</span></span><br><span class="line"><span class="comment">#		hardware_handler	"0"</span></span><br><span class="line"><span class="comment">#		failback		15</span></span><br><span class="line"><span class="comment">#		rr_weight		priorities</span></span><br><span class="line"><span class="comment">#		no_path_retry		queue</span></span><br><span class="line"><span class="comment">#	&#125;</span></span><br><span class="line"><span class="comment">#	device &#123;</span></span><br><span class="line"><span class="comment">#		vendor			"COMPAQ  "</span></span><br><span class="line"><span class="comment">#		product			"MSA1000         "</span></span><br><span class="line"><span class="comment">#		path_grouping_policy	multibus</span></span><br><span class="line"><span class="comment">#	&#125;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line">multipaths &#123;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000260001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN26</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000270001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN27</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000280001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN28</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000290001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN29</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000002a0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN30</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000002b0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN31</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000002c0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN32</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000002d0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN33</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000002e0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN34</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000002f0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN35</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000320001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN36</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000330001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN37</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000340001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN38</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000350001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN39</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000360001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN40</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000370001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN41</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000380001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN42</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000390001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN43</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000003a0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN44</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000003b0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN45</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000003d0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN46</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000003e0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN47</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac0000000000000003f0001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN48</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000400001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN49</span><br><span class="line">  &#125;</span><br><span class="line">  multipath &#123;</span><br><span class="line">  wwid <span class="number">360002</span>ac000000000000000410001a945</span><br><span class="line">  <span class="built_in">alias</span> <span class="number">3</span>PAR8400_DEV_LUN50</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      记录 3PAR8400 存储 Multipath 多路径配置
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Veritas NetBackup 官方培训笔记</title>
    <link href="https://wsgzao.github.io/post/nbu/"/>
    <id>https://wsgzao.github.io/post/nbu/</id>
    <published>2017-04-28T07:22:32.000Z</published>
    <updated>2017-06-20T01:44:22.041Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Veritas NetBackup 简称 NBU 是一款商业化的备份和恢复软件，在金融行业占据了90%以上的市场份额，除了软件产品以外也开始推自家的备份一体机。关于产品方面的介绍交给NBU的售前就行了，行业内负责备份恢复的朋友基本也都清楚我就不再赘述了。文章重点记录了NBU培训时的原理和三层架构，比较核心的内容当然是Policy部分，上述内容都在PPT里有详细的介绍，此外还增加了简单的动手实践环节方便大家在自己的虚拟机中练习和理解。</p>
<blockquote>
<p>记录 Veritas NetBackup 培训心得</p>
</blockquote>
<hr>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2017年04月28日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/nbu/" target="_blank" rel="external">https://wsgzao.github.io/post/nbu/</a></p>
<p>扩展阅读</p>
<ul>
<li>Veritas - <a href="https://www.veritas.com/zh/cn/product/backup-and-recovery/" target="_blank" rel="external">https://www.veritas.com/zh/cn/product/backup-and-recovery/</a></li>
</ul>
<hr>
<h2 id="Veritas-Netbackup-Training"><a href="#Veritas-Netbackup-Training" class="headerlink" title="Veritas Netbackup Training"></a>Veritas Netbackup Training</h2><p><iframe src="https://www.slideshare.net/slideshow/embed_code/key/8I31k1tR1YLYds" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"></div></p>
<h2 id="NetBackup-Downloads"><a href="#NetBackup-Downloads" class="headerlink" title="NetBackup Downloads"></a>NetBackup Downloads</h2><blockquote>
<p>最新版为 NBU 8.0，生产环境推荐使用 NBU 7.7.3</p>
</blockquote>
<p>Article URL:<a href="http://www.veritas.com/docs/000036173" target="_blank" rel="external">http://www.veritas.com/docs/000036173</a></p>
<p>NetBackup 8.0</p>
<p>To obtain NetBackup 8.0 installation media:<br> <a href="http://www.veritas.com/docs/000115679" target="_blank" rel="external">http://www.veritas.com/docs/000115679</a></p>
<p>NetBackup 7.7.3</p>
<p>To obtain NetBackup 7.7.3 installation media:<br> <a href="http://www.veritas.com/docs/000108154" target="_blank" rel="external">http://www.veritas.com/docs/000108154</a></p>
<blockquote>
<p>以下为实验环境使用测试License，切勿用于生产，申请请通过官方渠道</p>
</blockquote>
<h2 id="NBU部署"><a href="#NBU部署" class="headerlink" title="NBU部署"></a>NBU部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br></pre></td><td class="code"><pre><span class="line">[root@rhel6-<span class="number">01</span> ~]<span class="comment"># tar xf NetBackup_7.7.3_LinuxR_x86_64.tar.gz</span></span><br><span class="line">[root@rhel6-<span class="number">01</span> ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  Documents  install.log         Music                          NetBackup_7.<span class="number">7.3</span>_LinuxR_x86_64.tar.gz  Public     Videos</span><br><span class="line">Desktop          Downloads  install.log.syslog  NetBackup_7.<span class="number">7.3</span>_LinuxR_x86_64  Pictures                              Templates</span><br><span class="line">[root@rhel6-<span class="number">01</span> ~]<span class="comment"># cd NetBackup_7.7.3_LinuxR_x86_64</span></span><br><span class="line">[root@rhel6-<span class="number">01</span> NetBackup_7.<span class="number">7.3</span>_LinuxR_x86_64]<span class="comment"># ls</span></span><br><span class="line">Doc  install  LICENSE  linuxR_x86</span><br><span class="line">[root@rhel6-<span class="number">01</span> NetBackup_7.<span class="number">7.3</span>_LinuxR_x86_64]<span class="comment"># ./install</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Symantec Installation Script</span><br><span class="line">Copyright <span class="number">1993</span> - <span class="number">2016</span> Symantec Corporation, All Rights Reserved.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	Installing NetBackup Server Software</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please review the SYMANTEC SOFTWARE LICENSE AGREEMENT located on</span><br><span class="line">the installation media before proceeding.  The agreement includes</span><br><span class="line">details on the NetBackup Product Improvement Program.</span><br><span class="line"></span><br><span class="line">For NetBackup installation and upgrade information specific to your</span><br><span class="line">platform and to find out <span class="keyword">if</span> your installed EEBs or hot fixes are</span><br><span class="line">contained <span class="keyword">in</span> this release, check out the Symantec Operations Readiness</span><br><span class="line">Tools (SORT) Installation and Upgrade Checklist and Hot fix and EEB</span><br><span class="line">Release Auditor, respectively, at https://sort.veritas.com/netbackup.</span><br><span class="line"></span><br><span class="line">ATTENTION!  To <span class="built_in">help</span> ensure a successful upgrade to NetBackup <span class="number">7.7</span>.<span class="number">3</span>,</span><br><span class="line">please visit the NetBackup <span class="number">7</span>.x Upgrade Portal:</span><br><span class="line">https://www.veritas.com/support/en_US/article.TECH74584.</span><br><span class="line"></span><br><span class="line">Do you wish to <span class="built_in">continue</span>? [y,n] (y) y</span><br><span class="line">Starting NetBackup Deduplication installer</span><br><span class="line">testing: /tmp/pdde_pkg_dir_27939</span><br><span class="line">NetBackup Deduplication preinstall check passed</span><br><span class="line"></span><br><span class="line">Is this host the master server? [y,n] (y)</span><br><span class="line"></span><br><span class="line">Checking <span class="keyword">for</span> required system conditions...</span><br><span class="line"></span><br><span class="line">ok nbdb_maintenance_space: no NBDB maintenance required on new install: skipping</span><br><span class="line">ok remote_emm: NetBackup is not installed: skipping</span><br><span class="line">ok be_nb_same_host: inapplicable on linux: skipping</span><br><span class="line">ok unsupported_platform: Passed checks <span class="keyword">for</span> unsupported platforms.</span><br><span class="line">ok nbdb_ntfs_dir_symlink: inapplicable on linux: skipping</span><br><span class="line"></span><br><span class="line">Checking <span class="keyword">for</span> recommended system conditions...</span><br><span class="line"></span><br><span class="line">not ok <span class="built_in">ulimit</span>_nofiles: nofiles <span class="built_in">ulimit</span> <span class="number">1024</span> is too low.</span><br><span class="line">  NetBackup Master and Media Server processes may run slower <span class="keyword">if</span> they are</span><br><span class="line">  limited to fewer than <span class="number">8000</span> open file descriptors.  This <span class="built_in">test</span> runs</span><br><span class="line">  <span class="string">'ulimit -n'</span> and checks that the result is at least <span class="number">8000</span> on NetBackup</span><br><span class="line">  servers.  See</span><br><span class="line">    https://www.veritas.com/support/en_US/article.TECH75332</span><br><span class="line">  <span class="keyword">for</span> more information.</span><br><span class="line">ok hotfix_auditor: NetBackup is not installed or there is no hotfix or EEB data present. Skipping HF/EEB Auditor check.</span><br><span class="line">not ok wsl_account: User existence <span class="built_in">command</span> [id nbwebsvc <span class="number">2</span>&gt;&amp;<span class="number">1</span>] returned status <span class="number">256</span>: [].</span><br><span class="line">  A user [nbwebsvc] <span class="keyword">in</span> group [nbwebgrp] does not exist on the Master Server.</span><br><span class="line">  This is needed to <span class="built_in">enable</span> web services, and will be a requirement of Master Server installation</span><br><span class="line">  <span class="keyword">in</span> NetBackup <span class="number">8.0</span> and beyond.  See</span><br><span class="line">        http://www.veritas.com/docs/<span class="number">000081350</span></span><br><span class="line">  <span class="keyword">for</span> more information.</span><br><span class="line">not ok semaphore_limits: too low:</span><br><span class="line">  Performance of NetBackup Master and Media Servers can be affected</span><br><span class="line">  adversely <span class="keyword">if</span> the system is configured with low semaphore limits.  This</span><br><span class="line">  <span class="built_in">test</span> checks whether the current semaphore limits are <span class="built_in">set</span> as</span><br><span class="line">  recommended.  See https://www.veritas.com/support/en_US/article.TECH203066 <span class="keyword">for</span></span><br><span class="line">  details.</span><br><span class="line"></span><br><span class="line">  The current SEMMNI setting is   <span class="number">128</span>; at least  <span class="number">1024</span> is recommended.</span><br><span class="line">  The current SEMMSL setting is   <span class="number">250</span>; at least   <span class="number">300</span> is recommended.</span><br><span class="line">  The current SEMMNS setting is <span class="number">32000</span>; at least <span class="number">307200</span> is recommended.</span><br><span class="line"></span><br><span class="line">WARNING: One or more non-critical preinstall checks have failed.</span><br><span class="line"></span><br><span class="line">The NetBackup and Media Manager software is built <span class="keyword">for</span> use on LINUX_RH_X86 hardware.</span><br><span class="line">Do you want to install NetBackup and Media Manager files? [y,n] (y)</span><br><span class="line"></span><br><span class="line">NetBackup and Media Manager are normally installed <span class="keyword">in</span> /usr/openv.</span><br><span class="line">Is it OK to install <span class="keyword">in</span> /usr/openv? [y,n] (y)</span><br><span class="line"></span><br><span class="line">Saving server binaries <span class="keyword">for</span> LINUX_RH_X86.</span><br><span class="line"></span><br><span class="line">Reading NetBackup files from /root/NetBackup_7.<span class="number">7.3</span>_LinuxR_x86_64/linuxR_x86/anb</span><br><span class="line"></span><br><span class="line">Checking <span class="keyword">for</span> pre-existing SYMCnetbp package.</span><br><span class="line">Installing SYMCnetbp package.</span><br><span class="line">Installation of SYMCnetbp was successful.</span><br><span class="line">More details regarding SYMCnetbp can be found <span class="keyword">in</span> file</span><br><span class="line">/tmp/install_netbppkg_trace.<span class="number">28059</span> on rhel6-<span class="number">01</span>.</span><br><span class="line"></span><br><span class="line">x openv/netbackup/client/Linux/</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/nbj.conf</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/client_config</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/cp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/extract_java</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/version</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/install_client</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/ftp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/sftp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/ssh_to_client</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/nb_init_cfg</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/pdinstall</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/nbcheck</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/nbbsdtar</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/PBX.tar.gz</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/installpbx</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/VRTSpddea.rpm</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/client_bin.tar.gz</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/.sizes_client_bin</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/.sizes</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/NB-Java.tar.gz</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/.sizes_NB-Java</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/JRE.tar.gz</span><br><span class="line">x openv/netbackup/client/Linux/Debian2.<span class="number">6.18</span>/.sizes_JRE</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/nbj.conf</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/client_config</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/cp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/extract_java</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/nb_init_cfg</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/install_client</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/ftp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/sftp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/ssh_to_client</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/VRTSnbpck.rpm</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/pdinstall</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/nbcheck</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/nbbsdtar</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/VRTSnbcfg.rpm</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/VRTSnbclt.rpm</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/version</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/VRTSpddea.rpm</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/VRTSpbx.rpm</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/.sizes</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/VRTSnbjava.rpm</span><br><span class="line">x openv/netbackup/client/Linux/RedHat2.<span class="number">6.18</span>/VRTSnbjre.rpm</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/nbj.conf</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/VRTSnbpck.rpm</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/pdinstall</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/nbcheck</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/nbbsdtar</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/client_config</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/cp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/extract_java</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/nb_init_cfg</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/install_client</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/ftp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/sftp_to_client</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/ssh_to_client</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/VRTSnbcfg.rpm</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/VRTSnbclt.rpm</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/VRTSpddea.rpm</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/version</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/VRTSpbx.rpm</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/.sizes</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/VRTSnbjava.rpm</span><br><span class="line">x openv/netbackup/client/Linux/SuSE3.<span class="number">0.76</span>/VRTSnbjre.rpm</span><br><span class="line"></span><br><span class="line">Copying RedHat2.<span class="number">6.18</span> Client Binaries</span><br><span class="line">Installing VRTSnbpck ...</span><br><span class="line">Installing VRTSpbx ...</span><br><span class="line">Installing VRTSnbclt ...</span><br><span class="line"></span><br><span class="line">Terminating NetBackup and/or Media Manager processes.</span><br><span class="line"></span><br><span class="line">Installing NB-Java.</span><br><span class="line">Installing VRTSnbjre ...</span><br><span class="line"></span><br><span class="line">Installing VRTSnbjava ...</span><br><span class="line"></span><br><span class="line">+ /bin/cp ./nbj.conf /usr/openv/java</span><br><span class="line"></span><br><span class="line">Migrating <span class="built_in">log</span> files <span class="keyword">in</span> /usr/openv/logs</span><br><span class="line">Migration of <span class="built_in">log</span> files complete.</span><br><span class="line"></span><br><span class="line">No [x]inetd process found.</span><br><span class="line">Installing VRTSpddea.rpm ...</span><br><span class="line">Starting NetBackup Deduplication installer</span><br><span class="line">testing: /tmp/pdde_pkg_dir_29478</span><br><span class="line">Checking <span class="keyword">for</span> SYMCpddea package...</span><br><span class="line">Checking <span class="keyword">for</span> VRTSpddea package...</span><br><span class="line">   Package VRTSpddea found.</span><br><span class="line"></span><br><span class="line">NetBackup Deduplication software is installed.</span><br><span class="line"></span><br><span class="line">NetBackup Deduplication is not yet configured.</span><br><span class="line">Checking <span class="keyword">for</span> SYMCpddes package...</span><br><span class="line">Checking <span class="keyword">for</span> SYMCpddea package...</span><br><span class="line">Installing NetBackup Deduplication server package (/usr/openv/pddeserver.tar.gz)...</span><br><span class="line">Extracting package SYMCpddes <span class="keyword">in</span> /tmp/pdde_pkg_dir_29478.</span><br><span class="line">   Package SYMCpddes extracted to /tmp/pdde_pkg_dir_29478.</span><br><span class="line">Installing package SYMCpddes.</span><br><span class="line">   Package SYMCpddes installed.</span><br><span class="line">Running NetBackup Deduplication upgrade script (server mode)...</span><br><span class="line">NetBackup Deduplication install finished successfully.</span><br><span class="line">Version now installed: <span class="number">9.0300</span>.<span class="number">0016.0512</span></span><br><span class="line">Full NetBackup Deduplication installation <span class="built_in">log</span> saved to: /var/<span class="built_in">log</span>/puredisk/<span class="number">2017</span>-<span class="number">04</span>-<span class="number">19</span>_14:<span class="number">27</span>-pdde-install.log</span><br><span class="line"></span><br><span class="line">Installing VRTSnbcfg.rpm ...</span><br><span class="line"></span><br><span class="line">Done executing NB.inst.</span><br><span class="line"></span><br><span class="line">If you ran NB.inst instead of &lt;cdrom_path&gt;/install, you must</span><br><span class="line">run /usr/openv/netbackup/bin/install_bp to initiate NetBackup.</span><br><span class="line">Running /usr/openv/netbackup/bin/install_bp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A NetBackup Server or Enterprise Server license key is needed</span><br><span class="line"><span class="keyword">for</span> installation to continue.</span><br><span class="line"></span><br><span class="line">Enter license key: KJNW-P39N-WK8O-HZUW-<span class="number">6</span>CPC-IR4K-SOYK-Y7FF-YUPP-P</span><br><span class="line">Evaluation NetBackup Enterprise Server with May <span class="number">19</span>, <span class="number">2017</span> expiration date will be registered.</span><br><span class="line">Is this OK? [y,n] (y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">KJNW-P39N-WK8O-HZUW-<span class="number">6</span>CPC-IR4K-SOYK-Y7FF-YUPP-P:</span><br><span class="line">	Evaluation NetBackup Enterprise Server Base product with the following features enabled:</span><br><span class="line">            Replication Director</span><br><span class="line">            Accelerator</span><br><span class="line">            PureDisk Remote Office</span><br><span class="line">            PureDisk Option</span><br><span class="line">            SAN Client</span><br><span class="line">            PureDisk MS Exchange Agent</span><br><span class="line">            Enterprise Vault Agent</span><br><span class="line">            PureDisk MS SQL Server Agent</span><br><span class="line">            Flexible Disk Option</span><br><span class="line">            OpenStorage Disk Option</span><br><span class="line">            Virtual Tape Option</span><br><span class="line">            Bare Metal Restore</span><br><span class="line">            Encryption</span><br><span class="line">            Open File Backup</span><br><span class="line">            Remote Client Support</span><br><span class="line">            Robotic Library Sharing Support</span><br><span class="line">            Remote Media Server Support</span><br><span class="line">            Microsoft RSM Robotic Libraries</span><br><span class="line">            ADIC DAS/SDLC Robotic Libraries</span><br><span class="line">            IBM ATL Robotic Libraries</span><br><span class="line">            Fujitsu LMF Robotic Libraries</span><br><span class="line">            StorageTek ACS Robotic Libraries</span><br><span class="line">            Snapshot Client</span><br><span class="line">            MS SharePoint Agent</span><br><span class="line">            Inline Tape Copy</span><br><span class="line">            Vault</span><br><span class="line">            Library Based Tape Drives</span><br><span class="line">            DataStore</span><br><span class="line">            Encryption (Legacy DES <span class="number">56</span>-bit)</span><br><span class="line">            Encryption (Legacy DES <span class="number">40</span>-bit)</span><br><span class="line">            SAP extension</span><br><span class="line">            Sybase extension</span><br><span class="line">            Informix extension</span><br><span class="line">            Oracle extension</span><br><span class="line">            Lotus Notes extension</span><br><span class="line">            DB2 extension</span><br><span class="line">            MS SQL Server extension</span><br><span class="line">            MS Exchange extension</span><br><span class="line">            Shared Storage Option</span><br><span class="line">            NDMP</span><br><span class="line">            Additional clients</span><br><span class="line">	has been registered.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">All additional keys should be added at this time.</span><br><span class="line">Do you want to add additional license keys now? [y,n] (y) n</span><br><span class="line"></span><br><span class="line">Use /usr/openv/netbackup/bin/admincmd/get_license_key</span><br><span class="line">to add, delete or list license keys at a later time.</span><br><span class="line"></span><br><span class="line">Installing NetBackup Enterprise Server version: <span class="number">7.7</span>.<span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">If this machine will be using a different network interface than the</span><br><span class="line">default (rhel6-<span class="number">01</span>), the name of the preferred interface should be used</span><br><span class="line">as the configured server name.  If this machine will be part of a</span><br><span class="line">cluster, the virtual name should be used as the configured server name.</span><br><span class="line"></span><br><span class="line">Would you like to use <span class="string">"rhel6-01"</span> as the configured</span><br><span class="line">NetBackup server name of this machine? [y,n] (y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Media servers can be added during this installation or</span><br><span class="line">to a NetBackup environment after installation completes.</span><br><span class="line">Refer to the NetBackup Administrator<span class="string">'s Guide, Volume I for</span><br><span class="line">more information.</span><br><span class="line"></span><br><span class="line">Do you want to add any media servers now? [y,n] (n)</span><br><span class="line"></span><br><span class="line">Checking network connections.</span><br><span class="line">bp.conf: IP_ADDRESS_FAMILY = AF_INET: default value, no update needed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Machine rhel6-01 is a master server, and it is the EMMSERVER.</span><br><span class="line">Converting STREAMS files.  This may take a few minutes.</span><br><span class="line"></span><br><span class="line">STREAMS files conversion is complete.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Successfully updated the session cache parameters.</span><br><span class="line"></span><br><span class="line">Done processing parameter files, no files found to convert</span><br><span class="line"></span><br><span class="line">Starting the NetBackup Authentication daemon.</span><br><span class="line">Starting the NetBackup network daemon.</span><br><span class="line">Starting the NetBackup client daemon.</span><br><span class="line">Starting the NetBackup SAN Client Fibre Transport daemon.</span><br><span class="line">Starting the NetBackup Discovery Framework.</span><br><span class="line"></span><br><span class="line">Configuring nbatd.</span><br><span class="line">Gathering configuration information.</span><br><span class="line">Waiting for the security services to start operation.</span><br><span class="line">Generating identity for host '</span>rhel6-<span class="number">01</span><span class="string">'</span><br><span class="line">Setting up security on target host: rhel6-01</span><br><span class="line">nbatd is successfully configured on NetBackup Master Server.</span><br><span class="line">Operation completed successfully.</span><br><span class="line">Creating /usr/openv/tmp/sqlany</span><br><span class="line"></span><br><span class="line">Installed SQL Anywhere Version 16.0.0.2184</span><br><span class="line">Installation completed successfully</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x openv/wmc/</span><br><span class="line">x openv/wmc/war/</span><br><span class="line">x openv/wmc/war/nbwebservice.war</span><br><span class="line">x openv/wmc/config/</span><br><span class="line">x openv/wmc/config/index.html</span><br><span class="line">x openv/wmc/config/log4j.properties</span><br><span class="line">x openv/wmc/config/tomcat.logging.properties</span><br><span class="line">x openv/wmc/lib/</span><br><span class="line">x openv/wmc/lib/goodies.jar</span><br><span class="line">x openv/wmc/bin/</span><br><span class="line">x openv/wmc/bin/install/</span><br><span class="line">x openv/wmc/bin/install/configurePorts</span><br><span class="line">x openv/wmc/bin/install/configureWmc</span><br><span class="line">x openv/wmc/bin/install/configureWsDefaults</span><br><span class="line">x openv/wmc/bin/install/createSslStore</span><br><span class="line">x openv/wmc/bin/install/manageClientCerts</span><br><span class="line">x openv/wmc/bin/install/setupWmc</span><br><span class="line">x openv/wmc/bin/install/configureCerts</span><br><span class="line">x openv/wmc/bin/install/configureEnv</span><br><span class="line">x openv/wmc/webserver/</span><br><span class="line">x openv/wmc/webserver/LICENSE</span><br><span class="line">x openv/wmc/webserver/NOTICE</span><br><span class="line">x openv/wmc/webserver/RELEASE-NOTES</span><br><span class="line">x openv/wmc/webserver/RUNNING.txt</span><br><span class="line">x openv/wmc/webserver/bin/</span><br><span class="line">x openv/wmc/webserver/bin/bootstrap.jar</span><br><span class="line">x openv/wmc/webserver/bin/catalina-tasks.xml</span><br><span class="line">x openv/wmc/webserver/bin/catalina.sh</span><br><span class="line">x openv/wmc/webserver/bin/commons-daemon-native.tar.gz</span><br><span class="line">x openv/wmc/webserver/bin/commons-daemon.jar</span><br><span class="line">x openv/wmc/webserver/bin/configtest.sh</span><br><span class="line">x openv/wmc/webserver/bin/daemon.sh</span><br><span class="line">x openv/wmc/webserver/bin/digest.sh</span><br><span class="line">x openv/wmc/webserver/bin/setclasspath.sh</span><br><span class="line">x openv/wmc/webserver/bin/shutdown.sh</span><br><span class="line">x openv/wmc/webserver/bin/startup.sh</span><br><span class="line">x openv/wmc/webserver/bin/tomcat-juli.jar</span><br><span class="line">x openv/wmc/webserver/bin/tomcat-native.tar.gz</span><br><span class="line">x openv/wmc/webserver/bin/tool-wrapper.sh</span><br><span class="line">x openv/wmc/webserver/bin/version.sh</span><br><span class="line">x openv/wmc/webserver/conf/</span><br><span class="line">x openv/wmc/webserver/conf/catalina.policy</span><br><span class="line">x openv/wmc/webserver/conf/catalina.properties</span><br><span class="line">x openv/wmc/webserver/conf/context.xml.template</span><br><span class="line">x openv/wmc/webserver/conf/server.xml.template</span><br><span class="line">x openv/wmc/webserver/conf/tomcat-users.xml</span><br><span class="line">x openv/wmc/webserver/conf/tomcat-users.xsd</span><br><span class="line">x openv/wmc/webserver/conf/web.xml.template</span><br><span class="line">x openv/wmc/webserver/lib/</span><br><span class="line">x openv/wmc/webserver/lib/annotations-api.jar</span><br><span class="line">x openv/wmc/webserver/lib/catalina-ant.jar</span><br><span class="line">x openv/wmc/webserver/lib/catalina-ha.jar</span><br><span class="line">x openv/wmc/webserver/lib/catalina-storeconfig.jar</span><br><span class="line">x openv/wmc/webserver/lib/catalina-tribes.jar</span><br><span class="line">x openv/wmc/webserver/lib/catalina.jar</span><br><span class="line">x openv/wmc/webserver/lib/ecj-4.4.2.jar</span><br><span class="line">x openv/wmc/webserver/lib/el-api.jar</span><br><span class="line">x openv/wmc/webserver/lib/jasper-el.jar</span><br><span class="line">x openv/wmc/webserver/lib/jasper.jar</span><br><span class="line">x openv/wmc/webserver/lib/jsp-api.jar</span><br><span class="line">x openv/wmc/webserver/lib/servlet-api.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-api.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-coyote.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-dbcp.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-i18n-es.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-i18n-fr.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-i18n-ja.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-jdbc.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-jni.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-util-scan.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-util.jar</span><br><span class="line">x openv/wmc/webserver/lib/tomcat-websocket.jar</span><br><span class="line">x openv/wmc/webserver/lib/websocket-api.jar</span><br><span class="line">x openv/wmc/webserver/temp/</span><br><span class="line">x openv/wmc/webserver/temp/safeToDelete.tmp</span><br><span class="line">x openv/wmc/webserver/webapps/</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/RELEASE-NOTES.txt</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/WEB-INF/</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/WEB-INF/web.xml</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/asf-logo-wide.gif</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/asf-logo.png</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/bg-button.png</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/bg-middle.png</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/bg-nav-item.png</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/bg-nav.png</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/bg-upper.png</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/build.xml</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/favicon.ico</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/index.jsp</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/tomcat-power.gif</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/tomcat.css</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/tomcat.gif</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/tomcat.png</span><br><span class="line">x openv/wmc/webserver/webapps/ROOT/tomcat.svg</span><br><span class="line"></span><br><span class="line">Creating WSL server certificate ...</span><br><span class="line">set_value: Key "AZDBPasswordFilePath" successfully updated</span><br><span class="line">AZ database setup complete.</span><br><span class="line"></span><br><span class="line">Database server is NB_rhel6-01</span><br><span class="line">Creating the NetBackup database.</span><br><span class="line">Creating NetBackup staging directory in: /usr/openv/db/staging</span><br><span class="line">Starting the NetBackup database.</span><br><span class="line">Authenticating the NetBackup database.</span><br><span class="line">VXDBMS_NB_DATA entry in bp.conf updated successfully.</span><br><span class="line">Setting of database authentication for NBDB successful.</span><br><span class="line">Change of dba password for NBDB successful.</span><br><span class="line">Creating the NetBackup database files.</span><br><span class="line">The NetBackup database files creation complete.</span><br><span class="line">Creating the NetBackup database schema.</span><br><span class="line">Verifying the running version of NBDB ...</span><br><span class="line">NBDB version 7.7.3.0 verified.</span><br><span class="line">Upgrading NBDB (7.7.3.0) to (7.7.3.0) ...</span><br><span class="line">NBDB version remains the same.</span><br><span class="line">Starting NBDB database self-tuning. This may take some time...</span><br><span class="line">	Found 0 fragmented records in database.</span><br><span class="line">NBDB database self-tuning is complete.</span><br><span class="line">Database [NBDB] validation successful.</span><br><span class="line">The NetBackup database creation complete.</span><br><span class="line">Database [NBDB] is alive and well on server [NB_rhel6-01].</span><br><span class="line">Creating the NetBackup Authorization database.</span><br><span class="line">Creation of NetBackup Authorization database is complete.</span><br><span class="line">Exiting from create_nbdb, status[0].</span><br><span class="line"></span><br><span class="line">Migrating SLP definitions into the NetBackup relational database.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Starting the NetBackup Event Manager.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Starting the NetBackup Audit Manager.</span><br><span class="line"></span><br><span class="line">Starting the NetBackup Deduplication Manager.</span><br><span class="line">Starting the NetBackup Deduplication Engine.</span><br><span class="line"></span><br><span class="line">Starting the NetBackup database manager process (bpdbm).</span><br><span class="line"></span><br><span class="line">Creating Directive Set for LotusNotes</span><br><span class="line">Creating Directive Set for MS_Exchange_Mailbox</span><br><span class="line">Creating Directive Set for MS_Exchange_Database</span><br><span class="line">Creating Directive Set for MS_Exchange_Public_Folders</span><br><span class="line">Creating Directive Set for MS_Exchange_Database_Availability_Groups</span><br><span class="line">Creating Directive Set for MS_SharePoint_Portal_Server</span><br><span class="line">Creating Template Set for Oracle_RMAN</span><br><span class="line">Creating Template Set for Oracle_XML_Export</span><br><span class="line">Creating Template Set for DB2</span><br><span class="line">Creating Directive Set for Windows2003</span><br><span class="line">Creating Directive Set for Windows2008</span><br><span class="line">Creating Directive Set for Windows</span><br><span class="line">Creating Directive Set for Enterprise_Vault_7.5</span><br><span class="line">Creating Directive Set for Enterprise_Vault_8.0</span><br><span class="line">Creating Directive Set for Enterprise_Vault_9.0</span><br><span class="line">Creating Directive Set for Enterprise_Vault_10.0</span><br><span class="line">Creating Directive Set for Enterprise_Vault_11.0</span><br><span class="line">Creating Directive Set for NDMP</span><br><span class="line">Creating Directive Set for FlashBackup</span><br><span class="line"></span><br><span class="line">Converting snapshot policies:</span><br><span class="line"></span><br><span class="line">Policy conversion summary:</span><br><span class="line">	Number of original policies:			0</span><br><span class="line">	Number of non-snapshot policies skipped:	0</span><br><span class="line">	Number of policies not needing conversion:	0</span><br><span class="line">	Number of policies converted to</span><br><span class="line">	  '</span>auto<span class="string">' snapshot method:			0</span><br><span class="line">	Number of policies converted:			0</span><br><span class="line"></span><br><span class="line">Updating client hardware definitions:</span><br><span class="line"></span><br><span class="line">Hardware update conversion summary:</span><br><span class="line">	Number of policies processed:			      0</span><br><span class="line">	Number of policies with affected clients:	      0</span><br><span class="line">	Number of clients processed:			      0</span><br><span class="line">	Number of clients converted:			      0</span><br><span class="line"></span><br><span class="line">Updating policy identifiers:</span><br><span class="line"></span><br><span class="line">Policy identifier update summary:</span><br><span class="line">	Number of policies processed:				      0</span><br><span class="line">	Number of policies with duplicate identifier:	      0</span><br><span class="line">	Number of policies with empty identifier:		      0</span><br><span class="line">	Number of policies with affected identifier:	      0</span><br><span class="line"></span><br><span class="line">Starting the NetBackup compatibility daemon.</span><br><span class="line">Starting the NetBackup Enterprise Media Manager.</span><br><span class="line">Starting the NetBackup Resource Broker.</span><br><span class="line"></span><br><span class="line">Populating the database tables.  This will take some time.</span><br><span class="line"></span><br><span class="line">Starting the Media Manager device daemon processes.</span><br><span class="line"></span><br><span class="line">Do you want to start the job-related NetBackup daemons</span><br><span class="line">so backups and restores can be initiated? [y,n] (y)</span><br><span class="line">Starting the NetBackup request daemon process (bprd).</span><br><span class="line">Starting the NetBackup Job Manager.</span><br><span class="line">Starting the NetBackup Policy Execution Manager.</span><br><span class="line">Starting the NetBackup Storage Lifecycle Manager.</span><br><span class="line"></span><br><span class="line">Starting the NetBackup Remote Monitoring Management System.</span><br><span class="line">Starting the NetBackup Key Management daemon.</span><br><span class="line">Starting the NetBackup Service Layer.</span><br><span class="line">Starting the NetBackup Indexing Manager.</span><br><span class="line">Starting the NetBackup Agent Request Server.</span><br><span class="line">Starting the NetBackup Bare Metal Restore daemon.</span><br><span class="line">Starting the NetBackup Web Management Console.</span><br><span class="line">Starting the NetBackup Vault daemon.</span><br><span class="line">Starting the NetBackup CloudStore Service Container.</span><br><span class="line">Starting the NetBackup Service Monitor.</span><br><span class="line">Starting the NetBackup Bare Metal Restore Boot Server daemon.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">OpsCenter is the next-generation monitoring, reporting and</span><br><span class="line">administrative solution designed to centrally manage one or</span><br><span class="line">more NetBackup installations from a web browser.</span><br><span class="line"></span><br><span class="line">If an OpsCenter server already exists in your environment</span><br><span class="line">or you plan to install one, enter the real hostname of that</span><br><span class="line">OpsCenter server here.  Do not use a virtual name.  If you</span><br><span class="line">do not want this local machine to be an OpsCenter server,</span><br><span class="line">enter NONE.</span><br><span class="line"></span><br><span class="line">Enter the OpsCenter server (default: NONE):</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NetBackup server installation complete.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">File /usr/openv/tmp/install_trace.27898 contains a trace of this install.</span><br><span class="line">That file can be deleted after you are sure the install was successful.</span><br><span class="line">[root@rhel6-01 NetBackup_7.7.3_LinuxR_x86_64]#</span></span><br></pre></td></tr></table></figure>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Console，登录用户名和密码为本地root帐号</span></span><br><span class="line">/usr/openv/netbackup/bin/jnbSA</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图形化配置</span></span><br><span class="line">- 新建一个policy</span><br><span class="line">- 在Attributes先确认Policy Type，修改Policy storage</span><br><span class="line">- 可以配置一个或者多个Schedules</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改环境变量</span></span><br><span class="line">vim /root/.bash_profile</span><br><span class="line"></span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin:/usr/openv/netbackup/bin:/usr/openv/netbackup/bin/admincmd:/usr/openv/netbackup/bin/goodies:/usr/openv/volmgr/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止服务</span></span><br><span class="line">/usr/openv/netbackup/bin/goodies/netbackup stop</span><br><span class="line">/usr/openv/netbackup/bin/bp.kill_all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看进程</span></span><br><span class="line">/usr/openv/netbackup/bin/bpps -x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 未开启重复删除功能前的常见端口，双向+长连接</span></span><br><span class="line"><span class="number">1556</span></span><br><span class="line"><span class="number">13724</span></span><br><span class="line"><span class="comment"># 开启重删后增加2个端口</span></span><br><span class="line"><span class="number">10082</span></span><br><span class="line"><span class="number">10102</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入ovf后需要做2件事</span></span><br><span class="line"><span class="number">1</span>. 修改IP和hosts</span><br><span class="line"><span class="number">2</span>. 执行bpclntcmd: -clear_host_cache</span><br><span class="line"><span class="number">3</span>. 升级或者重新安装一定要保存好NBU catalog数据库</span><br></pre></td></tr></table></figure>
<h2 id="配置加速备份实践"><a href="#配置加速备份实践" class="headerlink" title="配置加速备份实践"></a>配置加速备份实践</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 增加独立存储空间</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line">pvcreate /dev/sdb1</span><br><span class="line">mkfs.ext4 /dev/sdb1</span><br><span class="line">mkdir /pool</span><br><span class="line">mount /dev/sdb1 /pool</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图形化配置</span></span><br><span class="line">jnbSA</span><br><span class="line"></span><br><span class="line">Configure Disk Storage Servers</span><br><span class="line">- Media Server Deduplication Pool</span><br><span class="line">- Storage Path: /pool</span><br><span class="line"></span><br><span class="line">policy: pool</span><br><span class="line">- Policy <span class="built_in">type</span>: Standard</span><br><span class="line">-- Policy storage: pool-stu</span><br><span class="line">-- Use Accelerator</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试备份加速</span></span><br><span class="line">执行<span class="number">2</span>次Manual Backup，观察增量备份时间区别</span><br></pre></td></tr></table></figure>
<h2 id="配置Oracle数据库备份和恢复实践"><a href="#配置Oracle数据库备份和恢复实践" class="headerlink" title="配置Oracle数据库备份和恢复实践"></a>配置Oracle数据库备份和恢复实践</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据库打开归档</span></span><br><span class="line">shutdown immediate</span><br><span class="line">startup mount</span><br><span class="line">alter database archivelog;</span><br><span class="line">alter system <span class="built_in">set</span> <span class="built_in">log</span>_archive_dest_1=<span class="string">'location=/archivelog/rman_backup'</span> scope=both;</span><br><span class="line">archive <span class="built_in">log</span> start</span><br><span class="line">alter database open;</span><br><span class="line">archive <span class="built_in">log</span> list;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置环境变量</span></span><br><span class="line">su - oracle</span><br><span class="line"></span><br><span class="line">[oracle@rhel6-<span class="number">01</span> ~]$ vim .bash_profile</span><br><span class="line"><span class="comment"># .bash_profile</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the aliases and functions</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">	. ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User specific environment and startup programs</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin:/usr/openv/netbackup/bin:/usr/openv/netbackup/bin/admincmd:/usr/openv/netbackup/bin/goodies:/usr/openv/volmgr/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ORACLE_SID=orcl</span><br><span class="line"><span class="built_in">export</span> ORACLE_BASE=/home/oracle/app/oracle</span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=/home/oracle/app/oracle/product/<span class="number">11.2</span>.<span class="number">0</span>/dbhome_1</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$ORACLE_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$ORACLE_HOME</span>/lib:/lib:/usr/lib</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置oracle_link</span></span><br><span class="line">su - oracle</span><br><span class="line">[oracle@rhel6-<span class="number">01</span> ~]$ oracle_link</span><br><span class="line">Fri Apr <span class="number">21</span> <span class="number">13</span>:<span class="number">41</span>:<span class="number">56</span> CST <span class="number">2017</span></span><br><span class="line">All Oracle instances should be shutdown before running this script.</span><br><span class="line"></span><br><span class="line">Please <span class="built_in">log</span> into the Unix system as the Oracle owner <span class="keyword">for</span> running this script</span><br><span class="line"></span><br><span class="line">Do you want to <span class="built_in">continue</span>? (y/n) [n] y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">LIBOBK path: /usr/openv/netbackup/bin</span><br><span class="line">ORACLE_HOME: /home/oracle/app/oracle/product/<span class="number">11.2</span>.<span class="number">0</span>/dbhome_1</span><br><span class="line">Oracle version: <span class="number">11.2</span>.<span class="number">0.3</span>.<span class="number">0</span></span><br><span class="line">Platform <span class="built_in">type</span>: x86_64</span><br><span class="line">Linking LIBOBK:</span><br><span class="line">ln <span class="operator">-s</span> /usr/openv/netbackup/bin/libobk.so64 /home/oracle/app/oracle/product/<span class="number">11.2</span>.<span class="number">0</span>/dbhome_1/lib/libobk.so</span><br><span class="line">Done</span><br><span class="line"></span><br><span class="line">Please check the trace file located <span class="keyword">in</span> /tmp/make_trace.<span class="number">15372</span></span><br><span class="line">to make sure the linking process was successful.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改备份脚本</span></span><br><span class="line">mkdir /nbu</span><br><span class="line">cp /usr/openv/netbackup/ext/db_ext/oracle/samples/rman/hot_database_backup.sh /nbu/</span><br><span class="line">vim hot_database_backup.sh</span><br><span class="line"></span><br><span class="line">ORACLE_HOME=/home/oracle/app/oracle/product/<span class="number">11.2</span>.<span class="number">0</span>/dbhome_1</span><br><span class="line"></span><br><span class="line">ORACLE_SID=orcl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图形化配置策略</span></span><br><span class="line">policy</span><br><span class="line">- Policy <span class="built_in">type</span>: oracle</span><br><span class="line">- Clients: Clients <span class="keyword">for</span> use with scripts or templates</span><br><span class="line">- Backup Selections: /nbu/hot_database_backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># NetBackup 7.6以后可以通过图形化配置备份，不依赖脚本，省去前两步，直接配置策略即可</span></span><br><span class="line">jnbSA</span><br><span class="line">NetBackup Management - Applications - Oracle - All Instances</span><br><span class="line">- Discover Instances</span><br><span class="line">- 右键数据库选择Register</span><br><span class="line"><span class="comment"># 配置策略</span></span><br><span class="line">policy</span><br><span class="line">- Policy <span class="built_in">type</span>: oracle</span><br><span class="line">- Clients: Protect Instances and Databases</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启并行优化加速</span></span><br><span class="line">- NetBackup Management - Host Properties - Master Servers</span><br><span class="line">- Properties - Global Attributes - Maximum job per client</span><br><span class="line"><span class="comment"># policy调整参数</span></span><br><span class="line">- Number of parallel streams</span><br><span class="line"></span><br><span class="line"><span class="comment"># Oracle数据库恢复实践</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟数据库误删除（可以跳过直接回复某个数据文件测试）</span></span><br><span class="line">SQL&gt; select name from v<span class="variable">$datafile</span>;</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">/home/oracle/app/oracle/oradata/orcl/system01.dbf</span><br><span class="line">/home/oracle/app/oracle/oradata/orcl/sysaux01.dbf</span><br><span class="line">/home/oracle/app/oracle/oradata/orcl/undotbs01.dbf</span><br><span class="line">/home/oracle/app/oracle/oradata/orcl/users01.dbf</span><br><span class="line">/home/oracle/app/oracle/oradata/orcl/example01.dbf</span><br><span class="line"></span><br><span class="line">SQL&gt; shutdown immediate</span><br><span class="line">Database closed.</span><br><span class="line">Database dismounted.</span><br><span class="line">ORACLE instance shut down.</span><br><span class="line">SQL&gt; <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nbu查看备份列表</span></span><br><span class="line">[root@rhel6-<span class="number">01</span> nbu]<span class="comment"># bplist -C rhel6-01 -t 4 -l -R /</span></span><br><span class="line">-rw-rw---- oracle    oracle        <span class="number">9961472</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">32</span> /ctrl_dORCL_u0bs28f04_s11_p1_t941898756</span><br><span class="line">-rw-rw---- oracle    oracle         <span class="number">786432</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">32</span> /arch_dORCL_u0as28evl_s10_p1_t941898741</span><br><span class="line">-rw-rw---- oracle    oracle        <span class="number">9961472</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">32</span> /bk_dORCL_u09s28ev2_s9_p1_t941898722</span><br><span class="line">-rw-r----- oracle    oracle      <span class="number">744497152</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">31</span> /home/oracle/app/oracle/oradata/orcl/system01.dbf</span><br><span class="line">-rw-r----- oracle    oracle      <span class="number">120594432</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">31</span> /home/oracle/app/oracle/oradata/orcl/undotbs01.dbf</span><br><span class="line">-rw-r----- oracle    oracle        <span class="number">5251072</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">31</span> /home/oracle/app/oracle/oradata/orcl/users01.dbf</span><br><span class="line">-rw-r----- oracle    oracle      <span class="number">597696512</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">30</span> /home/oracle/app/oracle/oradata/orcl/sysaux01.dbf</span><br><span class="line">-rw-r----- oracle    oracle      <span class="number">328343552</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">30</span> /home/oracle/app/oracle/oradata/orcl/example01.dbf</span><br><span class="line">-rw-rw---- oracle    oracle        <span class="number">9961472</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">04</span> /cntrl_7_1_941897082</span><br><span class="line">-rw-rw---- oracle    oracle         <span class="number">262144</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">04</span> /al_6_1_941897055</span><br><span class="line">-rw-rw---- oracle    oracle        <span class="number">3407872</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">04</span> /al_5_1_941897055</span><br><span class="line">-rw-rw---- oracle    oracle         <span class="number">262144</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">03</span> /bk_4_1_941897037</span><br><span class="line">-rw-rw---- oracle    oracle        <span class="number">9961472</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">03</span> /bk_3_1_941896978</span><br><span class="line">-rw-rw---- oracle    oracle      <span class="number">690487296</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">01</span> /bk_1_1_941896912</span><br><span class="line">-rw-rw---- oracle    oracle      <span class="number">516161536</span> Apr <span class="number">21</span> <span class="number">14</span>:<span class="number">01</span> /bk_2_1_941896912</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参考nbu备份脚本</span></span><br><span class="line">/usr/openv/netbackup/ext/db_ext/oracle/samples/rman/complete_database_restore.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复控制文件</span></span><br><span class="line">RUN &#123;</span><br><span class="line">ALLOCATE CHANNEL ch00 TYPE <span class="string">'SBT_TAPE'</span>;</span><br><span class="line">ALLOCATE CHANNEL ch01 TYPE <span class="string">'SBT_TAPE'</span>;</span><br><span class="line">RESTORE controfile from autobackup;</span><br><span class="line">RELEASE CHANNEL ch00;</span><br><span class="line">RELEASE CHANNEL ch01;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复数据文件</span></span><br><span class="line">RUN &#123;</span><br><span class="line">ALLOCATE CHANNEL ch00 TYPE <span class="string">'SBT_TAPE'</span>;</span><br><span class="line">ALLOCATE CHANNEL ch01 TYPE <span class="string">'SBT_TAPE'</span>;</span><br><span class="line">RESTORE DATABASE;</span><br><span class="line">RECOVER DATABASE;</span><br><span class="line">RELEASE CHANNEL ch00;</span><br><span class="line">RELEASE CHANNEL ch01;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      记录 Veritas NetBackup 培训心得
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Python 2.6 升级至 Python 2.7 的实践心得</title>
    <link href="https://wsgzao.github.io/post/python-2-6-update-to-2-7/"/>
    <id>https://wsgzao.github.io/post/python-2-6-update-to-2-7/</id>
    <published>2017-04-26T06:59:49.000Z</published>
    <updated>2017-04-26T03:45:49.788Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>CentOS 6.8 安装 Python 2.7.13，因为软件版本上的需求所以考虑将 Python 升级至 2.7.13，加上生产环境还是以 RHEL 6 为主，互联网自动化运维平台大多数也推荐以Python 2.7.x + CentOS 6.x 来操作，选择 Python 2 还是 Python 3 也没有定论，找到适合的搭配即可。</p>
<blockquote>
<p>Python 2.6 升级至 Python 2.7 的实践心得</p>
</blockquote>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2017年04月26日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/python-2-6-update-to-2-7/" target="_blank" rel="external">https://wsgzao.github.io/post/python-2-6-update-to-2-7/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Python - <a href="https://www.python.org/" target="_blank" rel="external">https://www.python.org/</a><br>PyPI - <a href="https://pypi.python.org/pypi" target="_blank" rel="external">https://pypi.python.org/pypi</a><br>pip - <a href="https://pip.pypa.io/en/stable/user_guide/#configuration" target="_blank" rel="external">https://pip.pypa.io/en/stable/user_guide/#configuration</a></p>
<hr>
<h2 id="简单安装"><a href="#简单安装" class="headerlink" title="简单安装"></a>简单安装</h2><blockquote>
<p>因为Python 2.7.13以后版本会自动完善yum配置，所以不必参考以前的网上文章去修改其他地方</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前系统中的 Python 版本，返回 Python 2.6.6 为正常</span></span><br><span class="line">python --version</span><br><span class="line"></span><br><span class="line">Python <span class="number">2.6</span>.<span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查 CentOS 版本，返回 CentOS release 6.8 (Final) 为正常</span></span><br><span class="line">cat /etc/redhat-release</span><br><span class="line"></span><br><span class="line">CentOS release <span class="number">6.8</span> (Final)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装所有的开发工具包</span></span><br><span class="line">yum groupinstall -y <span class="string">"Development tools"</span></span><br><span class="line"><span class="comment"># 安装其它的必需包</span></span><br><span class="line">yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载、编译和安装 Python 2.7.13</span></span><br><span class="line"><span class="comment">#wget https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz</span></span><br><span class="line">tar zxf Python-<span class="number">2.7</span>.<span class="number">13</span>.tgz</span><br><span class="line"><span class="built_in">cd</span> Python-<span class="number">2.7</span>.<span class="number">13</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看新的 Python 版本，返回 Python 2.7.13 为正常</span></span><br><span class="line">python --version</span><br><span class="line"></span><br><span class="line">Python <span class="number">2.7</span>.<span class="number">13</span></span><br></pre></td></tr></table></figure>
<h2 id="ansible离线安装实践"><a href="#ansible离线安装实践" class="headerlink" title="ansible离线安装实践"></a>ansible离线安装实践</h2><blockquote>
<p>这里利用了一些内网离线安装ansible的小技巧，相关文件我会上传至网盘</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install Python</span></span><br><span class="line">tar xf Python-<span class="number">2.7</span>.<span class="number">13</span>.tgz</span><br><span class="line"><span class="built_in">cd</span> Python-<span class="number">2.7</span>.<span class="number">13</span></span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># ImportError: No module named six.moves</span></span><br><span class="line">tar xf six-<span class="number">1.10</span>.<span class="number">0</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> six-<span class="number">1.10</span>.<span class="number">0</span></span><br><span class="line">python setup.py install</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># ImportError: No module named packaging.version</span></span><br><span class="line">tar xf packaging-<span class="number">16.8</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> packaging-<span class="number">16.8</span></span><br><span class="line">python setup.py install</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># ImportError: No module named pyparsing</span></span><br><span class="line">tar xf pyparsing-<span class="number">2.2</span>.<span class="number">0</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> pyparsing-<span class="number">2.2</span>.<span class="number">0</span></span><br><span class="line">python setup.py install</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># ImportError: No module named appdirs</span></span><br><span class="line">tar xf appdirs-<span class="number">1.4</span>.<span class="number">3</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> appdirs-<span class="number">1.4</span>.<span class="number">3</span></span><br><span class="line">python setup.py install</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># Install Setuptools</span></span><br><span class="line">unzip setuptools-<span class="number">34.2</span>.<span class="number">0</span>.zip</span><br><span class="line"><span class="built_in">cd</span> setuptools-<span class="number">34.2</span>.<span class="number">0</span></span><br><span class="line">python setup.py install</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># Install pip</span></span><br><span class="line">tar xf pip-<span class="number">9.0</span>.<span class="number">1</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> pip-<span class="number">9.0</span>.<span class="number">1</span></span><br><span class="line">python setup.py install</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"></span><br><span class="line"><span class="comment"># pip 离线下载依赖包</span></span><br><span class="line">pip install <span class="operator">-d</span> ~/tmp/ ansible</span><br><span class="line">pip install <span class="operator">-d</span> ~/tmp/ ansible-cmdb</span><br><span class="line"></span><br><span class="line"><span class="comment"># pip 离线安装</span></span><br><span class="line">pip install ansible --index-url=http://<span class="number">172.31</span>.<span class="number">197.1</span>:<span class="number">7000</span>/simple/ --trusted-host=<span class="number">172.31</span>.<span class="number">197.1</span></span><br><span class="line">pip install ansible-cmdb --index-url=http://<span class="number">172.31</span>.<span class="number">197.1</span>:<span class="number">7000</span>/simple/ --trusted-host=<span class="number">172.31</span>.<span class="number">197.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看安装好的版本</span></span><br><span class="line">[root@ansible-wangao ansible]<span class="comment"># pip -V</span></span><br><span class="line">pip <span class="number">9.0</span>.<span class="number">1</span> from /usr/<span class="built_in">local</span>/lib/python2.<span class="number">7</span>/site-packages/pip-<span class="number">9.0</span>.<span class="number">1</span>-py2.<span class="number">7</span>.egg (python <span class="number">2.7</span>)</span><br><span class="line"></span><br><span class="line">[root@ansible-wangao ansible]<span class="comment"># ansible --version</span></span><br><span class="line">ansible <span class="number">2.3</span>.<span class="number">0.0</span></span><br><span class="line">  config file = /etc/ansible/ansible.cfg</span><br><span class="line">  configured module search path = Default w/o overrides</span><br><span class="line">  python version = <span class="number">2.7</span>.<span class="number">13</span> (default, Apr <span class="number">25</span> <span class="number">2017</span>, <span class="number">17</span>:<span class="number">19</span>:<span class="number">23</span>) [GCC <span class="number">4.4</span>.<span class="number">7</span> <span class="number">20120313</span> (Red Hat <span class="number">4.4</span>.<span class="number">7</span>-<span class="number">17</span>)]</span><br><span class="line"></span><br><span class="line">[root@ansible-wangao ansible]<span class="comment"># ansible-cmdb --version</span></span><br><span class="line">ansible-cmdb v1.<span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更换豆瓣pip源</span></span><br><span class="line">vim  <span class="variable">$HOME</span>/.pip/pip.conf</span><br><span class="line"></span><br><span class="line">[global]</span><br><span class="line">index-url = https://pypi.doubanio.com/simple/</span><br><span class="line">[install]</span><br><span class="line"></span><br><span class="line">trusted-host=pypi.doubanio.com</span><br></pre></td></tr></table></figure>
<h2 id="Windows-安装-Python-2-7-x"><a href="#Windows-安装-Python-2-7-x" class="headerlink" title="Windows 安装 Python 2.7.x"></a>Windows 安装 Python 2.7.x</h2><blockquote>
<p>Windows下安装扩展包可能没有想象中那么顺利，遇到安装不上的包推荐去下面这个网址看看</p>
</blockquote>
<p><a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="external">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a></p>
<p>下载Python，如 2.7.13<br><a href="https://www.python.org/downloads/" target="_blank" rel="external">https://www.python.org/downloads/</a><br><a href="https://www.python.org/ftp/python/2.7.13/python-2.7.13.msi" target="_blank" rel="external">https://www.python.org/ftp/python/2.7.13/python-2.7.13.msi</a></p>
<p>安装时注意勾选环境变量<br>Add python.exe to Path</p>
<p>安装python2.7.13默认自带pip版本为9.0.1<br>PS C:\Users\Administrator&gt; pip -V<br>pip 9.0.1 from c:\python27\lib\site-packages (python 2.7)</p>
<p>安装Python后升级pip<br>python -m pip install –upgrade pip</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更换pypi国内源，运行以下python代码会自动建立pip.ini</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">ini=<span class="string">"""[global]</span><br><span class="line">index-url = https://pypi.doubanio.com/simple/</span><br><span class="line">[install]</span><br><span class="line">trusted-host=pypi.doubanio.com</span><br><span class="line">"""</span></span><br><span class="line">pippath=os.environ[<span class="string">"USERPROFILE"</span>]+<span class="string">"\\pip\\"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(pippath):</span><br><span class="line">    os.mkdir(pippath)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(pippath+<span class="string">"pip.ini"</span>,<span class="string">"w+"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(ini)</span><br></pre></td></tr></table></figure>
<h2 id="离线安装包"><a href="#离线安装包" class="headerlink" title="离线安装包"></a>离线安装包</h2><p><a href="http://pan.baidu.com/s/1o7J8QBw" target="_blank" rel="external">http://pan.baidu.com/s/1o7J8QBw</a></p>
]]></content>
    
    <summary type="html">
    
      Python 2.6 升级至 Python 2.7 的实践心得
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>GFW翻墙小结</title>
    <link href="https://wsgzao.github.io/post/fq/"/>
    <id>https://wsgzao.github.io/post/fq/</id>
    <published>2017-04-14T08:22:32.000Z</published>
    <updated>2017-04-14T09:04:34.063Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/Ur503skA.jpeg" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>政府无限的权力，都是大部分人自己放弃的。假货坑爹，让政府审核。孩子管不好，让政府关网吧。有人在微博骂我，让政府去删。房价太高，让政府去限购。我们的文化实在太独特，创造出了家长式威权政府，GFW 正是在这种背景下产生的，一个社会矛盾的终极调和器，最终生活不能自理的你每天做的每一件事情都要给政府审查一遍，以免伤害到其他同样生活不能自理的人。这是一个零和游戏，越和这样的用户打交道，越对未来持悲观态度，觉得 GFW 可能永远也不会消失，而墙内的这个局域网看起来还似乎生机勃勃的自成一体，真是让人绝望。</p>
<p>Via <a href="https://twitter.com/clowwindy" target="_blank" rel="external">@clowwindy</a> - <a href="https://www.v2ex.com/t/166417#reply121" target="_blank" rel="external">https://www.v2ex.com/t/166417#reply121</a></p>
<hr>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2017年04月14日 - 增加iOS免费方案Shadowsocks Wingy<br>2017年02月09日 - 更新shadowsocks.com为shadowsocks.com.hk<br>2017年01月24日 - 移除土行孙，更新shadowsocksr-csharp/shadowsocks-windows/ShadowsocksX-NG/shadowsocks-android<br>2016年08月23日 - 恢复土行孙，增加COW，分离Shadowsocks/ShadowsocksR/ShadowsocksX-R<br>2016年04月29日 - 移除土行孙，增加V2Ray，影梭，Shadowrocket，佛跳墙<br>2016年02月23日 - 增加Surge，感谢@刘亚晨<br>2016年01月08日 - 增加首选免费方案XX-Net，更新付费方案土行孙<br>2015年12月23日 - 尊重@东哥的要求，移除XXX<br>2015年11月28日 - 更新XXX和土行孙付费方案<br>2015年10月11日 - 移除fqrouter和红杏，增加shadowsocks-android和GreenVPN<br>2015年08月31日 - Thanks @clowwindy &amp; @breakwa11, and all of the contributor of the shadowsocks.<br>2015年08月11日 - 移除GoAgentX，感谢@ohdarling<br>2015年08月06日 - 移除曲径，感谢两位前盛大创新院朋友做出的贡献，尊重你们的决定<br>2015年05月22日 - 移除所有Goagent项目，增加赛风/红杏/Shadowsocks免费账号<br>2015年03月08日 - fqrouter复活，新增免费方案百度浏览器<br>2015年02月07日 - 修改细节描述，避免误导大家<br>2015年02月03日 - 更换网址为f(翻)q(墙)，感谢fqrouter作者做出的贡献<br>2014年11月30日 - 完善内容，标注自用首选免费和付费翻墙方案<br>2014年08月24日 - 新增免费方案GoAgent+，付费方案商业版Shadowsocks<br>2014年06月15日 - 新增Buckyball浏览器，父亲节快乐<br>2014年06月13日 - 补充Mac/iOS方案<br>2014年06月12日 - 撰写初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/fq/" target="_blank" rel="external">https://wsgzao.github.io/post/fq/</a></p>
<p>扩展阅读</p>
<ul>
<li>Contributors - <a href="http://shadowsocks.org/en/about/contributors.html" target="_blank" rel="external">http://shadowsocks.org/en/about/contributors.html</a></li>
<li>科学上网利器 Shadowsocks 使用方法 - <a href="http://ttt.tt/150/" target="_blank" rel="external">http://ttt.tt/150/</a></li>
</ul>
<hr>
<h2 id="简单验证是否被墙"><a href="#简单验证是否被墙" class="headerlink" title="简单验证是否被墙"></a>简单验证是否被墙</h2><blockquote>
<p>如果你不能访问以下网址，那恭喜你生活在墙的有效保护区内，关键字智能屏蔽效果如下</p>
</blockquote>
<p><a href="http://wsgzao.github.io/post/gfw-break/" target="_blank" rel="external">http://wsgzao.github.io/post/gfw-break/</a></p>
<hr>
<h2 id="免费方案"><a href="#免费方案" class="headerlink" title="免费方案"></a>免费方案</h2><blockquote>
<p>各个平台的解决方案都不唯一，请认真阅读原文中的说明部分</p>
</blockquote>
<h3 id="XX-Net"><a href="#XX-Net" class="headerlink" title="XX-Net"></a>XX-Net</h3><blockquote>
<p>接力GoAgent翻墙工具—-Anti-censor tools</p>
</blockquote>
<ul>
<li>【首选】GAE proxy, 稳定、易用、快速</li>
<li>用过GoAgent的朋友应该还有印象吧</li>
</ul>
<p><a href="https://github.com/XX-net/XX-Net" target="_blank" rel="external">https://github.com/XX-net/XX-Net</a></p>
<h3 id="V2Ray"><a href="#V2Ray" class="headerlink" title="V2Ray"></a>V2Ray</h3><blockquote>
<p>V2Ray作者关于V2Ray的话”我是只是一名普通的开发人员，已肉翻，本已不依赖这些翻墙工具，但 ShadowSock 和 GoAgent 被迫删除代码的事件实在太恶心，不得不做点什么了。”</p>
</blockquote>
<p><a href="https://www.v2ray.com/" target="_blank" rel="external">https://www.v2ray.com/</a></p>
<h3 id="百度浏览器"><a href="#百度浏览器" class="headerlink" title="百度浏览器"></a>百度浏览器</h3><blockquote>
<p>你这么大摇大摆提供翻墙插件，真不用担心360菊(jǔ)爆(bào)吗？</p>
</blockquote>
<ul>
<li>看到百度浏览器团队介绍的最后一句话我才明白QQ浏览器为何扶不起</li>
<li>UC浏览器翻墙效果不佳还要背负面临政策风险，所以就不直接推荐了</li>
<li>还有很多通过自行编译或与Chrome/Firefox整合的翻墙方式也不再列举，比如Lantern</li>
</ul>
<p><a href="http://liulanqi.baidu.com/about.html" target="_blank" rel="external">http://liulanqi.baidu.com/about.html</a></p>
<h3 id="Shadowsocks"><a href="#Shadowsocks" class="headerlink" title="Shadowsocks"></a>Shadowsocks</h3><blockquote>
<p>shadowsocks各版本的GitHub源码和发布地址</p>
</blockquote>
<p><a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="external">https://github.com/shadowsocks/shadowsocks-windows/releases</a><br><a href="https://github.com/shadowsocks/ShadowsocksX-NG/releases" target="_blank" rel="external">https://github.com/shadowsocks/ShadowsocksX-NG/releases</a><br><a href="https://github.com/shadowsocks/shadowsocks-android/releases" target="_blank" rel="external">https://github.com/shadowsocks/shadowsocks-android/releases</a></p>
<h3 id="ShadowsocksR"><a href="#ShadowsocksR" class="headerlink" title="ShadowsocksR"></a>ShadowsocksR</h3><blockquote>
<p>@breakwa11的私人项目</p>
</blockquote>
<p><a href="https://github.com/shadowsocksr" target="_blank" rel="external">https://github.com/shadowsocksr</a><br><a href="https://github.com/shadowsocksr/shadowsocksr-csharp/releases" target="_blank" rel="external">https://github.com/shadowsocksr/shadowsocksr-csharp/releases</a><br><a href="https://github.com/shadowsocksr/ShadowsocksX-NG/releases" target="_blank" rel="external">https://github.com/shadowsocksr/ShadowsocksX-NG/releases</a><br><a href="https://github.com/shadowsocksr/shadowsocksr-android/releases" target="_blank" rel="external">https://github.com/shadowsocksr/shadowsocksr-android/releases</a></p>
<h3 id="COW"><a href="#COW" class="headerlink" title="COW"></a>COW</h3><blockquote>
<p>HTTP proxy written in Go. COW can automatically identify blocked sites and use parent proxies to access.</p>
</blockquote>
<ul>
<li>COW 是一个简化穿墙的 HTTP 代理服务器。它能自动检测被墙网站，仅对这些网站使用二级代理。</li>
</ul>
<p><a href="https://github.com/cyfdecyf/cow" target="_blank" rel="external">https://github.com/cyfdecyf/cow</a></p>
<h3 id="Shadowsocks-免费账号"><a href="#Shadowsocks-免费账号" class="headerlink" title="Shadowsocks 免费账号"></a>Shadowsocks 免费账号</h3><blockquote>
<p>感谢ishadowsocks团队分享</p>
</blockquote>
<p><a href="http://www.ishadowsocks.mobi/" target="_blank" rel="external">http://www.ishadowsocks.mobi/</a></p>
<h3 id="赛风"><a href="#赛风" class="headerlink" title="赛风"></a>赛风</h3><blockquote>
<p>作为免费翻墙的一种备用方案吧</p>
</blockquote>
<p><a href="http://www.psiphon3.net/zh/download.html" target="_blank" rel="external">http://www.psiphon3.net/zh/download.html</a></p>
<h3 id="iOS-Surge-Shadowrocket-Shadowsocks-Wingy"><a href="#iOS-Surge-Shadowrocket-Shadowsocks-Wingy" class="headerlink" title="iOS Surge/Shadowrocket/Shadowsocks Wingy"></a>iOS Surge/Shadowrocket/Shadowsocks Wingy</h3><blockquote>
<p>Shadowsocks client for iPhone/iPad.</p>
</blockquote>
<ul>
<li>【首选】iOS翻墙方案</li>
<li>iOS 9以上版本Surge/Shadowrocket或许是你的最佳选择之一</li>
<li>错过Surge的就别再错过Shadowrocket和免费的Wingy</li>
</ul>
<p><a href="http://yach.me/" target="_blank" rel="external">http://yach.me/</a><br><a href="https://itunes.apple.com/cn/app/shadowrocket/id932747118" target="_blank" rel="external">https://itunes.apple.com/cn/app/shadowrocket/id932747118</a><br><a href="https://itunes.apple.com/cn/app/wingy-mian-fei-banvpn-ke-hu/id1148026741" target="_blank" rel="external">https://itunes.apple.com/cn/app/wingy-mian-fei-banvpn-ke-hu/id1148026741</a></p>
<hr>
<h2 id="付费方案"><a href="#付费方案" class="headerlink" title="付费方案"></a>付费方案</h2><blockquote>
<p>请根据自身实际需求，睁大眼睛认真阅读各类网站说明后做出合理的选择</p>
</blockquote>
<h3 id="Shadowsocks商业版"><a href="#Shadowsocks商业版" class="headerlink" title="Shadowsocks商业版"></a>Shadowsocks商业版</h3><blockquote>
<p>轻量级科学上网姿势，改变您的生活体验</p>
</blockquote>
<ul>
<li>【首选】由<a href="http://ttt.tt/about/" target="_blank" rel="external">@Showfom</a>运营</li>
<li>我已经在第一时间入坑高级版至2018年</li>
<li>信任.Trust，以下是我的推荐链接</li>
</ul>
<p><a href="https://portal.shadowsocks.com.hk/aff.php?aff=43" target="_blank" rel="external">https://portal.shadowsocks.com.hk/aff.php?aff=43</a></p>
<h3 id="佛跳墙"><a href="#佛跳墙" class="headerlink" title="佛跳墙"></a>佛跳墙</h3><blockquote>
<p>SS和VPN的双重选择和体验已经很接近之前推荐@东哥的XXX</p>
</blockquote>
<p><a href="http://ftq.link/?r=wsgzao" target="_blank" rel="external">http://ftq.link/?r=wsgzao</a></p>
]]></content>
    
    <summary type="html">
    
      介绍简单可信赖的翻墙方案
    
    </summary>
    
      <category term="软件 | Soft" scheme="https://wsgzao.github.io/categories/%E8%BD%AF%E4%BB%B6-Soft/"/>
    
    
  </entry>
  
  <entry>
    <title>Veritas InfoScale Enterprise 7 安装部署手册</title>
    <link href="https://wsgzao.github.io/post/infoscale/"/>
    <id>https://wsgzao.github.io/post/infoscale/</id>
    <published>2017-04-14T07:22:32.000Z</published>
    <updated>2017-04-14T09:30:35.477Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Veritas InfoScale Availability 能确保关键任务应用程序在遇到意外停机时能够持续正常运行，作为一款商业产品已经足够强大。</p>
<blockquote>
<p>记录 infoscale 7.0.1 安装部署心得</p>
</blockquote>
<hr>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2017年04月14日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/infoscale/" target="_blank" rel="external">https://wsgzao.github.io/post/infoscale/</a></p>
<p>扩展阅读</p>
<ul>
<li>Veritas - <a href="https://www.veritas.com/zh/cn/product/business-continuity/infoscale-availability" target="_blank" rel="external">https://www.veritas.com/zh/cn/product/business-continuity/infoscale-availability</a></li>
</ul>
<hr>
<h2 id="部署前准备"><a href="#部署前准备" class="headerlink" title="部署前准备"></a>部署前准备</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑/etc/hosts</span></span><br><span class="line">vim /etc/hosts</span><br><span class="line"><span class="number">172.25</span>.<span class="number">242.125</span>    qrydb1</span><br><span class="line"><span class="number">172.25</span>.<span class="number">242.126</span>    qrydb2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑环境变量</span></span><br><span class="line">vim ~/.bash_profile</span><br><span class="line"></span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin:/opt/VRTS/bin:/opt/VRTSvxfs/sbin:/opt/VRTSvcs/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用部分服务</span></span><br><span class="line">service iptables stop</span><br><span class="line">chkconfig iptables off</span><br><span class="line">chkconfig --list iptables</span><br><span class="line">iptables        <span class="number">0</span>:off   <span class="number">1</span>:off   <span class="number">2</span>:off   <span class="number">3</span>:off   <span class="number">4</span>:off   <span class="number">5</span>:off   <span class="number">6</span>:off</span><br><span class="line"></span><br><span class="line">service ip6tables stop</span><br><span class="line">chkconfig ip6tables off</span><br><span class="line">chkconfig --list ip6tables</span><br><span class="line">ip6tables       <span class="number">0</span>:off   <span class="number">1</span>:off   <span class="number">2</span>:off   <span class="number">3</span>:off   <span class="number">4</span>:off   <span class="number">5</span>:off   <span class="number">6</span>:off</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用cpuspeed服务</span></span><br><span class="line">chkconfig --level <span class="number">12345</span> cpuspeed off</span><br><span class="line">chkconfig --list cpuspeed</span><br><span class="line">cpuspeed        <span class="number">0</span>:off   <span class="number">1</span>:off   <span class="number">2</span>:off   <span class="number">3</span>:off   <span class="number">4</span>:off   <span class="number">5</span>:off   <span class="number">6</span>:off</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用SELINUX服务</span></span><br><span class="line">vim /etc/selinux/config</span><br><span class="line"> </span><br><span class="line"><span class="comment"># This file controls the state of SELinux on the system.</span></span><br><span class="line"><span class="comment"># SELINUX= can take one of these three values:</span></span><br><span class="line"><span class="comment">#     enforcing - SELinux security policy is enforced.</span></span><br><span class="line"><span class="comment">#     permissive - SELinux prints warnings instead of enforcing.</span></span><br><span class="line"><span class="comment">#     disabled - No SELinux policy is loaded.</span></span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="comment"># SELINUXTYPE= can take one of these two values:</span></span><br><span class="line"><span class="comment">#     targeted - Targeted processes are protected,</span></span><br><span class="line"><span class="comment">#     mls - Multi Level Security protection.</span></span><br><span class="line">SELINUXTYPE=targeted </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统优化调整</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 针对数据库环境，需要把grub.con中添加elevator设置为deadline</span></span><br><span class="line">vim /etc/grub.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># grub.conf generated by anaconda</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Note that you do not have to rerun grub after making changes to this file</span></span><br><span class="line"><span class="comment"># NOTICE:  You have a /boot partition.  This means that</span></span><br><span class="line"><span class="comment">#          all kernel and initrd paths are relative to /boot/, eg.</span></span><br><span class="line"><span class="comment">#          root (hd0,0)</span></span><br><span class="line"><span class="comment">#          kernel /vmlinuz-version ro root=/dev/mapper/VolGroup-lv_root</span></span><br><span class="line"><span class="comment">#          initrd /initrd-[generic-]version.img</span></span><br><span class="line"><span class="comment">#boot=/dev/sda</span></span><br><span class="line">default=<span class="number">0</span></span><br><span class="line">timeout=<span class="number">5</span></span><br><span class="line">splashimage=(hd0,<span class="number">0</span>)/grub/splash.xpm.gz</span><br><span class="line">hiddenmenu</span><br><span class="line">title Red Hat Enterprise Linux <span class="number">6</span> (<span class="number">2.6</span>.<span class="number">32</span>-<span class="number">573</span>.el6.x86_64)</span><br><span class="line">        root (hd0,<span class="number">0</span>)</span><br><span class="line">        kernel /vmlinuz-<span class="number">2.6</span>.<span class="number">32</span>-<span class="number">573</span>.el6.x86_64 ro root=/dev/mapper/VolGroup-lv_root rd_NO_LUKS LANG=en_US.UTF-<span class="number">8</span> rd_NO_MD rd_LVM_LV=VolGroup/lv_swap SYSFONT=latarcyrheb-sun16 crashkernel=<span class="number">768</span>M rd_LVM_LV=VolGroup/lv_root  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet transparent_hugepage=never elevator=deadline</span><br><span class="line">        initrd /initramfs-<span class="number">2.6</span>.<span class="number">32</span>-<span class="number">573</span>.el6.x86_64.img</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># sysctl.conf文件检查及调整</span></span><br><span class="line">sysctl <span class="operator">-a</span> | grep -i hung</span><br><span class="line"></span><br><span class="line">kernel.hung_task_panic = <span class="number">0</span></span><br><span class="line">kernel.hung_task_check_count = <span class="number">4194304</span></span><br><span class="line">kernel.hung_task_timeout_secs = <span class="number">120</span></span><br><span class="line">kernel.hung_task_warnings = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">vim /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">kernel.panic = <span class="number">10</span></span><br></pre></td></tr></table></figure>
<h2 id="安装InfoScale-Enterprise-7-0及7-0-1MR包"><a href="#安装InfoScale-Enterprise-7-0及7-0-1MR包" class="headerlink" title="安装InfoScale Enterprise 7.0及7.0.1MR包"></a>安装InfoScale Enterprise 7.0及7.0.1MR包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp/sf</span><br><span class="line">mkdir base</span><br><span class="line">mv Veritas_InfoScale_7.<span class="number">0</span>_RHEL.tar.gz base/</span><br><span class="line"><span class="built_in">cd</span> base</span><br><span class="line">tar -xzvf *</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">tar -xzvf cpi-Patch-<span class="number">7.0</span>.<span class="number">1.500</span>.tar.gz patches/</span><br><span class="line"><span class="built_in">cd</span> patches</span><br><span class="line">mv *.pl ../.</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">tar -xzvf infoscale-rhel6_x86_64-MR-<span class="number">7.0</span>.<span class="number">1</span>.tar.gz</span><br><span class="line"><span class="built_in">cd</span> rhel6_x86_64</span><br><span class="line">./installmr -require /tmp/sf/CPI_7.<span class="number">0.1</span>_P5.pl -base_path /tmp/sf/base/dvd1-redhatlinux/rhel6_x86_64</span><br><span class="line"></span><br><span class="line">Task Menu:</span><br><span class="line"></span><br><span class="line">    P) Perform a Pre-Installation Check     I) Install a Product</span><br><span class="line">    G) Upgrade a Product                    ?) Help</span><br><span class="line"></span><br><span class="line">Enter a Task: [P,I,G,?] p</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Veritas InfoScale Foundation</span><br><span class="line">     <span class="number">2</span>)  Veritas InfoScale Availability</span><br><span class="line">     <span class="number">3</span>)  Veritas InfoScale Storage</span><br><span class="line">     <span class="number">4</span>)  Veritas InfoScale Enterprise</span><br><span class="line">     b)  Back to previous menu</span><br><span class="line"></span><br><span class="line">Select a product to perform pre-installation check <span class="keyword">for</span>: [<span class="number">1</span>-<span class="number">4</span>,b,q] <span class="number">4</span></span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Cluster Server (VCS)</span><br><span class="line">     <span class="number">2</span>)  Storage Foundation (SF)</span><br><span class="line">     <span class="number">3</span>)  Storage Foundation and High Availability (SFHA)</span><br><span class="line">     <span class="number">4</span>)  Storage Foundation Cluster File System HA (SFCFSHA)</span><br><span class="line">     <span class="number">5</span>)  Storage Foundation <span class="keyword">for</span> Oracle RAC (SF Oracle RAC)</span><br><span class="line">     <span class="number">6</span>)  Storage Foundation <span class="keyword">for</span> Sybase ASE CE (SFSYBASECE)</span><br><span class="line"></span><br><span class="line">Select a component to perform pre-installation check <span class="keyword">for</span>: [<span class="number">1</span>-<span class="number">6</span>,q] <span class="number">5</span></span><br><span class="line">Enter the system names separated by spaces: [q,?] qrydb1 qrydb2</span><br><span class="line"></span><br><span class="line">Would you like the installer to setup ssh or rsh communication automatically between the systems?</span><br><span class="line">Superuser passwords <span class="keyword">for</span> the systems will be asked. [y,n,q,?] (y) </span><br><span class="line"></span><br><span class="line">Enter the superuser password <span class="keyword">for</span> system qrydb2: </span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Setup ssh between the systems</span><br><span class="line">     <span class="number">2</span>)  Setup rsh between the systems</span><br><span class="line">     b)  Back to previous menu</span><br><span class="line"></span><br><span class="line">Select the communication method [<span class="number">1</span>-<span class="number">2</span>,b,q,?] (<span class="number">1</span>) </span><br><span class="line"></span><br><span class="line">Would you like to install InfoScale Enterprise on qrydb1 qrydb2? [y,n,q] (n) y</span><br><span class="line"></span><br><span class="line">This product may contain open <span class="built_in">source</span> and other third party materials that are subject to a separate license. See the applicable Third-Party Notice at http://www.symantec.com/about/profile/policies/eulas</span><br><span class="line"></span><br><span class="line">Do you agree with the terms of the End User License Agreement as specified <span class="keyword">in</span> the EULA/en/EULA_InfoScale_Ux_7.<span class="number">0</span>.pdf file under /tmp/sf/base/dvd1-redhatlinux/rhel6_x86_64? [y,n,q,?] y</span><br><span class="line"></span><br><span class="line">Systems have difference <span class="keyword">in</span> clock by more than <span class="number">5</span> seconds</span><br><span class="line"></span><br><span class="line">System clocks can be synchronized using one or more Network Time Protocol (NTP) servers</span><br><span class="line"></span><br><span class="line">Do you want to synchronize system clocks with NTP server(s)? [y,n,q] (y) n</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Enter a valid license key</span><br><span class="line">     <span class="number">2</span>)  Enable keyless licensing and complete system licensing later</span><br><span class="line"></span><br><span class="line">How would you like to license the systems? [<span class="number">1</span>-<span class="number">2</span>,q] (<span class="number">2</span>) </span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Veritas InfoScale Foundation</span><br><span class="line">     <span class="number">2</span>)  Veritas InfoScale Availability</span><br><span class="line">     <span class="number">3</span>)  Veritas InfoScale Storage</span><br><span class="line">     <span class="number">4</span>)  Veritas InfoScale Enterprise</span><br><span class="line">     b)  Back to previous menu</span><br><span class="line"></span><br><span class="line">Which product would you like to register? [<span class="number">1</span>-<span class="number">4</span>,b,q] (<span class="number">4</span>) </span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Configure SF Oracle RAC sub-components</span><br><span class="line">     <span class="number">2</span>)  Prepare to Install Oracle</span><br><span class="line">     <span class="number">3</span>)  Install Oracle Clusterware/Grid Infrastructure and Database</span><br><span class="line">     <span class="number">4</span>)  Post Oracle Installation Tasks</span><br><span class="line">     <span class="number">5</span>)  Exit SF Oracle RAC Configuration</span><br><span class="line"></span><br><span class="line">Choose option: [<span class="number">1</span>-<span class="number">5</span>,q] (<span class="number">1</span>) <span class="number">5</span></span><br><span class="line"></span><br><span class="line">Would you like to <span class="keyword">do</span> post SFRAC configuration checks? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">Do you want to cleanup the communication <span class="keyword">for</span> the systems qrydb2? [y,n,q] (n) </span><br><span class="line"></span><br><span class="line">installmr <span class="built_in">log</span> files, summary file, and response file are saved at:</span><br><span class="line"></span><br><span class="line">    /opt/VRTS/install/logs/installmr-<span class="number">201703141635</span>Llz</span><br><span class="line"></span><br><span class="line">Would you like to view the summary file? [y,n,q] (n)</span><br></pre></td></tr></table></figure>
<h2 id="安装相关hotfix包"><a href="#安装相关hotfix包" class="headerlink" title="安装相关hotfix包"></a>安装相关hotfix包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装aslapm包（两个节点同时操作）</span></span><br><span class="line"><span class="built_in">cd</span> /tmp/sf</span><br><span class="line">tar -xzvf VRTSaslapm*</span><br><span class="line"><span class="built_in">cd</span> RHEL6</span><br><span class="line">rpm -Uvh VRTSaslapm*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装vxvm包（两个节点同时操作）</span></span><br><span class="line"><span class="built_in">cd</span> /tmp/sf</span><br><span class="line">rm -rf RHEL6</span><br><span class="line">tar -xzvf vm-rhel6*</span><br><span class="line"><span class="built_in">cd</span> rpms</span><br><span class="line">rpm -Uvh VRTSvxvm*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装llt包（单个节点操作）</span></span><br><span class="line"><span class="built_in">cd</span> /tmp/sf</span><br><span class="line">tar -xzvf llt*</span><br><span class="line">./installVRTSllt701P400</span><br><span class="line"></span><br><span class="line">Enter the system names separated by spaces: [q,?] (qrydb1) qrydb1 qrydb2</span><br><span class="line"></span><br><span class="line">Do you want to <span class="built_in">continue</span>? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">All InfoScale Enterprise processes that are currently running must be stopped</span><br><span class="line"></span><br><span class="line">Do you want to stop InfoScale Enterprise processes now? [y,n,q,?] (y) </span><br><span class="line"></span><br><span class="line">Would you like to view the summary file? [y,n,q] (n) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装vxfs包（两个节点同时操作）</span></span><br><span class="line"><span class="built_in">cd</span> /tmp/sf</span><br><span class="line">tar -xzvf fs*</span><br><span class="line"><span class="built_in">cd</span> rpms</span><br><span class="line">rpm -Uvh VRTSvxfs*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装vcs包（两个节点同时操作）</span></span><br><span class="line"><span class="built_in">cd</span> /tmp/sf</span><br><span class="line">tar -xzvf vcs-*</span><br><span class="line">/opt/VRTSvcs/bin/CmdServer -stop</span><br><span class="line">cp /etc/VRTSvcs/conf/config/types.cf /etc/VRTSvcs/conf/config/types.cf.orig</span><br><span class="line">cp /etc/VRTSvcs/conf/config/main.cf /etc/VRTSvcs/conf/config/main.cf.orig</span><br><span class="line"><span class="built_in">cd</span> rpms</span><br><span class="line">rpm -Uvh VRTSvcs*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装Java GUI包（两个节点同时操作）</span></span><br><span class="line"><span class="built_in">cd</span> /tmp/sf</span><br><span class="line">tar -xzvf VCS_C*</span><br><span class="line">rpm -ivh VRTScscm*</span><br></pre></td></tr></table></figure>
<h2 id="重启前配置及检查"><a href="#重启前配置及检查" class="headerlink" title="重启前配置及检查"></a>重启前配置及检查</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux平台（所有节点）修改/etc/init.d/vxvm-recover,去掉除Stopping $daemon...外其他所有的vxrelocd字段</span></span><br><span class="line">vim /etc/init.d/vxvm-recover</span><br><span class="line"></span><br><span class="line"><span class="comment">#       $CHECKPROC "vxrelocd"</span></span><br><span class="line"><span class="comment">#       if [ $? != 0 ]</span></span><br><span class="line"><span class="comment">#       then</span></span><br><span class="line"><span class="comment">#               echo -n "Starting vxrelocd..."</span></span><br><span class="line"><span class="comment">#               vxrelocd root &amp;</span></span><br><span class="line"><span class="comment">#               sleep 1</span></span><br><span class="line"><span class="comment">#               pid="$(pids_pidof "vxrelocd")"</span></span><br><span class="line"><span class="comment">#               if [ ! -z "$pid" ]</span></span><br><span class="line"><span class="comment">#               then</span></span><br><span class="line"><span class="comment">#                       echo "  [ OK ]"</span></span><br><span class="line"><span class="comment">#               else</span></span><br><span class="line"><span class="comment">#                       echo "  [ FAILED ]"</span></span><br><span class="line"><span class="comment">#               fi</span></span><br><span class="line"><span class="comment">#       else</span></span><br><span class="line"><span class="comment">#               echo "vxrelocd already running..."</span></span><br><span class="line"><span class="comment">#       fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改tunefstab文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"system_default dalloc_enable=0,pdir_enable=0"</span> &gt; /etc/vx/tunefstab</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改vcsenv文件</span></span><br><span class="line">vim /opt/VRTSvcs/bin/vcsenv </span><br><span class="line"></span><br><span class="line">VCS_GAB_RMACTION=<span class="string">"panic"</span></span><br><span class="line"><span class="built_in">export</span> VCS_GAB_RMACTION</span><br><span class="line"></span><br><span class="line">VCS_GAB_TIMOUT=<span class="number">15000</span></span><br><span class="line"><span class="built_in">export</span> VCS_GAB_TIMEOUT</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查相关软件包版本</span></span><br><span class="line">rpm -qa|grep -i vrts</span><br><span class="line">VRTSvcs-<span class="number">7.0</span>.<span class="number">1.101</span>-RHEL6.x86_64</span><br><span class="line">VRTSperl-<span class="number">5.20</span>.<span class="number">1.2</span>-RHEL6.x86_64</span><br><span class="line">VRTSamf-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTSdbac-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTSvxvm-<span class="number">7.0</span>.<span class="number">1.003</span>-RHEL6.x86_64</span><br><span class="line">VRTSvcsag-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTSsfcpi-<span class="number">7.0</span>.<span class="number">1.000</span>-GENERIC.noarch</span><br><span class="line">VRTSllt-<span class="number">7.0</span>.<span class="number">1.400</span>-RHEL6.x86_64</span><br><span class="line">VRTSodm-<span class="number">7.0</span>.<span class="number">0.000</span>-RHEL6.x86_64</span><br><span class="line">VRTSgab-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTScps-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.i686</span><br><span class="line">VRTSglm-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTSvbs-<span class="number">7.0</span>.<span class="number">0.000</span>-Linux.i686</span><br><span class="line">VRTSvcswiz-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTSvxfs-<span class="number">7.0</span>.<span class="number">1.003</span>-RHEL6.x86_64</span><br><span class="line">VRTSgms-<span class="number">7.0</span>.<span class="number">0.000</span>-RHEL6.x86_64</span><br><span class="line">VRTSspt-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.noarch</span><br><span class="line">VRTSdbed-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL.x86_64</span><br><span class="line">VRTSsfmh-<span class="number">7.0</span>.<span class="number">0.0</span>-<span class="number">0</span>.x86_64</span><br><span class="line">VRTSaslapm-<span class="number">7.0</span>.<span class="number">1.200</span>-RHEL6.x86_64</span><br><span class="line">VRTSvlic-<span class="number">3.02</span>.<span class="number">70.008</span>-RHEL6.x86_64</span><br><span class="line">VRTSfsadv-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTSvcsea-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTScscm-<span class="number">6.0</span>.<span class="number">100.000</span>-GA_GENERIC.noarch</span><br><span class="line">VRTSvxfen-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.x86_64</span><br><span class="line">VRTScavf-<span class="number">7.0</span>.<span class="number">1.000</span>-RHEL6.i686</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启所有安装节点</span></span><br><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure>
<h2 id="配置集群"><a href="#配置集群" class="headerlink" title="配置集群"></a>配置集群</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/VRTS/install</span><br><span class="line">./installer -configure</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Cluster Server (VCS)</span><br><span class="line">     <span class="number">2</span>)  Storage Foundation (SF)</span><br><span class="line">     <span class="number">3</span>)  Storage Foundation and High Availability (SFHA)</span><br><span class="line">     <span class="number">4</span>)  Storage Foundation Cluster File System HA (SFCFSHA)</span><br><span class="line">     <span class="number">5</span>)  Storage Foundation <span class="keyword">for</span> Oracle RAC (SF Oracle RAC)</span><br><span class="line">     <span class="number">6</span>)  Storage Foundation <span class="keyword">for</span> Sybase ASE CE (SFSYBASECE)</span><br><span class="line"></span><br><span class="line">Select a component to configure: [<span class="number">1</span>-<span class="number">6</span>,q] <span class="number">5</span></span><br><span class="line"></span><br><span class="line">Enter the system names separated by spaces: [q,?] qrydb1 qrydb2</span><br><span class="line"></span><br><span class="line">Do you want to synchronize system clocks with NTP server(s)? [y,n,q] (y) n</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Configure SF Oracle RAC sub-components</span><br><span class="line">     <span class="number">2</span>)  Prepare to Install Oracle</span><br><span class="line">     <span class="number">3</span>)  Install Oracle Clusterware/Grid Infrastructure and Database</span><br><span class="line">     <span class="number">4</span>)  Post Oracle Installation Tasks</span><br><span class="line">     <span class="number">5</span>)  Exit SF Oracle RAC Configuration</span><br><span class="line"></span><br><span class="line">Choose option: [<span class="number">1</span>-<span class="number">5</span>,q] (<span class="number">1</span>) </span><br><span class="line"></span><br><span class="line">Press [Enter] to <span class="built_in">continue</span>: </span><br><span class="line"></span><br><span class="line">Enter the unique cluster name: [q,?] qrydb_cluster</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>)  Configure the heartbeat links using LLT over Ethernet</span><br><span class="line">     <span class="number">2</span>)  Configure the heartbeat links using LLT over UDP</span><br><span class="line">     <span class="number">3</span>)  Configure the heartbeat links using LLT over RDMA</span><br><span class="line">     <span class="number">4</span>)  Automatically detect configuration <span class="keyword">for</span> LLT over Ethernet</span><br><span class="line">     b)  Back to previous menu</span><br><span class="line"></span><br><span class="line">How would you like to configure heartbeat links? [<span class="number">1</span>-<span class="number">4</span>,b,q,?] (<span class="number">4</span>) <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Enter the NIC <span class="keyword">for</span> the first private heartbeat link on qrydb1: [b,q,?] (bond1) eth8</span><br><span class="line"></span><br><span class="line">Enter the NIC <span class="keyword">for</span> the second private heartbeat link on qrydb1: [b,q,?] (bond1) eth4</span><br><span class="line"></span><br><span class="line">Would you like to configure a third private heartbeat link? [y,n,q,b,?] (n) </span><br><span class="line"></span><br><span class="line">Are you using the same NICs <span class="keyword">for</span> private heartbeat links on all systems? [y,n,q,b,?] (y) </span><br><span class="line"></span><br><span class="line">Enter a unique cluster ID number between <span class="number">0</span>-<span class="number">65535</span>: [b,q,?] (<span class="number">58763</span>) <span class="number">4142</span></span><br><span class="line"></span><br><span class="line">Would you like to check <span class="keyword">if</span> the cluster ID is <span class="keyword">in</span> use by another cluster? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">Press [Enter] to <span class="built_in">continue</span>: </span><br><span class="line"></span><br><span class="line">Cluster information verification:</span><br><span class="line"></span><br><span class="line">    Cluster Name:      qrydb_cluster</span><br><span class="line">    Cluster ID Number: <span class="number">4142</span></span><br><span class="line"></span><br><span class="line">    Private Heartbeat NICs <span class="keyword">for</span> qrydb1: </span><br><span class="line">        link1=eth8</span><br><span class="line">        link2=eth4</span><br><span class="line"></span><br><span class="line">    Private Heartbeat NICs <span class="keyword">for</span> qrydb2: </span><br><span class="line">        link1=eth8</span><br><span class="line">        link2=eth4</span><br><span class="line"></span><br><span class="line">Is this information correct? [y,n,q,?] (y) </span><br><span class="line"></span><br><span class="line">Do you want to configure the Virtual IP? [y,n,q,?] (n) </span><br><span class="line"></span><br><span class="line">Would you like to configure the VCS cluster <span class="keyword">in</span> secure mode? [y,n,q,?] (y) n</span><br><span class="line"></span><br><span class="line">Are you sure that you want to proceed with non-secure installation? [y,n,q] (n) y</span><br><span class="line"></span><br><span class="line">Do you wish to accept the default cluster credentials of <span class="string">'admin/password'</span>? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">Do you want to add another user to the cluster? [y,n,q] (n) </span><br><span class="line"></span><br><span class="line">VCS User verification:</span><br><span class="line"></span><br><span class="line">    User: admin     Privilege: Administrators</span><br><span class="line"></span><br><span class="line">    Passwords are not displayed</span><br><span class="line"></span><br><span class="line">Is this information correct? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">Do you want to configure SMTP notification? [y,n,q,?] (n) </span><br><span class="line"></span><br><span class="line">Do you want to configure SNMP notification? [y,n,q,?] (n) </span><br><span class="line"></span><br><span class="line">Do you want to configure the Global Cluster Option? [y,n,q,?] (n) </span><br><span class="line"></span><br><span class="line">Do you want to stop InfoScale Enterprise processes now? [y,n,q,?] (y) </span><br><span class="line"></span><br><span class="line">Press [Enter] to <span class="built_in">continue</span>: </span><br><span class="line"></span><br><span class="line">Would you like to <span class="keyword">do</span> post SFRAC configuration checks? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">Would you like to view the summary file? [y,n,q] (n) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查配置后的HA状态</span></span><br><span class="line">qrydb1@NH/opt/VRTS/install<span class="comment">#/opt/VRTSvcs/bin/hastatus -sum</span></span><br><span class="line"></span><br><span class="line">-- SYSTEM STATE</span><br><span class="line">-- System               State                Frozen              </span><br><span class="line"></span><br><span class="line">A  qrydb1               RUNNING              <span class="number">0</span>                    </span><br><span class="line">A  qrydb2               RUNNING              <span class="number">0</span>                    </span><br><span class="line"></span><br><span class="line">-- GROUP STATE</span><br><span class="line">-- Group           System               Probed     AutoDisabled    State          </span><br><span class="line"></span><br><span class="line">B  cvm             qrydb1               Y          N               ONLINE         </span><br><span class="line">B  cvm             qrydb2               Y          N               ONLINE</span><br></pre></td></tr></table></figure>
<h2 id="配置I-O-Fencing"><a href="#配置I-O-Fencing" class="headerlink" title="配置I/O Fencing"></a>配置I/O Fencing</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建vxfendg（集群中的一个节点操作）</span></span><br><span class="line">qrydb1@NH/root<span class="comment">#vxdisk list</span></span><br><span class="line">DEVICE       TYPE            DISK         GROUP        STATUS</span><br><span class="line">disk_0       auto:LVM        -            -            online invalid</span><br><span class="line">huawei-xsg10_0 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_1 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_2 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_3 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_4 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_5 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_6 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_7 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_8 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_9 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_10 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_11 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_12 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_13 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_14 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_15 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_16 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_17 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_18 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_19 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_20 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_21 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_22 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_23 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_24 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_25 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_26 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_27 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_28 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_29 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_30 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_31 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_32 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_33 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_34 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_35 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_36 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_37 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_38 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_39 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_40 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_41 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_42 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_43 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_44 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_45 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_46 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_47 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_48 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_49 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_50 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_51 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_52 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_53 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_54 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_55 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_56 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_57 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_58 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_59 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_60 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_61 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_62 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_63 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_64 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_65 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_66 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_67 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_68 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_69 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_70 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_71 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_72 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_73 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_74 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_75 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg10_76 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_0 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_1 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_2 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_3 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_4 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_5 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_6 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_7 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_8 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_9 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_10 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_11 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_12 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_13 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_14 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_15 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_16 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_17 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_18 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_19 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_20 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_21 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_22 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_23 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_24 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_25 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_26 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_27 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_28 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_29 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_30 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_31 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_32 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_33 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_34 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_35 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_36 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_37 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_38 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_39 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_40 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_41 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_42 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_43 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_44 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_45 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_46 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_47 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_48 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_49 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_50 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_51 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_52 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_53 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_54 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_55 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_56 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_57 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_58 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_59 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_60 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_61 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_62 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_63 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_64 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_65 auto:none       -            -            online invalid</span><br><span class="line">huawei-xsg11_66 auto:none       -            -            online invalid</span><br><span class="line">qrydb1@NH/root<span class="comment">#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化磁盘为online</span></span><br><span class="line">vxdisk list |grep -i huawei|awk <span class="string">'&#123;print "/etc/vx/bin/vxdisksetup -i "$1&#125;'</span>|sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择大小为1G的磁盘作为仲裁盘</span></span><br><span class="line">qrydb1@NH/root<span class="comment">#lsblk | grep "1G"</span></span><br><span class="line">sdma                            <span class="number">69</span>:<span class="number">288</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdme                            <span class="number">69</span>:<span class="number">352</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdmc                            <span class="number">69</span>:<span class="number">320</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdml                            <span class="number">69</span>:<span class="number">464</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdmm                            <span class="number">69</span>:<span class="number">480</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdmn                            <span class="number">69</span>:<span class="number">496</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdrr                           <span class="number">134</span>:<span class="number">336</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdrv                           <span class="number">134</span>:<span class="number">400</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdrt                           <span class="number">134</span>:<span class="number">368</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdva                            <span class="number">67</span>:<span class="number">704</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sduz                            <span class="number">67</span>:<span class="number">688</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sduy                            <span class="number">67</span>:<span class="number">672</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdaap                          <span class="number">132</span>:<span class="number">720</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdaao                          <span class="number">132</span>:<span class="number">704</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdaan                          <span class="number">132</span>:<span class="number">688</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdagb                           <span class="number">69</span>:<span class="number">944</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdagc                           <span class="number">69</span>:<span class="number">960</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdagd                           <span class="number">69</span>:<span class="number">976</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdalp                          <span class="number">134</span>:<span class="number">944</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdalr                          <span class="number">134</span>:<span class="number">976</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdalq                          <span class="number">134</span>:<span class="number">960</span>   <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdard                           <span class="number">71</span>:<span class="number">1200</span>  <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdare                           <span class="number">71</span>:<span class="number">1216</span>  <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">sdarf                           <span class="number">71</span>:<span class="number">1232</span>  <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">VxDMP74                        <span class="number">201</span>:<span class="number">1168</span>  <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">VxDMP78                        <span class="number">201</span>:<span class="number">1232</span>  <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk </span><br><span class="line">VxDMP83                        <span class="number">201</span>:<span class="number">1312</span>  <span class="number">0</span>     <span class="number">1</span>G  <span class="number">0</span> disk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看路径对应关系</span></span><br><span class="line">qrydb1@NH/root<span class="comment">#vxdmpadm getsubpaths | grep sdma</span></span><br><span class="line">sdma         ENABLED    SECONDARY    huawei-xsg10_71 huawei-xsg10 c2                -</span><br><span class="line">qrydb1@NH/root<span class="comment">#vxdmpadm getsubpaths | grep sdme</span></span><br><span class="line">sdme         ENABLED(A) PRIMARY      huawei-xsg10_73 huawei-xsg10 c2                -</span><br><span class="line">qrydb1@NH/root<span class="comment">#vxdmpadm getsubpaths | grep sdmc</span></span><br><span class="line">sdmc         ENABLED    SECONDARY    huawei-xsg10_72 huawei-xsg10 c2                -</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vxdg init vxfencoorddg vxfencoorddg01=huawei-xsg10_71 vxfencoorddg02=huawei-xsg10_72 vxfencoorddg03=huawei-xsg10_73</span><br><span class="line">vxdg -g vxfencoorddg <span class="built_in">set</span> coordinator=on</span><br><span class="line">vxdg deport vxfencoorddg</span><br><span class="line">vxdg -t import vxfencoorddg</span><br><span class="line">vxdg deport vxfencoorddg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试仲裁盘可用性</span></span><br><span class="line">/opt/VRTSvcs/vxfen/bin/vxfentsthdw -g vxfencoorddg</span><br><span class="line"></span><br><span class="line">Do you still want to <span class="built_in">continue</span> : [y/n] (default: n) y</span><br><span class="line"></span><br><span class="line">Enter the first node of the cluster:</span><br><span class="line">qrydb1</span><br><span class="line">Enter the second node of the cluster:</span><br><span class="line">qrydb2</span><br><span class="line"></span><br><span class="line">ALL tests on the disk /dev/vx/rdmp/huawei-xsg10_73 have PASSED.</span><br><span class="line">The disk is now ready to be configured <span class="keyword">for</span> I/O Fencing on node qrydb1.</span><br><span class="line"></span><br><span class="line">ALL tests on the disk /dev/vx/rdmp/huawei-xsg10_73 have PASSED.</span><br><span class="line">The disk is now ready to be configured <span class="keyword">for</span> I/O Fencing on node qrydb2.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置I/O Fencing</span></span><br><span class="line"><span class="built_in">cd</span> /opt/VRTS/install</span><br><span class="line">./installer -fencing</span><br><span class="line"></span><br><span class="line">Enter the name of one system <span class="keyword">in</span> the VCS cluster <span class="keyword">for</span> <span class="built_in">which</span> you would like to configure I/O fencing: qrydb1 qrydb2</span><br><span class="line"></span><br><span class="line">Cluster information verification:</span><br><span class="line"></span><br><span class="line">    Cluster Name: qrydb_cluster</span><br><span class="line"></span><br><span class="line">    Cluster ID Number: <span class="number">4142</span></span><br><span class="line"></span><br><span class="line">    Systems: qrydb1 qrydb2</span><br><span class="line"></span><br><span class="line">Would you like to configure I/O fencing on the cluster? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">Fencing configuration</span><br><span class="line">     <span class="number">1</span>)  Configure Coordination Point client based fencing</span><br><span class="line">     <span class="number">2</span>)  Configure disk based fencing</span><br><span class="line">     <span class="number">3</span>)  Configure fencing <span class="keyword">in</span> disabled mode</span><br><span class="line"></span><br><span class="line">Select the fencing mechanism to be configured <span class="keyword">in</span> this Application Cluster: [<span class="number">1</span>-<span class="number">3</span>,q,?] <span class="number">2</span></span><br><span class="line"></span><br><span class="line">This I/O fencing configuration option requires a restart of VCS. Installer will stop VCS at a later stage <span class="keyword">in</span> this run. Note that the service groups will be online only on the systems that are <span class="keyword">in</span> the <span class="string">'AutoStartList'</span> after </span><br><span class="line">restarting VCS. Do you want to <span class="built_in">continue</span>? [y,n,q,b,?] y</span><br><span class="line"></span><br><span class="line">Do you have SCSI3 PR enabled disks? [y,n,q,b,?] (y) </span><br><span class="line"></span><br><span class="line">Select one of the options below <span class="keyword">for</span> fencing disk group:</span><br><span class="line">     <span class="number">1</span>)  Create a new disk group</span><br><span class="line">     <span class="number">2</span>)  Using an existing disk group</span><br><span class="line">     b)  Back to previous menu</span><br><span class="line"></span><br><span class="line">Enter the choice <span class="keyword">for</span> a disk group: [<span class="number">1</span>-<span class="number">2</span>,b,q] <span class="number">2</span></span><br><span class="line">     <span class="number">1</span>)  vxfencoorddg(coordinator)</span><br><span class="line">     b)  Back to previous menu</span><br><span class="line"></span><br><span class="line">Select one disk group as fencing disk group: [<span class="number">1</span>-<span class="number">1</span>,b,q] <span class="number">1</span></span><br><span class="line"></span><br><span class="line">As per the <span class="string">'vxfentsthdw'</span> run you performed, <span class="keyword">do</span> you want to <span class="built_in">continue</span> with this disk group? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">I/O fencing configuration verification</span><br><span class="line"></span><br><span class="line">    Disk Group: vxfencoorddg</span><br><span class="line"></span><br><span class="line">    Fencing disk policy: dmp</span><br><span class="line"></span><br><span class="line">Is this information correct? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">HAD and all the applications will be stopped. Do you want to stop VCS and all its applications and apply fencing configuration on all nodes at this point? [y,n,q] (y) </span><br><span class="line"></span><br><span class="line">Do you want to configure Coordination Point Agent on the client cluster? [y,n,q] (y) </span><br><span class="line">Enter a non-existing name <span class="keyword">for</span> the service group <span class="keyword">for</span> Coordination Point Agent: [b] (vxfen) </span><br><span class="line"></span><br><span class="line">Do you want to <span class="built_in">set</span> LevelTwoMonitorFreq? [y,n,q] (y) </span><br><span class="line">Enter the value of the LevelTwoMonitorFreq attribute(<span class="number">0</span> to <span class="number">65535</span>): [b,q,?] (<span class="number">5</span>) </span><br><span class="line"></span><br><span class="line">Would you like to view the summary file? [y,n,q] (n)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置完成后会在HA中多一个vxfen的服务组</span></span><br><span class="line">qrydb1@NH/opt/VRTS/install<span class="comment">#hastatus -sum</span></span><br><span class="line"></span><br><span class="line">-- SYSTEM STATE</span><br><span class="line">-- System               State                Frozen              </span><br><span class="line"></span><br><span class="line">A  qrydb1               RUNNING              <span class="number">0</span>                    </span><br><span class="line">A  qrydb2               RUNNING              <span class="number">0</span>                    </span><br><span class="line"></span><br><span class="line">-- GROUP STATE</span><br><span class="line">-- Group           System               Probed     AutoDisabled    State          </span><br><span class="line"></span><br><span class="line">B  cvm             qrydb1               Y          N               ONLINE         </span><br><span class="line">B  cvm             qrydb2               Y          N               ONLINE         </span><br><span class="line">B  vxfen           qrydb1               Y          N               ONLINE         </span><br><span class="line">B  vxfen           qrydb2               Y          N               ONLINE</span><br></pre></td></tr></table></figure>
<h2 id="创建磁盘组、卷和文件系统"><a href="#创建磁盘组、卷和文件系统" class="headerlink" title="创建磁盘组、卷和文件系统"></a>创建磁盘组、卷和文件系统</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式化数据磁盘（集群中的一个节点操作）</span></span><br><span class="line">vxdisk list | grep -i huawei|awk <span class="string">'&#123;print "/etc/vx/bin/vxdisksetup -i "$1&#125;'</span>|sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># /etc/vx/bin/vxdisksetup -i huawei-xsg11_76</span></span><br><span class="line"><span class="comment"># /etc/vx/bin/vxdisksetup -i huawei-xsg11_77</span></span><br><span class="line"><span class="comment"># /etc/vx/bin/vxdisksetup -i huawei-xsg11_78</span></span><br><span class="line"><span class="comment"># /etc/vx/bin/vxdisksetup -i huawei…….</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建磁盘组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 技巧，利用excel统计磁盘和容量的对应关系</span></span><br><span class="line">vxdisk list</span><br><span class="line">vxdisk list | grep huawei | awk <span class="string">'&#123;print "/sbin/vxdisk list " $1&#125;'</span> | sh | grep public</span><br><span class="line"><span class="comment"># 删除dg</span></span><br><span class="line">vxdg destroy [dgname]</span><br><span class="line"></span><br><span class="line"><span class="comment">#ocrvotedg（每个盘10G）</span></span><br><span class="line">vxdg <span class="operator">-s</span> init ocrvotedg ocrvotedg01=huawei-xsg10_74</span><br><span class="line">vxdg -g ocrvotedg adddisk ocrvotedg02=huawei-xsg10_75 </span><br><span class="line">vxdg -g ocrvotedg adddisk ocrvotedg03=huawei-xsg10_76 </span><br><span class="line">vxdg -g ocrvotedg adddisk ocrvotedg01_1=huawei-xsg11_64</span><br><span class="line">vxdg -g ocrvotedg adddisk ocrvotedg02_1=huawei-xsg11_65</span><br><span class="line">vxdg -g ocrvotedg adddisk ocrvotedg03_1=huawei-xsg11_66</span><br><span class="line">vxdg -g ocrvotedg <span class="built_in">set</span> diskdetpolicy=<span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#qrydbbkdg（rmanbk每个盘500G）</span></span><br><span class="line">vxdg init qrydbbkdg qrydbbkdg01=huawei-xsg10_66</span><br><span class="line">vxdg -g qrydbbkdg adddisk qrydbbkdg02=huawei-xsg10_67</span><br><span class="line">vxdg -g qrydbbkdg adddisk qrydbbkdg03=huawei-xsg10_68</span><br><span class="line">vxdg -g qrydbbkdg adddisk qrydbbkdg04=huawei-xsg10_69</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#qrydbdumpdg(每个盘500G)</span></span><br><span class="line">vxdg init qrydbdumpdg qrydbdumpdg01=huawei-xsg10_64</span><br><span class="line">vxdg -g qrydbdumpdg adddisk qrydbdumpdg02=huawei-xsg10_65</span><br><span class="line"></span><br><span class="line"><span class="comment">#qrydbdsgdg（每个盘500G）</span></span><br><span class="line">vxdg init qrydbdsgdg qrydbdsgdg01=huawei-xsg10_70</span><br><span class="line"></span><br><span class="line"><span class="comment">#qrydbdatadg（每个盘200G）</span></span><br><span class="line">vxdg <span class="operator">-s</span> init qrydbdatadg qrydbdatadg01=huawei-xsg10_0</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg02=huawei-xsg10_1</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg02=huawei-xsg10_1</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg03=huawei-xsg10_2</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg04=huawei-xsg10_3</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg05=huawei-xsg10_4</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg06=huawei-xsg10_5</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg07=huawei-xsg10_6</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg08=huawei-xsg10_7</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg09=huawei-xsg10_8</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg10=huawei-xsg10_9</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg11=huawei-xsg10_10</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg12=huawei-xsg10_11</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg13=huawei-xsg10_12</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg14=huawei-xsg10_13</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg15=huawei-xsg10_14</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg16=huawei-xsg10_15</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg17=huawei-xsg10_16</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg18=huawei-xsg10_17</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg19=huawei-xsg10_18</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg20=huawei-xsg10_19</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg21=huawei-xsg10_20</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg22=huawei-xsg10_21</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg23=huawei-xsg10_22</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg24=huawei-xsg10_23</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg25=huawei-xsg10_24</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg26=huawei-xsg10_25</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg27=huawei-xsg10_26</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg28=huawei-xsg10_27</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg29=huawei-xsg10_28</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg30=huawei-xsg10_29</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg31=huawei-xsg10_30</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg32=huawei-xsg10_31</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg33=huawei-xsg10_32</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg34=huawei-xsg10_33</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg35=huawei-xsg10_34</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg36=huawei-xsg10_35</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg37=huawei-xsg10_36</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg38=huawei-xsg10_37</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg39=huawei-xsg10_38</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg40=huawei-xsg10_39</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg01_1=huawei-xsg11_0</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg02_1=huawei-xsg11_1</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg02_1=huawei-xsg11_1</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg03_1=huawei-xsg11_2</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg04_1=huawei-xsg11_3</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg05_1=huawei-xsg11_4</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg06_1=huawei-xsg11_5</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg07_1=huawei-xsg11_6</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg08_1=huawei-xsg11_7</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg09_1=huawei-xsg11_8</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg10_1=huawei-xsg11_9</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg11_1=huawei-xsg11_10</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg12_1=huawei-xsg11_11</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg13_1=huawei-xsg11_12</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg14_1=huawei-xsg11_13</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg15_1=huawei-xsg11_14</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg16_1=huawei-xsg11_15</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg17_1=huawei-xsg11_16</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg18_1=huawei-xsg11_17</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg19_1=huawei-xsg11_18</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg20_1=huawei-xsg11_19</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg21_1=huawei-xsg11_20</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg22_1=huawei-xsg11_21</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg23_1=huawei-xsg11_22</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg24_1=huawei-xsg11_23</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg25_1=huawei-xsg11_24</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg26_1=huawei-xsg11_25</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg27_1=huawei-xsg11_26</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg28_1=huawei-xsg11_27</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg29_1=huawei-xsg11_28</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg30_1=huawei-xsg11_29</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg31_1=huawei-xsg11_30</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg32_1=huawei-xsg11_31</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg33_1=huawei-xsg11_32</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg34_1=huawei-xsg11_33</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg35_1=huawei-xsg11_34</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg36_1=huawei-xsg11_35</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg37_1=huawei-xsg11_36</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg38_1=huawei-xsg11_37</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg39_1=huawei-xsg11_38</span><br><span class="line">vxdg -g qrydbdatadg adddisk qrydbdatadg40_1=huawei-xsg11_39</span><br><span class="line">vxdg -g qrydbdatadg <span class="built_in">set</span> diskdetpolicy=<span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#qrydbhistbizdg（每个盘500G）</span></span><br><span class="line">vxdg <span class="operator">-s</span> init qrydbhistbizdg qrydbhistbizdg01=huawei-xsg10_40</span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg02=huawei-xsg10_41 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg03=huawei-xsg10_42 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg04=huawei-xsg10_43 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg05=huawei-xsg10_44 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg06=huawei-xsg10_45 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg07=huawei-xsg10_46 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg08=huawei-xsg10_47 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg09=huawei-xsg10_48 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg10=huawei-xsg10_49 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg11=huawei-xsg10_50 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg12=huawei-xsg10_51 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg01_1=huawei-xsg11_40 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg02_1=huawei-xsg11_41 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg03_1=huawei-xsg11_42 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg04_1=huawei-xsg11_43 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg05_1=huawei-xsg11_44 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg06_1=huawei-xsg11_45 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg07_1=huawei-xsg11_46 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg08_1=huawei-xsg11_47 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg09_1=huawei-xsg11_48 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg10_1=huawei-xsg11_49 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg11_1=huawei-xsg11_50 </span><br><span class="line">vxdg -g qrydbhistbizdg adddisk qrydbhistbizdg12_1=huawei-xsg11_51 </span><br><span class="line">vxdg -g qrydbhistbizdg <span class="built_in">set</span> diskdetpolicy=<span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#qrydbhistriskdg（每个盘500G）</span></span><br><span class="line">vxdg <span class="operator">-s</span> init qrydbhistriskdg qrydbhistriskdg01=huawei-xsg10_52</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg02=huawei-xsg10_53</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg03=huawei-xsg10_54</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg04=huawei-xsg10_55</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg05=huawei-xsg10_56</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg06=huawei-xsg10_57</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg07=huawei-xsg10_58</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg08=huawei-xsg10_59</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg09=huawei-xsg10_60</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg10=huawei-xsg10_61</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg11=huawei-xsg10_62</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg12=huawei-xsg10_63</span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg01_1=huawei-xsg11_52 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg02_1=huawei-xsg11_53 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg03_1=huawei-xsg11_54 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg04_1=huawei-xsg11_55 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg05_1=huawei-xsg11_56 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg06_1=huawei-xsg11_57 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg07_1=huawei-xsg11_58 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg08_1=huawei-xsg11_59 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg09_1=huawei-xsg11_60 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg10_1=huawei-xsg11_61 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg11_1=huawei-xsg11_62 </span><br><span class="line">vxdg -g qrydbhistriskdg adddisk qrydbhistriskdg12_1=huawei-xsg11_63 </span><br><span class="line">vxdg -g qrydbhistriskdg <span class="built_in">set</span> diskdetpolicy=<span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">qrydb1@NH/root<span class="comment">#vxdisk list</span></span><br><span class="line">DEVICE       TYPE            DISK         GROUP        STATUS</span><br><span class="line">disk_0       auto:LVM        -            -            online invalid</span><br><span class="line">huawei-xsg10_0 auto:cdsdisk    qrydbdatadg01  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_1 auto:cdsdisk    qrydbdatadg02  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_2 auto:cdsdisk    qrydbdatadg03  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_3 auto:cdsdisk    qrydbdatadg04  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_4 auto:cdsdisk    qrydbdatadg05  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_5 auto:cdsdisk    qrydbdatadg06  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_6 auto:cdsdisk    qrydbdatadg07  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_7 auto:cdsdisk    qrydbdatadg08  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_8 auto:cdsdisk    qrydbdatadg09  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_9 auto:cdsdisk    qrydbdatadg10  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_10 auto:cdsdisk    qrydbdatadg11  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_11 auto:cdsdisk    qrydbdatadg12  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_12 auto:cdsdisk    qrydbdatadg13  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_13 auto:cdsdisk    qrydbdatadg14  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_14 auto:cdsdisk    qrydbdatadg15  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_15 auto:cdsdisk    qrydbdatadg16  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_16 auto:cdsdisk    qrydbdatadg17  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_17 auto:cdsdisk    qrydbdatadg18  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_18 auto:cdsdisk    qrydbdatadg19  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_19 auto:cdsdisk    qrydbdatadg20  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_20 auto:cdsdisk    qrydbdatadg21  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_21 auto:cdsdisk    qrydbdatadg22  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_22 auto:cdsdisk    qrydbdatadg23  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_23 auto:cdsdisk    qrydbdatadg24  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_24 auto:cdsdisk    qrydbdatadg25  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_25 auto:cdsdisk    qrydbdatadg26  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_26 auto:cdsdisk    qrydbdatadg27  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_27 auto:cdsdisk    qrydbdatadg28  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_28 auto:cdsdisk    qrydbdatadg29  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_29 auto:cdsdisk    qrydbdatadg30  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_30 auto:cdsdisk    qrydbdatadg31  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_31 auto:cdsdisk    qrydbdatadg32  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_32 auto:cdsdisk    qrydbdatadg33  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_33 auto:cdsdisk    qrydbdatadg34  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_34 auto:cdsdisk    qrydbdatadg35  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_35 auto:cdsdisk    qrydbdatadg36  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_36 auto:cdsdisk    qrydbdatadg37  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_37 auto:cdsdisk    qrydbdatadg38  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_38 auto:cdsdisk    qrydbdatadg39  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_39 auto:cdsdisk    qrydbdatadg40  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg10_40 auto:cdsdisk    qrydbhistbizdg01  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_41 auto:cdsdisk    qrydbhistbizdg02  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_42 auto:cdsdisk    qrydbhistbizdg03  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_43 auto:cdsdisk    qrydbhistbizdg04  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_44 auto:cdsdisk    qrydbhistbizdg05  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_45 auto:cdsdisk    qrydbhistbizdg06  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_46 auto:cdsdisk    qrydbhistbizdg07  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_47 auto:cdsdisk    qrydbhistbizdg08  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_48 auto:cdsdisk    qrydbhistbizdg09  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_49 auto:cdsdisk    qrydbhistbizdg10  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_50 auto:cdsdisk    qrydbhistbizdg11  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_51 auto:cdsdisk    qrydbhistbizdg12  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg10_52 auto:cdsdisk    qrydbhistriskdg01  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_53 auto:cdsdisk    qrydbhistriskdg02  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_54 auto:cdsdisk    qrydbhistriskdg03  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_55 auto:cdsdisk    qrydbhistriskdg04  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_56 auto:cdsdisk    qrydbhistriskdg05  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_57 auto:cdsdisk    qrydbhistriskdg06  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_58 auto:cdsdisk    qrydbhistriskdg07  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_59 auto:cdsdisk    qrydbhistriskdg08  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_60 auto:cdsdisk    qrydbhistriskdg09  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_61 auto:cdsdisk    qrydbhistriskdg10  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_62 auto:cdsdisk    qrydbhistriskdg11  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_63 auto:cdsdisk    qrydbhistriskdg12  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg10_64 auto:cdsdisk    qrydbdumpdg01  qrydbdumpdg  online</span><br><span class="line">huawei-xsg10_65 auto:cdsdisk    qrydbdumpdg02  qrydbdumpdg  online</span><br><span class="line">huawei-xsg10_66 auto:cdsdisk    qrydbbkdg01  qrydbbkdg    online</span><br><span class="line">huawei-xsg10_67 auto:cdsdisk    qrydbbkdg02  qrydbbkdg    online</span><br><span class="line">huawei-xsg10_68 auto:cdsdisk    qrydbbkdg03  qrydbbkdg    online</span><br><span class="line">huawei-xsg10_69 auto:cdsdisk    qrydbbkdg04  qrydbbkdg    online</span><br><span class="line">huawei-xsg10_70 auto:cdsdisk    qrydbdsgdg01  qrydbdsgdg   online</span><br><span class="line">huawei-xsg10_71 auto:cdsdisk    -            -            online</span><br><span class="line">huawei-xsg10_72 auto:cdsdisk    -            -            online</span><br><span class="line">huawei-xsg10_73 auto:cdsdisk    -            -            online</span><br><span class="line">huawei-xsg10_74 auto:cdsdisk    ocrvotedg01  ocrvotedg    online shared</span><br><span class="line">huawei-xsg10_75 auto:cdsdisk    ocrvotedg02  ocrvotedg    online shared</span><br><span class="line">huawei-xsg10_76 auto:cdsdisk    ocrvotedg03  ocrvotedg    online shared</span><br><span class="line">huawei-xsg11_0 auto:cdsdisk    qrydbdatadg01_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_1 auto:cdsdisk    qrydbdatadg02_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_2 auto:cdsdisk    qrydbdatadg03_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_3 auto:cdsdisk    qrydbdatadg04_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_4 auto:cdsdisk    qrydbdatadg05_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_5 auto:cdsdisk    qrydbdatadg06_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_6 auto:cdsdisk    qrydbdatadg07_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_7 auto:cdsdisk    qrydbdatadg08_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_8 auto:cdsdisk    qrydbdatadg09_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_9 auto:cdsdisk    qrydbdatadg10_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_10 auto:cdsdisk    qrydbdatadg11_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_11 auto:cdsdisk    qrydbdatadg12_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_12 auto:cdsdisk    qrydbdatadg13_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_13 auto:cdsdisk    qrydbdatadg14_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_14 auto:cdsdisk    qrydbdatadg15_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_15 auto:cdsdisk    qrydbdatadg16_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_16 auto:cdsdisk    qrydbdatadg17_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_17 auto:cdsdisk    qrydbdatadg18_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_18 auto:cdsdisk    qrydbdatadg19_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_19 auto:cdsdisk    qrydbdatadg20_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_20 auto:cdsdisk    qrydbdatadg21_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_21 auto:cdsdisk    qrydbdatadg22_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_22 auto:cdsdisk    qrydbdatadg23_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_23 auto:cdsdisk    qrydbdatadg24_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_24 auto:cdsdisk    qrydbdatadg25_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_25 auto:cdsdisk    qrydbdatadg26_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_26 auto:cdsdisk    qrydbdatadg27_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_27 auto:cdsdisk    qrydbdatadg28_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_28 auto:cdsdisk    qrydbdatadg29_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_29 auto:cdsdisk    qrydbdatadg30_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_30 auto:cdsdisk    qrydbdatadg31_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_31 auto:cdsdisk    qrydbdatadg32_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_32 auto:cdsdisk    qrydbdatadg33_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_33 auto:cdsdisk    qrydbdatadg34_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_34 auto:cdsdisk    qrydbdatadg35_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_35 auto:cdsdisk    qrydbdatadg36_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_36 auto:cdsdisk    qrydbdatadg37_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_37 auto:cdsdisk    qrydbdatadg38_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_38 auto:cdsdisk    qrydbdatadg39_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_39 auto:cdsdisk    qrydbdatadg40_1  qrydbdatadg  online shared</span><br><span class="line">huawei-xsg11_40 auto:cdsdisk    qrydbhistbizdg01_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_41 auto:cdsdisk    qrydbhistbizdg02_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_42 auto:cdsdisk    qrydbhistbizdg03_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_43 auto:cdsdisk    qrydbhistbizdg04_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_44 auto:cdsdisk    qrydbhistbizdg05_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_45 auto:cdsdisk    qrydbhistbizdg06_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_46 auto:cdsdisk    qrydbhistbizdg07_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_47 auto:cdsdisk    qrydbhistbizdg08_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_48 auto:cdsdisk    qrydbhistbizdg09_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_49 auto:cdsdisk    qrydbhistbizdg10_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_50 auto:cdsdisk    qrydbhistbizdg11_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_51 auto:cdsdisk    qrydbhistbizdg12_1  qrydbhistbizdg online shared</span><br><span class="line">huawei-xsg11_52 auto:cdsdisk    qrydbhistriskdg01_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_53 auto:cdsdisk    qrydbhistriskdg02_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_54 auto:cdsdisk    qrydbhistriskdg03_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_55 auto:cdsdisk    qrydbhistriskdg04_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_56 auto:cdsdisk    qrydbhistriskdg05_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_57 auto:cdsdisk    qrydbhistriskdg06_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_58 auto:cdsdisk    qrydbhistriskdg07_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_59 auto:cdsdisk    qrydbhistriskdg08_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_60 auto:cdsdisk    qrydbhistriskdg09_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_61 auto:cdsdisk    qrydbhistriskdg10_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_62 auto:cdsdisk    qrydbhistriskdg11_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_63 auto:cdsdisk    qrydbhistriskdg12_1  qrydbhistriskdg online shared</span><br><span class="line">huawei-xsg11_64 auto:cdsdisk    ocrvotedg01_1  ocrvotedg    online shared</span><br><span class="line">huawei-xsg11_65 auto:cdsdisk    ocrvotedg02_1  ocrvotedg    online shared</span><br><span class="line">huawei-xsg11_66 auto:cdsdisk    ocrvotedg03_1  ocrvotedg    online shared</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建卷</span></span><br><span class="line"><span class="comment"># ocrvotedg</span></span><br><span class="line">vxassist -g ocrvotedg make ocrvotevol01 <span class="number">19456000</span> layout=mirror ocrvotedg01 ocrvotedg01_1</span><br><span class="line">vxassist -g ocrvotedg make ocrvotevol02 <span class="number">19456000</span> ocrvotedg02</span><br><span class="line">vxassist -g ocrvotedg make ocrvotevol03 <span class="number">19456000</span> ocrvotedg02_1</span><br><span class="line">vxsnap -g ocrvotedg prepare ocrvotevol01 alloc=ocrvotedg01,ocrvotedg01_1</span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbbkdg</span></span><br><span class="line">vxassist -g qrydbbkdg make qrydbbkvol <span class="number">1998</span>G layout=stripe ncol=<span class="number">2</span> stripeunit=<span class="number">256</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbdumpdg</span></span><br><span class="line">vxassist -g qrydbdumpdg make qrydbdumpvol <span class="number">998</span>G layout=stripe ncol=<span class="number">2</span> stripeunit=<span class="number">256</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbdsgdg</span></span><br><span class="line">vxassist -g qrydbdsgdg make qrydbdsgvol <span class="number">1048469696</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbdatadg</span></span><br><span class="line">qrydb1@NH/root<span class="comment">#vxassist -g qrydbdatadg maxsize layout=mirror-stripe ncol=4 stripeunit=256 mirror=enclr</span></span><br><span class="line">Maximum volume size: <span class="number">16773924864</span> (<span class="number">8190393</span>Mb)</span><br><span class="line"></span><br><span class="line">vxassist -g qrydbdatadg make qrydbdatavol <span class="number">7800</span>G layout=mirror-stripe ncol=<span class="number">4</span> stripeunit=<span class="number">256</span> mirror=enclr</span><br><span class="line">vxsnap -g qrydbdatadg prepare qrydbdatavol alloc=qrydbdatadg40,qrydbdatadg40_1</span><br><span class="line">vxvol -g qrydbdatadg rdpol round qrydbdatavol</span><br><span class="line">vxvol -g qrydbdatadg rdpol round qrydbdatavol_dcl</span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbhistbizdg</span></span><br><span class="line">qrydb1@NH/root<span class="comment">#vxassist -g qrydbhistbizdg maxsize layout=mirror-stripe ncol=4 stripeunit=256 mirror=enclr</span></span><br><span class="line">Maximum volume size: <span class="number">16773924864</span> (<span class="number">8190393</span>Mb)</span><br><span class="line"></span><br><span class="line">vxassist -g qrydbhistbizdg make qrydbhistbizvol <span class="number">5800</span>G layout=mirror-stripe ncol=<span class="number">4</span> stripeunit=<span class="number">256</span> mirror=enclr</span><br><span class="line">vxsnap -g qrydbhistbizdg prepare qrydbhistbizvol alloc=qrydbhistbizdg12,qrydbhistbizdg12_1</span><br><span class="line">vxvol -g qrydbhistbizdg rdpol round qrydbhistbizvol</span><br><span class="line">vxvol -g qrydbhistbizdg rdpol round qrydbhistbizvol_dcl</span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbhistriskdg</span></span><br><span class="line">qrydb1@NH/root<span class="comment">#vxassist -g qrydbhistriskdg maxsize layout=mirror-stripe ncol=4 stripeunit=256 mirror=enclr</span></span><br><span class="line">Maximum volume size: <span class="number">16773924864</span> (<span class="number">8190393</span>Mb)</span><br><span class="line"></span><br><span class="line">vxassist -g qrydbhistriskdg make qrydbhistriskvol <span class="number">5800</span>G layout=mirror-stripe ncol=<span class="number">4</span> stripeunit=<span class="number">256</span> mirror=enclr</span><br><span class="line">vxsnap -g qrydbhistriskdg prepare qrydbhistriskvol alloc=qrydbhistriskdg12,qrydbhistriskdg12_1</span><br><span class="line">vxvol -g qrydbhistriskdg rdpol round qrydbhistriskvol</span><br><span class="line">vxvol -g qrydbhistriskdg rdpol round qrydbhistriskvol_dcl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建文件系统</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ocrvotedg</span></span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/ocrvotedg/ocrvotevol01</span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/ocrvotedg/ocrvotevol02</span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/ocrvotedg/ocrvotevol03</span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbbkdg</span></span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/qrydbbkdg/qrydbbkvol </span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbdumpdg</span></span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/qrydbdumpdg/qrydbdumpvol </span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbdsgdg</span></span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/qrydbdsgdg/qrydbdsgvol </span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbdatadg</span></span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/qrydbdatadg/qrydbdatavol </span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbhistbizdg</span></span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/qrydbhistbizdg/qrydbhistbizvol </span><br><span class="line"></span><br><span class="line"><span class="comment"># qrydbhistriskdg</span></span><br><span class="line">mkfs -t vxfs -o bsize=<span class="number">8192</span>,largefiles /dev/vx/rdsk/qrydbhistriskdg/qrydbhistriskvol </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建挂载点(两个节点操作)</span></span><br><span class="line">mkdir -p /cffex/ora_crs1</span><br><span class="line">mkdir -p /cffex/ora_crs2</span><br><span class="line">mkdir -p /cffex/ora_crs3</span><br><span class="line">mkdir -p /cffex/ora_data</span><br><span class="line">mkdir /dsg</span><br><span class="line">mkdir /rmanbk</span><br><span class="line">mkdir -p /cffex/dump</span><br><span class="line">mkdir -p /cffex/ora_data/histbiz</span><br><span class="line">mkdir -p /cffex/ora_data/histrisk</span><br></pre></td></tr></table></figure>
<h2 id="配置main-cf"><a href="#配置main-cf" class="headerlink" title="配置main.cf"></a>配置main.cf</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在hastop -all的情况下，对集群所有节点的/etc/VRTSvcs/conf/config/main.cf进行修改，添加修改类似如下配置</span></span><br><span class="line">hastop -all</span><br><span class="line"><span class="comment">#vim /etc/VRTSvcs/conf/config/main.cf</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过图形化界面配置</span></span><br><span class="line">yum install -y libXext.i686 libXrender.i686 libXtst.i686</span><br><span class="line"><span class="built_in">export</span> DISPLAY=<span class="number">172.25</span>.<span class="number">243.202</span>:<span class="number">0.0</span></span><br><span class="line"><span class="built_in">cd</span> /opt/VRTSvcs/bin</span><br><span class="line">./hagui</span><br><span class="line"></span><br><span class="line"><span class="number">172.25</span>.<span class="number">242.125</span></span><br><span class="line">admin/password</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改2处配置</span></span><br><span class="line">MountPoint：/dev/vx/dsk/</span><br><span class="line">MountOps：convosync=direct,mincache=direct,cluster</span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      记录 infoscale 7.0.1 安装部署心得
    
    </summary>
    
      <category term="软件 | Soft" scheme="https://wsgzao.github.io/categories/%E8%BD%AF%E4%BB%B6-Soft/"/>
    
    
  </entry>
  
  <entry>
    <title>使用tftpd32自动化网络安装esxi6.0u2和rhel6.7实践</title>
    <link href="https://wsgzao.github.io/post/tftpd32/"/>
    <id>https://wsgzao.github.io/post/tftpd32/</id>
    <published>2017-01-19T06:59:49.000Z</published>
    <updated>2017-01-19T09:33:12.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在tftp那篇文章中我提到过一般网络安装基于Linux下PXE+TFTP+DHCP+(HTTP/FTP/NFS)来实现，然而在真实的生产环境中分别测试了Cloudboot和Cobbler，面对大量型号和配置不一样的物理机并不能满足实际需求。最后采用Windows笔记本+交换机+tftpd32+kickstart来灵活应对esxi6和rhel6.7的自动化装机，为了不依赖自动化光盘安装的低效懒人模式，中间还是踩了不少的坑。个人觉得装机并没有孰优孰劣的说法，而且未来是属于分布式存储+万兆交换机+类似VMware/OpenStack的模式，人肉装机的时代已经离我们渐行渐远。</p>
<blockquote>
<p>利用tftpd32快速搭建自动化网络搞机平台</p>
</blockquote>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2017年01月19日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/tftpd32/" target="_blank" rel="external">https://wsgzao.github.io/post/tftpd32/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Tftd32 - <a href="http://tftpd32.jounin.net/" target="_blank" rel="external">http://tftpd32.jounin.net/</a><br>Kickstart Generator - <a href="https://access.redhat.com/labsinfo/kickstartconfig" target="_blank" rel="external">https://access.redhat.com/labsinfo/kickstartconfig</a></p>
<hr>
<h2 id="3点建议"><a href="#3点建议" class="headerlink" title="3点建议"></a>3点建议</h2><ol>
<li>PXE只是网络安装的引导方式，自动化的核心配置文件始终依赖kickstart/autoyast/autounattend等</li>
<li>文章内提到的引导介质均提取自rhel6.7镜像文件<code>syslinux-nonlinux-4.04-3.el6.noarch.rpm</code></li>
<li>云霁科技的Cloudboot成熟度非常高，建议大家多参考其高质量的配置方案</li>
</ol>
<p>CloudBoot 云启装机平台(开源版) - <a href="http://www.idcos.com/products/cloudboot-open-source" target="_blank" rel="external">http://www.idcos.com/products/cloudboot-open-source</a></p>
<p><img src="https://ooo.0o0.ooo/2017/01/19/588083153cca3.jpg" alt=""><br><img src="https://ooo.0o0.ooo/2017/01/19/5880832627c41.jpg" alt=""><br><img src="https://ooo.0o0.ooo/2017/01/19/5880832f2bd2a.jpg" alt=""></p>
<h2 id="esxi"><a href="#esxi" class="headerlink" title="esxi"></a>esxi</h2><blockquote>
<p>tftpd32+esxi6.0u2+kickstart+hfs</p>
</blockquote>
<ol>
<li>Windows下关闭防火墙，设置IP地址为192.168.1.1/24</li>
<li>启动tftpd32参考上图所示配置，<code>Base Directory</code>目录选择实际定义的路径，如<code>tftpboot_esxi\</code></li>
<li>解压ESXi ISO至<code>tftpboot_esxi\</code>，修改BOOT.CFG添加kernelopt=ks=<a href="http://192.168.1.1/esxi6/KS.CFG" target="_blank" rel="external">http://192.168.1.1/esxi6/KS.CFG</a></li>
<li>将KS.CFG放入自定义目录，使用hfs加载</li>
<li>复制syslinux中的pxelinux.0到<code>tftpboot_esxi\</code></li>
<li>复制syslinux中的MENU.C32<code>替换</code>tftpboot_esxi`中的同名文件</li>
<li>创建<code>tftpboot_esxi\pxelinux.cfg\</code>目录，复制ESXi ISO文件中的ISOLINUX.CFG至该目录并改名为default</li>
<li>检查tftpd32服务启动正常，测试自动化网络安装esxi</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#BOOT.CFG</span></span><br><span class="line"></span><br><span class="line">bootstate=<span class="number">0</span></span><br><span class="line">title=Loading ESXi installer</span><br><span class="line">timeout=<span class="number">5</span></span><br><span class="line">kernel=/tboot.b00</span><br><span class="line">kernelopt=ks=http://<span class="number">192.168</span>.<span class="number">1.1</span>/esxi6/KS.CFG</span><br><span class="line">modules=/b.b00 --- /jumpstrt.gz --- /useropts.gz --- /k.b00 --- /chardevs.b00 --- /a.b00 --- /user.b00 --- /uc_intel.b00 --- /uc_amd.b00 --- /sb.v00 --- /s.v00 --- /scsi_mpt.v00 --- /net_tg3.v00 --- /elxnet.v00 --- /ima_be2i.v00 --- /lpfc.v00 --- /scsi_be2.v00 --- /amsHelpe.v00 --- /conrep.v00 --- /hpbootcf.v00 --- /hpe_buil.v00 --- /hpe_esxi.v00 --- /hpe_ilo.v00 --- /hpe_smx_.v00 --- /hponcfg.v00 --- /hpssacli.v00 --- /hptestev.v00 --- /char_hpc.v00 --- /hpnmi.v00 --- /scsi_hpd.v00 --- /scsi_hps.v00 --- /scsi_hpv.v00 --- /intelcim.v00 --- /net_i40e.v00 --- /net_igb.v00 --- /net_ixgb.v00 --- /nmlx4_co.v00 --- /nmlx4_en.v00 --- /misc_cni.v00 --- /net_bnx2.v00 --- /net_bnx2.v01 --- /net_cnic.v00 --- /net_nx_n.v00 --- /net_qlcn.v00 --- /qlnative.v00 --- /scsi_bfa.v00 --- /scsi_bnx.v00 --- /scsi_bnx.v01 --- /scsi_qla.v00 --- /mtip32xx.v00 --- /ata_pata.v00 --- /ata_pata.v01 --- /ata_pata.v02 --- /ata_pata.v03 --- /ata_pata.v04 --- /ata_pata.v05 --- /ata_pata.v06 --- /ata_pata.v07 --- /block_cc.v00 --- /ehci_ehc.v00 --- /emulex_e.v00 --- /weaselin.t00 --- /esx_dvfi.v00 --- /esx_ui.v00 --- /ima_qla4.v00 --- /ipmi_ipm.v00 --- /ipmi_ipm.v01 --- /ipmi_ipm.v02 --- /lsi_mr3.v00 --- /lsi_msgp.v00 --- /lsu_hp_h.v00 --- /lsu_lsi_.v00 --- /lsu_lsi_.v01 --- /lsu_lsi_.v02 --- /lsu_lsi_.v03 --- /lsu_lsi_.v04 --- /misc_dri.v00 --- /net_e100.v00 --- /net_e100.v01 --- /net_enic.v00 --- /net_forc.v00 --- /net_mlx4.v00 --- /net_mlx4.v01 --- /net_vmxn.v00 --- /nmlx4_rd.v00 --- /nvme.v00 --- /ohci_usb.v00 --- /rste.v00 --- /sata_ahc.v00 --- /sata_ata.v00 --- /sata_sat.v00 --- /sata_sat.v01 --- /sata_sat.v02 --- /sata_sat.v03 --- /sata_sat.v04 --- /scsi_aac.v00 --- /scsi_adp.v00 --- /scsi_aic.v00 --- /scsi_fni.v00 --- /scsi_ips.v00 --- /scsi_meg.v00 --- /scsi_meg.v01 --- /scsi_meg.v02 --- /scsi_mpt.v01 --- /scsi_mpt.v02 --- /uhci_usb.v00 --- /vsan.v00 --- /vsanheal.v00 --- /vsanmgmt.v00 --- /xhci_xhc.v00 --- /tools.t00 --- /nmst.v00 --- /xorg.v00 --- /imgdb.tgz --- /imgpayld.tgz</span><br><span class="line">build=</span><br><span class="line">updated=<span class="number">0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#default</span></span><br><span class="line"></span><br><span class="line">DEFAULT menu.c32</span><br><span class="line">MENU TITLE ESXi6.<span class="number">0</span>u2 Boot Menu</span><br><span class="line">NOHALT <span class="number">1</span></span><br><span class="line">PROMPT <span class="number">0</span></span><br><span class="line">TIMEOUT <span class="number">80</span></span><br><span class="line">LABEL install</span><br><span class="line">  KERNEL mboot.c32</span><br><span class="line">  APPEND -c boot.cfg</span><br><span class="line">  MENU LABEL ESXi6.<span class="number">0</span>u2 ^Installer</span><br><span class="line">LABEL hddboot</span><br><span class="line">  LOCALBOOT <span class="number">0</span>x80</span><br><span class="line">  MENU LABEL ^Boot from <span class="built_in">local</span> disk</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#KS.CFG</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Accept the VMware End User License Agreement</span></span><br><span class="line">vmaccepteula</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the root password for the DCUI and Tech Support Mode</span></span><br><span class="line">rootpw admin123</span><br><span class="line"><span class="comment"># Install on the first local disk available on machine</span></span><br><span class="line">install --firstdisk --overwritevmfs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the network to DHCP on the first network adapter</span></span><br><span class="line">network --bootproto=dhcp --device=vmnic0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reboot at the end</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">file://H:\<span class="number">01</span>_autoinstall\tftpboot_esxi  (<span class="number">3</span> folders, <span class="number">129</span> files, <span class="number">377.76</span> MB, <span class="number">379.93</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">│  .DISCINFO <span class="number">33</span> bytes</span><br><span class="line">│  A.B00 <span class="number">10.96</span> KB</span><br><span class="line">│  AMSHELPE.V00  <span class="number">1.32</span> MB</span><br><span class="line">│  ATA_PATA.V00  <span class="number">8.28</span> KB</span><br><span class="line">│  ATA_PATA.V01  <span class="number">6.22</span> KB</span><br><span class="line">│  ATA_PATA.V02  <span class="number">6.47</span> KB</span><br><span class="line">│  ATA_PATA.V03  <span class="number">7.22</span> KB</span><br><span class="line">│  ATA_PATA.V04  <span class="number">8.33</span> KB</span><br><span class="line">│  ATA_PATA.V05  <span class="number">7.01</span> KB</span><br><span class="line">│  ATA_PATA.V06  <span class="number">6.17</span> KB</span><br><span class="line">│  ATA_PATA.V07  <span class="number">7.59</span> KB</span><br><span class="line">│  B.B00 <span class="number">75.03</span> KB</span><br><span class="line">│  BLOCK_CC.V00  <span class="number">23.75</span> KB</span><br><span class="line">│  BOOT.CAT  <span class="number">512</span> bytes</span><br><span class="line">│  BOOT.CFG  <span class="number">2.07</span> KB</span><br><span class="line">│  CHAR_HPC.V00  <span class="number">9.93</span> KB</span><br><span class="line">│  CHARDEVS.B00  <span class="number">18.67</span> KB</span><br><span class="line">│  CONREP.V00    <span class="number">1.87</span> MB</span><br><span class="line">│  EFIBOOT.IMG   <span class="number">1.00</span> MB</span><br><span class="line">│  EHCI_EHC.V00  <span class="number">32.99</span> KB</span><br><span class="line">│  ELXNET.V00    <span class="number">132.88</span> KB</span><br><span class="line">│  EMULEX_E.V00  <span class="number">5.68</span> KB</span><br><span class="line">│  ESX_DVFI.V00  <span class="number">89.19</span> KB</span><br><span class="line">│  ESX_UI.V00    <span class="number">2.83</span> MB</span><br><span class="line">│  HPBOOTCF.V00  <span class="number">28.52</span> KB</span><br><span class="line">│  HPE_BUIL.V00  <span class="number">458</span> bytes</span><br><span class="line">│  HPE_ESXI.V00  <span class="number">1.51</span> MB</span><br><span class="line">│  HPE_ILO.V00   <span class="number">9.50</span> KB</span><br><span class="line">│  HPE_SMX_.V00  <span class="number">7.81</span> MB</span><br><span class="line">│  HPNMI.V00 <span class="number">4.20</span> KB</span><br><span class="line">│  HPONCFG.V00   <span class="number">96.62</span> KB</span><br><span class="line">│  HPSSACLI.V00  <span class="number">4.97</span> MB</span><br><span class="line">│  HPTESTEV.V00  <span class="number">6.29</span> KB</span><br><span class="line">│  IMA_BE2I.V00  <span class="number">489.49</span> KB</span><br><span class="line">│  IMA_QLA4.V00  <span class="number">359.39</span> KB</span><br><span class="line">│  IMGDB.TGZ <span class="number">62.35</span> KB</span><br><span class="line">│  IMGPAYLD.TGZ  <span class="number">3.94</span> MB</span><br><span class="line">│  INTELCIM.V00  <span class="number">94.06</span> KB</span><br><span class="line">│  IPMI_IPM.V00  <span class="number">9.38</span> KB</span><br><span class="line">│  IPMI_IPM.V01  <span class="number">22.99</span> KB</span><br><span class="line">│  IPMI_IPM.V02  <span class="number">27.91</span> KB</span><br><span class="line">│  ISOLINUX.BIN  <span class="number">14.00</span> KB</span><br><span class="line">│  ISOLINUX.CFG  <span class="number">231</span> bytes</span><br><span class="line">│  JUMPSTRT.GZ   <span class="number">20</span> bytes</span><br><span class="line">│  K.B00 <span class="number">3.26</span> MB</span><br><span class="line">│  KS.CFG    <span class="number">356</span> bytes</span><br><span class="line">│  LPFC.V00  <span class="number">555.77</span> KB</span><br><span class="line">│  LSI_MR3.V00   <span class="number">68.98</span> KB</span><br><span class="line">│  LSI_MSGP.V00  <span class="number">117.96</span> KB</span><br><span class="line">│  LSU_HP_H.V00  <span class="number">15.34</span> KB</span><br><span class="line">│  LSU_LSI_.V00  <span class="number">78.96</span> KB</span><br><span class="line">│  LSU_LSI_.V01  <span class="number">159.84</span> KB</span><br><span class="line">│  LSU_LSI_.V02  <span class="number">78.96</span> KB</span><br><span class="line">│  LSU_LSI_.V03  <span class="number">187.32</span> KB</span><br><span class="line">│  LSU_LSI_.V04  <span class="number">114.35</span> KB</span><br><span class="line">│  MBOOT.C32 <span class="number">84.17</span> KB</span><br><span class="line">│  MENU.C32  <span class="number">60.35</span> KB</span><br><span class="line">│  MISC_CNI.V00  <span class="number">5.51</span> KB</span><br><span class="line">│  MISC_DRI.V00  <span class="number">1.24</span> MB</span><br><span class="line">│  MTIP32XX.V00  <span class="number">67.84</span> KB</span><br><span class="line">│  NET_BNX2.V00  <span class="number">178.17</span> KB</span><br><span class="line">│  NET_BNX2.V01  <span class="number">1.00</span> MB</span><br><span class="line">│  NET_CNIC.V00  <span class="number">48.42</span> KB</span><br><span class="line">│  NET_E100.V00  <span class="number">93.66</span> KB</span><br><span class="line">│  NET_E100.V01  <span class="number">108.27</span> KB</span><br><span class="line">│  NET_ENIC.V00  <span class="number">43.63</span> KB</span><br><span class="line">│  NET_FORC.V00  <span class="number">36.61</span> KB</span><br><span class="line">│  NET_I40E.V00  <span class="number">132.01</span> KB</span><br><span class="line">│  NET_IGB.V00   <span class="number">101.62</span> KB</span><br><span class="line">│  NET_IXGB.V00  <span class="number">167.56</span> KB</span><br><span class="line">│  NET_MLX4.V00  <span class="number">107.78</span> KB</span><br><span class="line">│  NET_MLX4.V01  <span class="number">66.30</span> KB</span><br><span class="line">│  NET_NX_N.V00  <span class="number">1.32</span> MB</span><br><span class="line">│  NET_QLCN.V00  <span class="number">283.02</span> KB</span><br><span class="line">│  NET_TG3.V00   <span class="number">107.81</span> KB</span><br><span class="line">│  NET_VMXN.V00  <span class="number">30.50</span> KB</span><br><span class="line">│  NMLX4_CO.V00  <span class="number">117.53</span> KB</span><br><span class="line">│  NMLX4_EN.V00  <span class="number">119.73</span> KB</span><br><span class="line">│  NMLX4_RD.V00  <span class="number">39.92</span> KB</span><br><span class="line">│  NMST.V00  <span class="number">12.32</span> KB</span><br><span class="line">│  NVME.V00  <span class="number">63.07</span> KB</span><br><span class="line">│  OHCI_USB.V00  <span class="number">19.44</span> KB</span><br><span class="line">│  pxelinux.<span class="number">0</span>    <span class="number">26.13</span> KB</span><br><span class="line">│  QLNATIVE.V00  <span class="number">731.51</span> KB</span><br><span class="line">│  RSTE.V00  <span class="number">209.06</span> KB</span><br><span class="line">│  S.V00 <span class="number">92.98</span> MB</span><br><span class="line">│  SAFEBOOT.C32  <span class="number">61.79</span> KB</span><br><span class="line">│  SATA_AHC.V00  <span class="number">19.80</span> KB</span><br><span class="line">│  SATA_ATA.V00  <span class="number">11.79</span> KB</span><br><span class="line">│  SATA_SAT.V00  <span class="number">17.16</span> KB</span><br><span class="line">│  SATA_SAT.V01  <span class="number">10.32</span> KB</span><br><span class="line">│  SATA_SAT.V02  <span class="number">10.86</span> KB</span><br><span class="line">│  SATA_SAT.V03  <span class="number">8.03</span> KB</span><br><span class="line">│  SATA_SAT.V04  <span class="number">6.35</span> KB</span><br><span class="line">│  SB.V00    <span class="number">48.31</span> MB</span><br><span class="line">│  SCSI_AAC.V00  <span class="number">52.10</span> KB</span><br><span class="line">│  SCSI_ADP.V00  <span class="number">143.31</span> KB</span><br><span class="line">│  SCSI_AIC.V00  <span class="number">95.67</span> KB</span><br><span class="line">│  SCSI_BE2.V00  <span class="number">247.25</span> KB</span><br><span class="line">│  SCSI_BFA.V00  <span class="number">1.20</span> MB</span><br><span class="line">│  SCSI_BNX.V00  <span class="number">95.69</span> KB</span><br><span class="line">│  SCSI_BNX.V01  <span class="number">78.25</span> KB</span><br><span class="line">│  SCSI_FNI.V00  <span class="number">64.13</span> KB</span><br><span class="line">│  SCSI_HPD.V00  <span class="number">937.40</span> KB</span><br><span class="line">│  SCSI_HPS.V00  <span class="number">72.92</span> KB</span><br><span class="line">│  SCSI_HPV.V00  <span class="number">704.64</span> KB</span><br><span class="line">│  SCSI_IPS.V00  <span class="number">32.12</span> KB</span><br><span class="line">│  SCSI_MEG.V00  <span class="number">28.29</span> KB</span><br><span class="line">│  SCSI_MEG.V01  <span class="number">54.13</span> KB</span><br><span class="line">│  SCSI_MEG.V02  <span class="number">26.45</span> KB</span><br><span class="line">│  SCSI_MPT.V00  <span class="number">132.34</span> KB</span><br><span class="line">│  SCSI_MPT.V01  <span class="number">147.33</span> KB</span><br><span class="line">│  SCSI_MPT.V02  <span class="number">124.50</span> KB</span><br><span class="line">│  SCSI_QLA.V00  <span class="number">147.12</span> KB</span><br><span class="line">│  TBOOT.B00 <span class="number">43.32</span> KB</span><br><span class="line">│  TOOLS.T00 <span class="number">180.67</span> MB</span><br><span class="line">│  UC_AMD.B00    <span class="number">3.41</span> KB</span><br><span class="line">│  UC_INTEL.B00  <span class="number">135.83</span> KB</span><br><span class="line">│  UHCI_USB.V00  <span class="number">19.82</span> KB</span><br><span class="line">│  USER.B00  <span class="number">447.52</span> KB</span><br><span class="line">│  USEROPTS.GZ   <span class="number">20</span> bytes</span><br><span class="line">│  VMWARE-ESX-BASE-OSL.TXT   <span class="number">1.13</span> MB</span><br><span class="line">│  VMWARE-ESX-BASE-README    <span class="number">2.19</span> KB</span><br><span class="line">│  VSAN.V00  <span class="number">6.73</span> MB</span><br><span class="line">│  VSANHEAL.V00  <span class="number">168.57</span> KB</span><br><span class="line">│  VSANMGMT.V00  <span class="number">1.35</span> MB</span><br><span class="line">│  WEASELIN.T00  <span class="number">1.93</span> MB</span><br><span class="line">│  XHCI_XHC.V00  <span class="number">72.94</span> KB</span><br><span class="line">│  XORG.V00  <span class="number">1.28</span> MB</span><br><span class="line">├─EFI   (<span class="number">1</span> folders, <span class="number">0</span> files, <span class="number">0</span> bytes, <span class="number">193.17</span> KB <span class="keyword">in</span> total.)</span><br><span class="line">│  └─BOOT    (<span class="number">0</span> folders, <span class="number">3</span> files, <span class="number">193.17</span> KB, <span class="number">193.17</span> KB <span class="keyword">in</span> total.)</span><br><span class="line">│          BOOT.CFG  <span class="number">2.04</span> KB</span><br><span class="line">│          BOOTIA32.EFI  <span class="number">94.59</span> KB</span><br><span class="line">│          BOOTX64.EFI   <span class="number">96.53</span> KB</span><br><span class="line">├─pxelinux.cfg  (<span class="number">0</span> folders, <span class="number">1</span> files, <span class="number">231</span> bytes, <span class="number">231</span> bytes <span class="keyword">in</span> total.)</span><br><span class="line">│      default <span class="number">231</span> bytes</span><br><span class="line">└─UPGRADE   (<span class="number">0</span> folders, <span class="number">10</span> files, <span class="number">1.98</span> MB, <span class="number">1.98</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">        ESXIMAGE.ZIP    <span class="number">874.17</span> KB</span><br><span class="line">        EXTLINUX    <span class="number">62.51</span> KB</span><br><span class="line">        ISOINFO <span class="number">233.62</span> KB</span><br><span class="line">        MBR.BIN <span class="number">440</span> bytes</span><br><span class="line">        MCOPY   <span class="number">584.17</span> KB</span><br><span class="line">        METADATA.XML    <span class="number">1.54</span> KB</span><br><span class="line">        METADATA.ZIP    <span class="number">141.08</span> KB</span><br><span class="line">        PRECHECK.PY <span class="number">72.78</span> KB</span><br><span class="line">        PREP.PY <span class="number">47.54</span> KB</span><br><span class="line">        PROFILE.XML <span class="number">8.85</span> KB</span><br></pre></td></tr></table></figure>
<blockquote>
<p>引用他人在Linux下的安装流程</p>
</blockquote>
<p>PEX安装ESXi6 - <a href="http://blog.csdn.net/onlyshenmin/article/details/52434743" target="_blank" rel="external">http://blog.csdn.net/onlyshenmin/article/details/52434743</a> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装dhcp、tftp-server、syslinux、xinetd。</span></span><br><span class="line">yum install dhcp tftp-server syslinux xinetd</span><br><span class="line"></span><br><span class="line"><span class="comment">#挂载ESXi ISO到/mnt</span></span><br><span class="line">mount /dev/cdrom /mnt</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改dhcpd.conf</span></span><br><span class="line">ddns-update-style interim;</span><br><span class="line">allow booting;</span><br><span class="line">allow bootp;</span><br><span class="line">class <span class="string">"pxeclients"</span> &#123;</span><br><span class="line">    match <span class="keyword">if</span> substring(option vendor-class-identifier, <span class="number">0</span>, <span class="number">9</span>) = <span class="string">"PXEClient"</span>;</span><br><span class="line">    next-server <span class="number">172.16</span>.<span class="number">8.7</span>;</span><br><span class="line">    filename = <span class="string">"pxelinux.0"</span>;</span><br><span class="line">&#125;</span><br><span class="line">subnet <span class="number">172.16</span>.<span class="number">8.0</span> netmask <span class="number">255.255</span>.<span class="number">255.0</span> &#123;</span><br><span class="line">    range <span class="number">172.16</span>.<span class="number">8.100</span> <span class="number">172.16</span>.<span class="number">8.199</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#启用tftp,修改/etc/xinetd.d/tftp中的disable = yes为disable = no</span></span><br><span class="line">service tftp</span><br><span class="line">&#123;</span><br><span class="line">        socket_<span class="built_in">type</span>             = dgram</span><br><span class="line">        protocol                = udp</span><br><span class="line">        <span class="built_in">wait</span>                    = yes</span><br><span class="line">        user                    = root</span><br><span class="line">        server                  = /usr/sbin/in.tftpd</span><br><span class="line">        server_args             = <span class="operator">-s</span> /var/lib/tftpboot</span><br><span class="line">        <span class="built_in">disable</span>                 = no</span><br><span class="line">        per_<span class="built_in">source</span>              = <span class="number">11</span></span><br><span class="line">        cps                     = <span class="number">100</span> <span class="number">2</span></span><br><span class="line">        flags                   = IPv4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#复制pxelinux.0到tftp根目录</span></span><br><span class="line">cp /usr/share/syslinux/pxelinux.<span class="number">0</span> /var/lib/tftpboot/</span><br><span class="line"></span><br><span class="line"><span class="comment">#新建目录/var/lib/tftpboot/pxelinux.cfg</span></span><br><span class="line">mkdir /var/lib/tftpboot/pxelinux.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">#复制ESXi ISO文件中的isolinux.cfg到/var/lib/tftpboot/pxelinux.cfg/下并改名default</span></span><br><span class="line">cp /mnt/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default</span><br><span class="line"></span><br><span class="line"><span class="comment">#复制ESXi ISO中的全部文件到/var/lib/tftpboot/下</span></span><br><span class="line">cp <span class="operator">-a</span>  /mnt/* /var/lib/tftpboot/</span><br><span class="line"></span><br><span class="line"><span class="comment">#复制syslinux自带的menu.c32到tftp根目录替换掉ESXI ISO里的menu.c32。</span></span><br><span class="line">cp /usr/share/syslinux/menu.c32  /var/lib/tftpboot/</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启dhcp、xinetd服务</span></span><br><span class="line">systemctl restart dhcpd</span><br><span class="line">systemctl restart xinetd</span><br><span class="line"></span><br><span class="line"><span class="comment">#自定义安装脚本，安装httpd，编辑脚本ks.cfg</span></span><br><span class="line">vim /var/www/html/ks.cfg</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Sample scripted installation file</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Accept the VMware End User License Agreement</span></span><br><span class="line">vmaccepteula</span><br><span class="line"><span class="comment"># Set the root password for the DCUI and Tech Support Mode</span></span><br><span class="line">rootpw mypassword</span><br><span class="line"><span class="comment"># Install on the first local disk available on machine</span></span><br><span class="line">install --firstdisk --overwritevmfs</span><br><span class="line"><span class="comment"># Set the network to DHCP on the first network adapter</span></span><br><span class="line">network --bootproto=dhcp --device=vmnic0</span><br><span class="line"><span class="comment"># A sample post-install script</span></span><br><span class="line">%post --interpreter=python --ignorefailure=<span class="literal">true</span></span><br><span class="line">import time</span><br><span class="line">stampFile = open(<span class="string">'/finished.stamp'</span>, mode=<span class="string">'w'</span>)</span><br><span class="line">stampFile.write( time.asctime() )</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑ESXi ISO复制过来的boot.cfg文件，添加kernelopt=ks=http://172.16.8.7/ks.cfg</span></span><br><span class="line">vim /var/lib/tftpboot/boot.cfg</span><br><span class="line"></span><br><span class="line">bootstate=<span class="number">0</span></span><br><span class="line">title=Loading ESXi installer</span><br><span class="line">timeout=<span class="number">5</span></span><br><span class="line">kernel=/tboot.b00</span><br><span class="line">kernelopt=ks=http://<span class="number">172.16</span>.<span class="number">8.7</span>/ks.cfg</span><br><span class="line">modules=/b.b00 --- /jumpstrt.gz --- /useropts.gz --- /k.b00 --- /chardevs.b00 --- /a.b00 --- /user.b00 --- /uc_intel.b00 --- /uc_amd.b00 --- /sb.v00 --- /s.v00 --- /mtip32xx.v00 --- /ata_pata.v00 --- /ata_pata.v01 --- /ata_pata.v02 --- /ata_pata.v03 --- /ata_pata.v04 --- /ata_pata.v05 --- /ata_pata.v06 --- /ata_pata.v07 --- /block_cc.v00 --- /ehci_ehc.v00 --- /elxnet.v00 --- /emulex_e.v00 --- /weaselin.t00 --- /esx_dvfi.v00 --- /esx_ui.v00 --- /ima_qla4.v00 --- /ipmi_ipm.v00 --- /ipmi_ipm.v01 --- /ipmi_ipm.v02 --- /lpfc.v00 --- /lsi_mr3.v00 --- /lsi_msgp.v00 --- /lsu_hp_h.v00 --- /lsu_lsi_.v00 --- /lsu_lsi_.v01 --- /lsu_lsi_.v02 --- /lsu_lsi_.v03 --- /lsu_lsi_.v04 --- /misc_cni.v00 --- /misc_dri.v00 --- /net_bnx2.v00 --- /net_bnx2.v01 --- /net_cnic.v00 --- /net_e100.v00 --- /net_e100.v01 --- /net_enic.v00 --- /net_forc.v00 --- /net_igb.v00 --- /net_ixgb.v00 --- /net_mlx4.v00 --- /net_mlx4.v01 --- /net_nx_n.v00 --- /net_tg3.v00 --- /net_vmxn.v00 --- /nmlx4_co.v00 --- /nmlx4_en.v00 --- /nmlx4_rd.v00 --- /nvme.v00 --- /ohci_usb.v00 --- /qlnative.v00 --- /rste.v00 --- /sata_ahc.v00 --- /sata_ata.v00 --- /sata_sat.v00 --- /sata_sat.v01 --- /sata_sat.v02 --- /sata_sat.v03 --- /sata_sat.v04 --- /scsi_aac.v00 --- /scsi_adp.v00 --- /scsi_aic.v00 --- /scsi_bnx.v00 --- /scsi_bnx.v01 --- /scsi_fni.v00 --- /scsi_hps.v00 --- /scsi_ips.v00 --- /scsi_meg.v00 --- /scsi_meg.v01 --- /scsi_meg.v02 --- /scsi_mpt.v00 --- /scsi_mpt.v01 --- /scsi_mpt.v02 --- /scsi_qla.v00 --- /uhci_usb.v00 --- /vsan.v00 --- /vsanheal.v00 --- /vsanmgmt.v00 --- /xhci_xhc.v00 --- /tools.t00 --- /xorg.v00 --- /imgdb.tgz --- /imgpayld.tgz</span><br><span class="line">build=</span><br><span class="line">updated=<span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="rhel"><a href="#rhel" class="headerlink" title="rhel"></a>rhel</h2><blockquote>
<p>tftpd32+rhel6.7+kickstart+hfs</p>
</blockquote>
<ol>
<li>Windows下关闭防火墙，设置IP地址为192.168.1.1/24</li>
<li>启动tftpd32参考上图所示配置，<code>Base Directory</code>目录选择实际定义的路径，如<code>tftpboot_rhel\</code></li>
<li>解压rhel6.7 ISO至自定义目录，使用hfs作为http文件服务器</li>
<li>将ks.cfg放入自定义目录，使用hfs加载</li>
<li>复制syslinux中的<code>pxelinux.0/initrd.img/vesamenu.c32/vmlinuz</code>到<code>tftpboot_rhel\</code></li>
<li>创建pxelinux.cfg目录，复制rhel6.7 ISO文件中的ISOLINUX.CFG至该目录并改名为default</li>
<li>修改default文件，ks=<a href="http://192.168.1.1/rhel67/ks.cfg" target="_blank" rel="external">http://192.168.1.1/rhel67/ks.cfg</a> ksdevice=eth10，出现<code>multiple network devices</code>提示一定要加入ksdevice确认网卡</li>
<li>检查tftpd32服务启动正常，测试自动化网络安装rhel</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#default</span></span><br><span class="line"></span><br><span class="line">default vesamenu.c32</span><br><span class="line"><span class="comment">#prompt 1</span></span><br><span class="line">timeout <span class="number">60</span></span><br><span class="line"></span><br><span class="line">display boot.msg</span><br><span class="line"></span><br><span class="line">menu background splash.jpg</span><br><span class="line">menu title Welcome to Red Hat Enterprise Linux <span class="number">6.7</span>!</span><br><span class="line">menu color border <span class="number">0</span> <span class="comment">#ffffffff #00000000</span></span><br><span class="line">menu color sel <span class="number">7</span> <span class="comment">#ffffffff #ff000000</span></span><br><span class="line">menu color title <span class="number">0</span> <span class="comment">#ffffffff #00000000</span></span><br><span class="line">menu color tabmsg <span class="number">0</span> <span class="comment">#ffffffff #00000000</span></span><br><span class="line">menu color unsel <span class="number">0</span> <span class="comment">#ffffffff #00000000</span></span><br><span class="line">menu color hotsel <span class="number">0</span> <span class="comment">#ff000000 #ffffffff</span></span><br><span class="line">menu color hotkey <span class="number">7</span> <span class="comment">#ffffffff #ff000000</span></span><br><span class="line">menu color scrollbar <span class="number">0</span> <span class="comment">#ffffffff #00000000</span></span><br><span class="line"></span><br><span class="line">label linux</span><br><span class="line">  menu label ^Install or upgrade an existing system</span><br><span class="line">  menu default</span><br><span class="line">  kernel vmlinuz</span><br><span class="line">  append initrd=initrd.img ks=http://<span class="number">192.168</span>.<span class="number">1.1</span>/rhel67/ks.cfg ksdevice=eth10</span><br><span class="line">label vesa</span><br><span class="line">  menu label Install system with ^basic video driver</span><br><span class="line">  kernel vmlinuz</span><br><span class="line">  append initrd=initrd.img nomodeset</span><br><span class="line">label rescue</span><br><span class="line">  menu label ^Rescue installed system</span><br><span class="line">  kernel vmlinuz</span><br><span class="line">  append initrd=initrd.img rescue</span><br><span class="line">label <span class="built_in">local</span></span><br><span class="line">  menu label Boot from ^<span class="built_in">local</span> drive</span><br><span class="line">  localboot <span class="number">0</span>xffff</span><br><span class="line">label memtest86</span><br><span class="line">  menu label ^Memory <span class="built_in">test</span></span><br><span class="line">  kernel memtest</span><br><span class="line">  append -</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ks.cfg</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#platform=x86, AMD64, or Intel EM64T</span></span><br><span class="line"><span class="comment">#version=DEVEL</span></span><br><span class="line"><span class="comment"># Firewall configuration</span></span><br><span class="line">firewall --disabled</span><br><span class="line"><span class="comment"># Install OS instead of upgrade</span></span><br><span class="line">install</span><br><span class="line"><span class="comment">#cdrom</span></span><br><span class="line">url --url=http://<span class="number">192.168</span>.<span class="number">1.1</span>/rhel67/</span><br><span class="line"><span class="comment"># Network</span></span><br><span class="line"><span class="comment">#network --bootproto=dhcp --device=eth0</span></span><br><span class="line"><span class="comment"># Root password</span></span><br><span class="line">rootpw admin123</span><br><span class="line"><span class="comment"># System authorization information</span></span><br><span class="line">auth  --useshadow  --passalgo=sha512</span><br><span class="line"><span class="comment"># Use text mode install</span></span><br><span class="line">text</span><br><span class="line">firstboot --disable</span><br><span class="line"><span class="comment"># System keyboard</span></span><br><span class="line">keyboard us</span><br><span class="line"><span class="comment"># System language</span></span><br><span class="line">lang en_US.UTF-<span class="number">8</span></span><br><span class="line"><span class="comment"># SELinux configuration</span></span><br><span class="line">selinux --disabled</span><br><span class="line"><span class="comment"># Installation logging level</span></span><br><span class="line">logging --level=info</span><br><span class="line"><span class="comment"># Reboot after installation</span></span><br><span class="line">reboot</span><br><span class="line"><span class="comment"># System timezone</span></span><br><span class="line">timezone Asia/Shanghai</span><br><span class="line"><span class="comment"># System bootloader configuration</span></span><br><span class="line">bootloader --location=mbr --append=<span class="string">"rhgb quiet crashkernel=auto"</span></span><br><span class="line"><span class="comment"># Clear the Master Boot Record</span></span><br><span class="line">zerombr</span><br><span class="line"><span class="comment"># Partition clearing information</span></span><br><span class="line">clearpart --all --initlabel</span><br><span class="line"><span class="comment"># Partition</span></span><br><span class="line"><span class="comment">#autopart</span></span><br><span class="line">part /boot --fstype=ext4 --size=<span class="number">500</span></span><br><span class="line">part pv.<span class="number">008002</span> --grow --size=<span class="number">1</span></span><br><span class="line">volgroup VolGroup --pesize=<span class="number">4096</span> pv.<span class="number">008002</span></span><br><span class="line">logvol / --fstype=ext4 --name=lv_root --vgname=VolGroup --size=<span class="number">20480</span></span><br><span class="line">logvol /home --fstype=ext4 --name=lv_home --vgname=VolGroup --size=<span class="number">20480</span></span><br><span class="line">logvol /opt --fstype=ext4 --name=lv_opt --vgname=VolGroup --size=<span class="number">20480</span></span><br><span class="line">logvol /tmp --fstype=ext4 --name=lv_tmp --vgname=VolGroup --size=<span class="number">20480</span></span><br><span class="line">logvol /usr --fstype=ext4 --name=lv_usr --vgname=VolGroup --size=<span class="number">20480</span></span><br><span class="line">logvol /var --fstype=ext4 --name=lv_var --vgname=VolGroup --size=<span class="number">20480</span></span><br><span class="line">logvol swap --name=lv_swap --vgname=VolGroup --size=<span class="number">65536</span></span><br><span class="line"><span class="comment"># Packages</span></span><br><span class="line">%packages</span><br><span class="line">@base</span><br><span class="line">@chinese-support</span><br><span class="line">@client-mgmt-tools</span><br><span class="line">@core</span><br><span class="line">@debugging</span><br><span class="line">@basic-desktop</span><br><span class="line">@desktop-debugging</span><br><span class="line">@desktop-platform</span><br><span class="line">@directory-client</span><br><span class="line">@fonts</span><br><span class="line">@general-desktop</span><br><span class="line">@graphical-admin-tools</span><br><span class="line">@input-methods</span><br><span class="line">@internet-browser</span><br><span class="line">@java-platform</span><br><span class="line">@legacy-x</span><br><span class="line">@network-file-system-client</span><br><span class="line">@perl-runtime</span><br><span class="line">@<span class="built_in">print</span>-client</span><br><span class="line">@remote-desktop-clients</span><br><span class="line">@server-platform</span><br><span class="line">@server-policy</span><br><span class="line">@x11</span><br><span class="line">pax</span><br><span class="line">python-dmidecode</span><br><span class="line">oddjob</span><br><span class="line">wodim</span><br><span class="line">sgpio</span><br><span class="line">genisoimage</span><br><span class="line">mtools</span><br><span class="line">abrt-gui</span><br><span class="line">certmonger</span><br><span class="line">pam_krb5</span><br><span class="line">krb5-workstation</span><br><span class="line">libXmu</span><br><span class="line">perl-DBD-SQLite</span><br><span class="line">%end</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">file://H:\<span class="number">01</span>_autoinstall\tftpboot_rhel  (<span class="number">1</span> folders, <span class="number">4</span> files, <span class="number">38.93</span> MB, <span class="number">38.93</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">│  initrd.img    <span class="number">34.72</span> MB</span><br><span class="line">│  pxelinux.<span class="number">0</span>    <span class="number">26.13</span> KB</span><br><span class="line">│  vesamenu.c32  <span class="number">159.89</span> KB</span><br><span class="line">│  vmlinuz   <span class="number">4.03</span> MB</span><br><span class="line">└─pxelinux.cfg  (<span class="number">0</span> folders, <span class="number">1</span> files, <span class="number">991</span> bytes, <span class="number">991</span> bytes <span class="keyword">in</span> total.)</span><br><span class="line">        default <span class="number">991</span> bytes</span><br></pre></td></tr></table></figure>
<blockquote>
<p>引用他人在Linux下的安装流程</p>
</blockquote>
<p>RHEL6 (64bits)系统上利用PXE+DHCP+TFTP+KickStart批量安装系统<br><a href="http://chrinux.blog.51cto.com/6466723/1214641" target="_blank" rel="external">http://chrinux.blog.51cto.com/6466723/1214641</a></p>
<p>CentOS 6.4下PXE+Kickstart无人值守安装操作系统<br><a href="http://www.cnblogs.com/mchina/p/centos-pxe-kickstart-auto-install-os.html" target="_blank" rel="external">http://www.cnblogs.com/mchina/p/centos-pxe-kickstart-auto-install-os.html</a></p>
<h2 id="tftpd32"><a href="#tftpd32" class="headerlink" title="tftpd32"></a>tftpd32</h2><blockquote>
<p>请允许我直接偷懒引用官方简洁纯朴的英文说明，希望大家在遇到问题前回顾下每个选项的解释，谢谢</p>
</blockquote>
<p>Tftpd32 is a free, opensource IPv6 ready application which includes DHCP, TFTP, DNS, SNTP and Syslog servers as well as a TFTP client.</p>
<h3 id="TFTP"><a href="#TFTP" class="headerlink" title="TFTP"></a>TFTP</h3><p>Trivial File Transfer Protocol was first defined in 1980, it is a lightweight version of the FTP protocol that has no directory browsing or password capability. Employing UDP rather than TCP for transport, TFTP is typically used to transfer firmware upgrades to network equipment such as routers, switches and IP phones.It is also used to boot diskless computers (PXE). </p>
<h3 id="SNTP"><a href="#SNTP" class="headerlink" title="SNTP"></a>SNTP</h3><p>Simple Network Timle Protocol is a simplified version of NTP (Network Time Protocol). They synchronise the time on workstations across a network. </p>
<h3 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h3><p>DHCP assigns IP addresses to client stations logging onto a TCP/IP network. It eliminates having to manually assign permanent IP addresses on each station. </p>
<h3 id="Syslog"><a href="#Syslog" class="headerlink" title="Syslog"></a>Syslog</h3><p>Syslog is a service for remotely logging data. For example, it allows to monitor videoless network equipments. </p>
<h3 id="Tftpd-server-Settings"><a href="#Tftpd-server-Settings" class="headerlink" title="Tftpd server Settings"></a>Tftpd server Settings</h3><p><strong>Base directory</strong><br>The default directory used by the TFTP client and server. It may be changed from the main window.</p>
<p><strong>Global Settings</strong><br>Enable or disable tftpd32 servers and clients.</p>
<p><strong>TFTP security</strong></p>
<ul>
<li>NONE   (Not recommended !)<br>read and write requests are allowed on all disks/directories. </li>
<li>Standard<br>read and write requests are allowed but limited to the current directory. </li>
<li>High<br>idem standard + write requests are allowed only if the input file exists and is empty. </li>
<li>Read only<br>idem standard + write requests are rejected. </li>
</ul>
<p><strong>TFTP Configuration</strong></p>
<ul>
<li>Timeout<br>The maximum timeout between two retransmissions </li>
<li>Max Retransmit<br>The maximum retransmission for the same packet </li>
<li>Tftp Port<br>The port used to listen incoming requests </li>
<li>local ports pool<br>A range of ports (for example 3000:3030). These ports are used for the file transfers. </li>
</ul>
<p><strong>TFTP Configuration</strong></p>
<ul>
<li>Option Negotiation<br>Enables the negotiation between client and server (RFC 2347) </li>
<li>PXE compatibility<br>Enables only the file size negotiation </li>
<li>Show progress Bar<br>Creates a gauge window for each transfer </li>
<li>Translate Unix file names<br>Translates any slash characters to a backslash </li>
<li>Bind Tftpd32 to this address<br>Enables TFTP only on one interface </li>
<li>Allow ‘\’ As virtual root<br>A file name beginning with ‘\’ points to the TFTP directory and not to the root of the disk </li>
<li>Use anticipation window of ??? bytes<br>Tftpd32 is able to send packets before receiving acknowledgements. This feature may dramatically speed up the transfer. </li>
<li>Hide window at startup<br>Tftpd32 main window remains hidden, but the icon in the tasktray is still present </li>
<li>Create dir.txt files<br>For each incoming read request, Tftpd32 lists the content of the directory and put the result in a file named “dir.txt”. </li>
<li>Create md5 file<br>For each successfull read request, Tftpd32 creates a file which is the MD5 signature of the previous file<br>Beep for long transfer<br>Tftpd32 sends a beep once a transfer has ended.    </li>
</ul>
<h3 id="DHCP-Setup"><a href="#DHCP-Setup" class="headerlink" title="DHCP Setup"></a>DHCP Setup</h3><ul>
<li>IP Pool starting Address<br>This is the first address which will be distributed. </li>
<li>Size of pool<br>This is the number of hosts which may be configured by Tftpd32. </li>
<li>Lease<br>This is the amount of time in minutes the address is leased for. </li>
<li>Boot File<br>Used by diskless stations. It is the file which will be retrieved by TFTP to start up the boot process.<br>The strings $MAC$ and $IP$ are pseudo variables which are translated into the MAC address of the client and its assignated IP address. </li>
<li>Default router<br>The IP address of the LAN gateway. </li>
<li>Mask<br>The network mask which will be assigned to the DHCP clients. </li>
<li>DNS servers<br>The IP address of the DNS. Two DNS can be configured. </li>
<li>WINS Server<br>The IP address of the WINS server. </li>
<li>NTP Server<br>The IP address of the NTP server used for synchronisation. </li>
<li>SIP Server<br>The IP address of the SIP server. It concerns mostly IP phones. </li>
<li>Domain Name<br>Either the NT domain or the internet domain. </li>
<li>Additional Option<br>The first field is the number of the option to be handled<br>The second filed is the value of the field. The value is prefixed with its type (a for list of IPv4 address, x for list of hex digits, b for list of decimal bytes, s for an ASCII string) [legacy prefixes: i for integer, n for network order integers] </li>
<li>More Additional Options ?<br>Tftpd32 supports up to 10 additionnal options. They have to be configured by editing the tftpd32.ini settings file. Their syntax is similar to the previous one. </li>
</ul>
]]></content>
    
    <summary type="html">
    
      利用tftpd32快速搭建网络自动化搞机平台
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>tftp安装和使用小结</title>
    <link href="https://wsgzao.github.io/post/tftp/"/>
    <id>https://wsgzao.github.io/post/tftp/</id>
    <published>2017-01-18T06:59:49.000Z</published>
    <updated>2017-01-18T03:43:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我相信大家接触到tftp大多数原因是PXE网络自动化部署的功劳，一般是在Linux环境下采用PXE+TFTP+DHCP+(HTTP/FTP/NFS)来实现，因为最近在生产环境中分别测试使用了云霁科技的Cloudboot和大名鼎鼎的Cobbler，只是针对大规模型号和配置不一样的物理机实现成本太高配置不够灵活，最后考虑采用Windows笔记本+交换机+tftpd32来实现。而且最近在更新Cisco网络交换机固件的时候发现使用tftp相比ftp来说更加容易，想想就整一篇简单的文档出来。</p>
<blockquote>
<p>tftp是一个非常简单好用的文件传输协议</p>
</blockquote>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2017年01月18日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/tftp/" target="_blank" rel="external">https://wsgzao.github.io/post/tftp/</a></p>
<p><strong>扩展阅读</strong></p>
<p>TFTP - <a href="http://www.tftp-server.com/" target="_blank" rel="external">http://www.tftp-server.com/</a></p>
<hr>
<h2 id="tftp应用场景"><a href="#tftp应用场景" class="headerlink" title="tftp应用场景"></a>tftp应用场景</h2><p>TFTP（Trivial File Transfer Protocol，简单文件传输协议）是TCP/IP协议族中的一个用来在客户机与服务器之间进行简单文件传输的协议，提供不复杂、开销不大的文件传输服务。端口号为69，它基于UDP协议而实现。</p>
<ol>
<li>交换机或路由器升级或备份</li>
<li>无盘工作站存放boot loader</li>
<li>嵌入式开发时装载系统</li>
<li>大规模的服务安装布署</li>
</ol>
<h2 id="tftp使用"><a href="#tftp使用" class="headerlink" title="tftp使用"></a>tftp使用</h2><blockquote>
<p>注意修改防火墙和selinux配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装</span></span><br><span class="line">yum install -y tftp-server</span><br><span class="line"></span><br><span class="line"><span class="comment">#注意disable选项为no</span></span><br><span class="line"><span class="comment">#修改项server_args=，可以修改tftp-server的根目录，参数-s指定chroot，-c指定了可以创建文件</span></span><br><span class="line">vi /etc/xinetd.d/tftp</span><br><span class="line">service tftp</span><br><span class="line">&#123;</span><br><span class="line">        socket_<span class="built_in">type</span>             = dgram</span><br><span class="line">        protocol                = udp</span><br><span class="line">        <span class="built_in">wait</span>                    = yes</span><br><span class="line">        user                    = root</span><br><span class="line">        server                  = /usr/sbin/in.tftpd</span><br><span class="line">        server_args             = <span class="operator">-s</span> /var/lib/tftpboot</span><br><span class="line">        <span class="built_in">disable</span>                 = no</span><br><span class="line">        per_<span class="built_in">source</span>              = <span class="number">11</span></span><br><span class="line">        cps                     = <span class="number">100</span> <span class="number">2</span></span><br><span class="line">        flags                   = IPv4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置tftp开机自动启动</span></span><br><span class="line">chkconfig tftp on  </span><br><span class="line"></span><br><span class="line"><span class="comment">#启动xinetd服务</span></span><br><span class="line">/etc/init.d/xinetd restart </span><br><span class="line"></span><br><span class="line"><span class="comment">#验证tftp是否启动成功并监听本地69端口</span></span><br><span class="line">netstat -anup | grep <span class="number">69</span></span><br><span class="line">udp    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">69</span>    <span class="number">0.0</span>.<span class="number">0.0</span>:*    <span class="number">15763</span>/xinetd      </span><br><span class="line"></span><br><span class="line"><span class="comment">#测试上传和下载</span></span><br><span class="line">yum install tftp</span><br><span class="line">tftp -i <span class="number">192.168</span>.<span class="number">1.1</span> put <span class="built_in">test</span></span><br><span class="line">tftp -i <span class="number">192.168</span>.<span class="number">1.1</span> get <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      tftp是一个非常简单好用的文件传输协议
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>JBOD磁盘配置和StorCLI命令使用小结</title>
    <link href="https://wsgzao.github.io/post/jbod/"/>
    <id>https://wsgzao.github.io/post/jbod/</id>
    <published>2016-12-31T06:59:49.000Z</published>
    <updated>2016-12-30T08:44:31.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>已经实施过2次Hadoop大数据平台的基础环境搭建，对于硬盘的RAID模式都不约而同选择了JBOD，毕竟大数据对于文件系统的管理本身就是基于分布式，由至少3份副本来保障数据可靠性，只是不做RAID后的SAS硬盘读写性能就有点惨不忍睹。这次Hadoop大数据平台工具选择的是Cloudera，大家感兴趣的化也可以浏览下它的官网。本篇文章主要介绍如何实现在不停机状态下在线更换JBOD硬盘。</p>
<blockquote>
<p>利用StorCLI命令不停机在线更换JBOD硬盘</p>
</blockquote>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2016年12月31日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/jbod/" target="_blank" rel="external">https://wsgzao.github.io/post/jbod/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Cloudera - <a href="http://www.cloudera.com/" target="_blank" rel="external">http://www.cloudera.com/</a></p>
<hr>
<h2 id="JBOD原理"><a href="#JBOD原理" class="headerlink" title="JBOD原理"></a>JBOD原理</h2><p>JBOD （ Just a Bunch Of Disks ）不是标准的 RAID 等级，它通常用来表示一个没有控制软件提供协调控制的磁盘集合。 JBOD 将多个物理磁盘串联起来，提供一个巨大的逻辑磁盘。 JBOD 的数据存放机制是由第一块磁盘开始按顺序往后存储，当前磁盘存储空间用完后，再依次往后面的磁盘存储数据。 JBOD 存储性能完全等同于单块磁盘，而且也不提供数据安全保护。它只是简单提供一种扩展存储空间的机制， JBOD 可用存储容量等于所有成员磁盘的存储空间之和。目前 JBOD 常指磁盘柜，而不论其是否提供 RAID 功能。</p>
<p>RAID磁盘阵列配置和调优小结 - <a href="https://wsgzao.github.io/post/raid/" target="_blank" rel="external">https://wsgzao.github.io/post/raid/</a></p>
<h2 id="参考文档和工具"><a href="#参考文档和工具" class="headerlink" title="参考文档和工具"></a>参考文档和工具</h2><p>StorCLI_RefMan_revf<br><a href="https://www.broadcom.com/support/download-search/?dk=StorCLI" target="_blank" rel="external">https://www.broadcom.com/support/download-search/?dk=StorCLI</a></p>
<p>StorCLI (Command Line) Utility for Storage Management v1.07.07 on Linux<br><a href="https://www-947.ibm.com/support/entry/portal/docdisplay?lndocid=MIGR-5092950" target="_blank" rel="external">https://www-947.ibm.com/support/entry/portal/docdisplay?lndocid=MIGR-5092950</a></p>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询硬件RAID卡信息</span></span><br><span class="line">[root@localhost Linux]<span class="comment"># cat /proc/scsi/scsi |more</span></span><br><span class="line"></span><br><span class="line">Attached devices:</span><br><span class="line">Host: scsi0 Channel: <span class="number">02</span> Id: <span class="number">00</span> Lun: <span class="number">00</span></span><br><span class="line">  Vendor: IBM      Model: ServeRAID M5210  Rev: <span class="number">4.62</span></span><br><span class="line">  Type:   Direct-Access                    ANSI  SCSI revision: <span class="number">05</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#解压安装storcli</span></span><br><span class="line">unzip ibm_utl_sraidmr_storcli-<span class="number">1.07</span>.<span class="number">07</span>_linux_32-<span class="number">64</span>.zip</span><br><span class="line">rpm -Uvh storcli-<span class="number">1.07</span>.<span class="number">07</span>-<span class="number">1</span>.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置软连接</span></span><br><span class="line">ln <span class="operator">-s</span> /opt/MegaRAID/storcli/storcli64 /bin/storcli</span><br><span class="line">ln <span class="operator">-s</span> /opt/MegaRAID/storcli/storcli64 /sbin/storcli</span><br><span class="line"></span><br><span class="line"><span class="comment">#Raid数量及当前状态</span></span><br><span class="line">[root@localhost Linux]<span class="comment"># storcli show ctrlcount</span></span><br><span class="line">Status Code = <span class="number">0</span></span><br><span class="line">Status = Success</span><br><span class="line">Description = None</span><br><span class="line"></span><br><span class="line">Controller Count = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查询虚拟磁盘大小，raid结构等</span></span><br><span class="line">[root@localhost Linux]<span class="comment"># storcli /c0 /v0 show</span></span><br><span class="line">Controller = <span class="number">0</span></span><br><span class="line">Status = Success</span><br><span class="line">Description = None</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Virtual Drives :</span><br><span class="line">==============</span><br><span class="line"></span><br><span class="line">-----------------------------------------------------------</span><br><span class="line">DG/VD TYPE  State Access Consist Cache sCC       Size Name </span><br><span class="line">-----------------------------------------------------------</span><br><span class="line"><span class="number">0</span>/<span class="number">0</span>   RAID1 Optl  RW     Yes     RWTD  -   <span class="number">278.465</span> GB      </span><br><span class="line">-----------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Cac=CacheCade|Rec=Recovery|OfLn=OffLine|Pdgd=Partially Degraded|dgrd=Degraded</span><br><span class="line">Optl=Optimal|RO=Read Only|RW=Read Write|B=Blocked|Consist=Consistent|</span><br><span class="line">R=Read Ahead Always|NR=No Read Ahead|WB=WriteBack|</span><br><span class="line">AWB=Always WriteBack|WT=WriteThrough|C=Cached IO|D=Direct IO|sCC=Scheduled</span><br><span class="line">Check Consistency</span><br><span class="line"><span class="comment">#可以看出此为RAID1，一个虚拟磁盘，大小为278.465 GB </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看control0的物理硬盘</span></span><br><span class="line">[root@localhost Linux]<span class="comment"># storcli /c0 /eall /sall show</span></span><br><span class="line">Controller = <span class="number">0</span></span><br><span class="line">Status = Success</span><br><span class="line">Description = Show Drive Information Succeeded.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Drive Information :</span><br><span class="line">=================</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------</span><br><span class="line">EID:Slt DID State DG       Size Intf Med SED PI SeSz Model            Sp </span><br><span class="line">-------------------------------------------------------------------------</span><br><span class="line"><span class="number">252</span>:<span class="number">16</span>    <span class="number">8</span> Onln   <span class="number">0</span> <span class="number">278.465</span> GB SAS  HDD N   Y  <span class="number">512</span>B ST300MP0035    X U  </span><br><span class="line"><span class="number">252</span>:<span class="number">17</span>    <span class="number">9</span> Onln   <span class="number">0</span> <span class="number">278.465</span> GB SAS  HDD N   Y  <span class="number">512</span>B ST300MP0035    X U  </span><br><span class="line">-------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">EID-Enclosure Device ID|Slt-Slot No.|DID-Device ID|DG-DriveGroup</span><br><span class="line">DHS-Dedicated Hot Spare|UGood-Unconfigured Good|GHS-Global Hotspare</span><br><span class="line">UBad-Unconfigured Bad|Onln-Online|Offln-Offline|Intf-Interface</span><br><span class="line">Med-Media Type|SED-Self Encryptive Drive|PI-Protection Info</span><br><span class="line">SeSz-Sector Size|Sp-Spun|U-Up|D-Down|T-Transition|F-Foreign</span><br><span class="line">UGUnsp-Unsupported|UGShld-UnConfigured shielded|HSPShld-Hotspare shielded</span><br><span class="line">CFShld-Configured shielded</span><br><span class="line"></span><br><span class="line"><span class="comment">#可以看到总计有两颗硬盘，每一颗大小278.465GB，是否在线等</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看control1的物理硬盘</span></span><br><span class="line">[root@localhost Linux]<span class="comment"># storcli /c1 /eall /sall show</span></span><br><span class="line">Controller = <span class="number">1</span></span><br><span class="line">Status = Success</span><br><span class="line">Description = Show Drive Information Succeeded.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Drive Information :</span><br><span class="line">=================</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line">EID:Slt DID State DG      Size Intf Med SED PI SeSz Model            Sp </span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line"><span class="number">8</span>:<span class="number">0</span>      <span class="number">23</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">1</span>      <span class="number">24</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">2</span>      <span class="number">22</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">3</span>      <span class="number">19</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">4</span>      <span class="number">13</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">5</span>      <span class="number">14</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">6</span>      <span class="number">18</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">7</span>      <span class="number">12</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">8</span>      <span class="number">10</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">9</span>      <span class="number">16</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">10</span>     <span class="number">11</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">11</span>     <span class="number">21</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">12</span>     <span class="number">15</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line"><span class="number">8</span>:<span class="number">13</span>      <span class="number">9</span> JBOD  -  <span class="number">1.0810</span> TB SAS  HDD N   Y  <span class="number">512</span>B ST1200MM0018   X U  </span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">EID-Enclosure Device ID|Slt-Slot No.|DID-Device ID|DG-DriveGroup</span><br><span class="line">DHS-Dedicated Hot Spare|UGood-Unconfigured Good|GHS-Global Hotspare</span><br><span class="line">UBad-Unconfigured Bad|Onln-Online|Offln-Offline|Intf-Interface</span><br><span class="line">Med-Media Type|SED-Self Encryptive Drive|PI-Protection Info</span><br><span class="line">SeSz-Sector Size|Sp-Spun|U-Up|D-Down|T-Transition|F-Foreign</span><br><span class="line">UGUnsp-Unsupported|UGShld-UnConfigured shielded|HSPShld-Hotspare shielded</span><br><span class="line">CFShld-Configured shielded</span><br><span class="line"></span><br><span class="line"><span class="comment">#可以看到总计有两颗硬盘，每一颗大小1.0810 TB，是否在线等</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置硬盘状态</span></span><br><span class="line">storcli /c1/e8/s0 show all</span><br><span class="line"></span><br><span class="line">storcli /c1/e8/s0 start locate</span><br><span class="line">storcli /c1/e8/s0 <span class="built_in">set</span> offline</span><br><span class="line">storcli /c1/e8/s0 <span class="built_in">set</span> online</span><br><span class="line">storcli /c1/e8/s0 <span class="built_in">set</span> jbod</span><br></pre></td></tr></table></figure>
<h2 id="StorCLI-Help"><a href="#StorCLI-Help" class="headerlink" title="StorCLI Help"></a>StorCLI Help</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看StorCLI帮助信息</span></span><br><span class="line">[root@localhost Linux]<span class="comment"># storcli -h</span></span><br><span class="line">     Storage Command Line Tool  Ver <span class="number">1.07</span>.<span class="number">07</span> Nov <span class="number">15</span>, <span class="number">2013</span></span><br><span class="line"></span><br><span class="line">     (c)Copyright <span class="number">2013</span>, LSI Corporation, All Rights Reserved.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">storcli -v </span><br><span class="line">storcli -h| -help| ? </span><br><span class="line">storcli -h| -help| ? legacy</span><br><span class="line">storcli show </span><br><span class="line">storcli show all</span><br><span class="line">storcli show ctrlcount</span><br><span class="line">storcli /cx add vd r[<span class="number">0</span>|<span class="number">1</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">00</span>|<span class="number">10</span>|<span class="number">50</span>|<span class="number">60</span>]</span><br><span class="line">    [Size=&lt;VD1_Sz&gt;,&lt;VD2_Sz&gt;,..|all] [name=&lt;VDNAME1&gt;,..] </span><br><span class="line">    drives=e:s|e:s-x|e:s-x,y,e:s-x,y,z [PDperArray=x][SED]</span><br><span class="line">    [pdcache=on|off|default][pi][DimmerSwitch(ds)=default|automatic(auto)|</span><br><span class="line">    none|maximum(max)|MaximumWithoutCaching(maxnocache)]</span><br><span class="line">    [wt|wb|awb][nora|ra] [direct|cached] [cachevd]</span><br><span class="line">    [Strip=&lt;<span class="number">8</span>|<span class="number">16</span>|<span class="number">32</span>|<span class="number">64</span>|<span class="number">128</span>|<span class="number">256</span>|<span class="number">512</span>|<span class="number">1024</span>&gt;] [AfterVd=X] </span><br><span class="line">    [Spares = [e:]s|[e:]s-x|[e:]s-x,y] [force][ExclusiveAccess]</span><br><span class="line">storcli /cx add vd each r0 [name=&lt;VDNAME1&gt;,..] [drives=e:s|e:s-x|e:s-x,y]</span><br><span class="line">    [SED] [pdcache=on|off|default][pi] [DimmerSwitch(ds)=default|automatic(auto)|</span><br><span class="line">    none|maximum(max)|MaximumWithoutCaching(maxnocache)] </span><br><span class="line">    [wt|wb|awb] [nora|ra] [direct|cached] </span><br><span class="line">    [Strip=&lt;<span class="number">8</span>|<span class="number">16</span>|<span class="number">32</span>|<span class="number">64</span>|<span class="number">128</span>|<span class="number">256</span>|<span class="number">512</span>|<span class="number">1024</span>&gt;] [ExclusiveAccess]</span><br><span class="line">storcli /cx add VD cachecade|nytrocache r[aid][<span class="number">0</span>,<span class="number">1</span>,<span class="number">10</span>, <span class="number">1</span>EC] </span><br><span class="line">    drives = [e:]s|[e:]s-x|[e:]s-x,y [WT| WB] [assignvds = <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>] [BOOTVOLSIZE=x]</span><br><span class="line">storcli /cx/ex show all </span><br><span class="line">storcli /cx/ex show status </span><br><span class="line">storcli /cx/vx del [cachecade] [force]</span><br><span class="line">storcli /cx delete events</span><br><span class="line">storcli /cx show events [[<span class="built_in">type</span>= &lt;sincereboot| sinceshutdown| includedeleted|</span><br><span class="line">latest=x| ccincon vd=&lt;<span class="number">0</span>,<span class="number">1</span>,...&gt;] filter=&lt;info|warning|critical|fatal&gt;]</span><br><span class="line">file=&lt;filepath&gt;</span><br><span class="line">storcli /cx show eventloginfo</span><br><span class="line">storcli /cx show health [all]</span><br><span class="line">storcli /cx delete securitykey</span><br><span class="line">storcli /cx <span class="built_in">set</span> securitykey=xxxxxxxx &#123;passphrase=xxxx&#125; &#123;keyid=xxx&#125;</span><br><span class="line">storcli /cx start Diag Duration=&lt;Val&gt; </span><br><span class="line">storcli /cx <span class="built_in">set</span> securitykey keyid=xxx</span><br><span class="line">storcli /cx compare securitykey=xxxxxxxxxx</span><br><span class="line">storcli /cx <span class="built_in">set</span> termlog[=on|off|offthisboot]</span><br><span class="line">storcli /cx show termlog [<span class="built_in">type</span>=config|contents]</span><br><span class="line">storcli /cx delete termlog</span><br><span class="line">storcli /cx Compare factorysettings file=&lt;filepath&gt;</span><br><span class="line">storcli /cx Compare factorysettings raw file=&lt;filepath&gt;</span><br><span class="line">storcli /cx <span class="built_in">set</span> securitykey=xxxxxxxx oldsecuritykey=xxxxxxxx</span><br><span class="line">    &#123;passphrase=xxxx&#125; &#123;keyid=xxx&#125;</span><br><span class="line">storcli /cx/dx show </span><br><span class="line">storcli /cx/dall show cachecade </span><br><span class="line">storcli /cx/dx show all </span><br><span class="line">storcli /cx show freespace</span><br><span class="line">storcli /cx/fall show [all] [securityKey = xxx]</span><br><span class="line">storcli /cx/fall del|delete [securityKey = xxx]</span><br><span class="line">storcli /cx/fall import [preview] [securityKey = xxx]</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> ssdcaching=on|off</span><br><span class="line">storcli /cx/dx <span class="built_in">set</span> security=on</span><br><span class="line">storcli /cx/vx show expansion</span><br><span class="line">storcli /cx show fshinting</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> fshinting=&lt;value&gt;</span><br><span class="line">storcli /cx/vx expand Size=&lt;xx&gt; [expandarray]</span><br><span class="line">storcli /cx[/ex]/sx show </span><br><span class="line">storcli /cx[/ex]/sx show all</span><br><span class="line">storcli /cx[/ex]/sx start rebuild </span><br><span class="line">storcli /cx[/ex]/sx stop rebuild </span><br><span class="line">storcli /cx[/ex]/sx pause rebuild </span><br><span class="line">storcli /cx[/ex]/sx resume rebuild </span><br><span class="line">storcli /cx[/ex]/sx show rebuild </span><br><span class="line">storcli /cx[/ex]/sx show health </span><br><span class="line">storcli /cx[/ex]/sx start copyback target=e:s </span><br><span class="line">storcli /cx[/ex]/sx stop copyback </span><br><span class="line">storcli /cx[/ex]/sx pause copyback </span><br><span class="line">storcli /cx[/ex]/sx resume copyback </span><br><span class="line">storcli /cx[/ex]/sx show copyback </span><br><span class="line">storcli /cx[/ex]/sx start initialization  </span><br><span class="line">storcli /cx[/ex]/sx stop initialization  </span><br><span class="line">storcli /cx[/ex]/sx show initialization  </span><br><span class="line">storcli /cx[/ex]/sx start locate  </span><br><span class="line">storcli /cx[/ex]/sx stop locate  </span><br><span class="line">storcli /cx[/ex]/sx show securitykey keyid </span><br><span class="line">storcli /cx[/ex]/sx add hotsparedrive [DGs=&lt;N|<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>...&gt;] [enclaffinity]</span><br><span class="line">    [nonrevertible]</span><br><span class="line">storcli /cx[/ex]/sx delete hotsparedrive</span><br><span class="line">storcli /cx[/ex]/sx spinup</span><br><span class="line">storcli /cx[/ex]/sx spindown</span><br><span class="line">storcli /cx[/ex]/sx <span class="built_in">set</span> online </span><br><span class="line">storcli /cx[/ex]/sx <span class="built_in">set</span> offline </span><br><span class="line">storcli /cx[/ex]/sx <span class="built_in">set</span> missing </span><br><span class="line">storcli /cx[/ex]/sx <span class="built_in">set</span> jbod </span><br><span class="line">storcli /cx[/ex]/sx <span class="built_in">set</span> good [force]  </span><br><span class="line">storcli /cx[/ex]/sx insert dg=A array=B row=C </span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> emulationType=<span class="number">0</span>|<span class="number">1</span></span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> wrcache=WT|WB|AWB</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> rdcache=RA|NoRA</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> iopolicy=Cached|Direct</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> accesspolicy=RW|RO|Blocked|RmvBlkd</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> pdcache=On|Off|Default</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> name=&lt;NameString&gt;</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> HostAccess=ExclusiveAccess|SharedAccess</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> ds=Default|Auto|None|Max|MaxNoCache</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> autobgi=On|Off</span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> pi=Off</span><br><span class="line">storcli /cx/vx show</span><br><span class="line">storcli /cx/vx show all</span><br><span class="line">storcli /cx/vx show init</span><br><span class="line">storcli /cx/vx show cc</span><br><span class="line">storcli /cx/vx show erase</span><br><span class="line">storcli /cx/vx show migrate</span><br><span class="line">storcli /cx/vx show bgi</span><br><span class="line">storcli /cx/vx show autobgi</span><br><span class="line">storcli /cx/vx show trim</span><br><span class="line">storcli /cx <span class="built_in">set</span> consistencycheck|cc=[off|seq|conc] [delay=value]</span><br><span class="line">    starttime=yyyy/mm/dd hh] [excludevd=x-y,z]</span><br><span class="line">storcli /cx show cc|consistencycheck</span><br><span class="line">storcli /cx show ocr </span><br><span class="line">storcli /cx <span class="built_in">set</span> ocr=&lt;on|off&gt;</span><br><span class="line">storcli /cx/vx start init[Full][Force]</span><br><span class="line">storcli /cx/vx start erase [simple|normal|thorough|standard][patternA=&lt;val&gt;]</span><br><span class="line">[patternB=&lt;val&gt;]</span><br><span class="line">storcli /cx/vx start cc[Force]</span><br><span class="line">storcli /cx/vx start migrate <span class="built_in">type</span>=raidx [option=add|remove </span><br><span class="line">    drives=[e:]s|[e:]s-x|[e:]s-x,y] [Force] </span><br><span class="line">storcli /cx/vx stop init</span><br><span class="line">storcli /cx/vx stop erase</span><br><span class="line">storcli /cx/vx stop cc</span><br><span class="line">storcli /cx/vx stop bgi</span><br><span class="line">storcli /cx/vx pause cc</span><br><span class="line">storcli /cx/vx pause bgi</span><br><span class="line">storcli /cx/vx resume cc</span><br><span class="line">storcli /cx/vx resume bgi</span><br><span class="line">storcli /cx show </span><br><span class="line">storcli /cx show all </span><br><span class="line">storcli /cx show preservedcache </span><br><span class="line">storcli /cx/vx delete preservedcache[force] </span><br><span class="line">storcli /cx[/ex]/sx download src=&lt;filepath&gt; [satabridge] [mode= <span class="number">5</span>|<span class="number">7</span>]</span><br><span class="line">storcli /cx/ex download src=&lt;filepath&gt; [forceActivate] </span><br><span class="line">storcli /cx[/ex]/sx secureerase [force]  </span><br><span class="line">storcli /cx[/ex]/sx start erase [simple| normal| thorough | standard| threepass]</span><br><span class="line">   [patternA=&lt;val&gt;] [patternB=&lt;val&gt;]</span><br><span class="line">storcli /cx[/ex]/sx stop erase </span><br><span class="line">storcli /cx[/ex]/sx show erase </span><br><span class="line">storcli /cx[/ex]/sx show rawdata pageaddr=&lt;pageaddress <span class="keyword">in</span> hex&gt; file=&lt;filename&gt; </span><br><span class="line">storcli /cx[/ex]/sx <span class="built_in">set</span> bootdrive=&lt;on|off&gt; </span><br><span class="line">storcli /cx/vx <span class="built_in">set</span> bootdrive=&lt;on|off&gt;</span><br><span class="line">storcli /cx show bootdrive</span><br><span class="line">storcli /cx show bootwithpinnedcache</span><br><span class="line">storcli /cx <span class="built_in">set</span> bootwithpinnedcache=&lt;on|off&gt;</span><br><span class="line">storcli /cx show activityforlocate</span><br><span class="line">storcli /cx <span class="built_in">set</span> activityforlocate=&lt;on|off&gt;</span><br><span class="line">storcli /cx show copyback</span><br><span class="line">storcli /cx <span class="built_in">set</span> copyback=&lt;on|off&gt; <span class="built_in">type</span>=smartssd|smarthdd|all </span><br><span class="line">storcli /cx show jbod</span><br><span class="line">storcli /cx <span class="built_in">set</span> jbod=&lt;on|off&gt; </span><br><span class="line">storcli /cx <span class="built_in">set</span> autorebuild=&lt;on|off&gt; </span><br><span class="line">storcli /cx show autorebuild</span><br><span class="line">storcli /cx show cachebypass</span><br><span class="line">storcli /cx <span class="built_in">set</span> cachebypass=&lt;on|off&gt; </span><br><span class="line">storcli /cx show usefdeonlyencrypt</span><br><span class="line">storcli /cx <span class="built_in">set</span> usefdeonlyencrypt=&lt;on|off&gt;</span><br><span class="line">storcli /cx show prcorrectunconfiguredareas</span><br><span class="line">storcli /cx <span class="built_in">set</span> prcorrectunconfiguredareas=&lt;on|off&gt; </span><br><span class="line">storcli /cx show batterywarning</span><br><span class="line">storcli /cx <span class="built_in">set</span> batterywarning=&lt;on|off&gt; </span><br><span class="line">storcli /cx show abortcconerror</span><br><span class="line">storcli /cx <span class="built_in">set</span> abortcconerror=&lt;on|off&gt; </span><br><span class="line">storcli /cx show ncq</span><br><span class="line">storcli /cx <span class="built_in">set</span> ncq=&lt;on|off&gt; </span><br><span class="line">storcli /cx show maintainpdfailhistory</span><br><span class="line">storcli /cx <span class="built_in">set</span> maintainpdfailhistory=&lt;on|off&gt; </span><br><span class="line">storcli /cx show restorehotspare</span><br><span class="line">storcli /cx <span class="built_in">set</span> restorehotspare=&lt;on|off&gt; </span><br><span class="line">storcli /cx <span class="built_in">set</span> bios [state=&lt;on|off&gt;] [Mode=&lt;SOE|BE|HCOE|HSM&gt;] [abs=&lt;on|off&gt;]</span><br><span class="line">storcli /cx show bios </span><br><span class="line">storcli /cx show alarm</span><br><span class="line">storcli /cx <span class="built_in">set</span> alarm=&lt;on|off|silence&gt; </span><br><span class="line">storcli /cx show foreignautoimport</span><br><span class="line">storcli /cx <span class="built_in">set</span> foreignautoimport=&lt;on|off&gt; </span><br><span class="line">storcli /cx show directpdmapping</span><br><span class="line">storcli /cx <span class="built_in">set</span> directpdmapping=&lt;on|off&gt; </span><br><span class="line">storcli /cx show rebuildrate</span><br><span class="line">storcli /cx <span class="built_in">set</span> rebuildrate=&lt;value&gt; </span><br><span class="line">storcli /cx show loadbalancemode</span><br><span class="line">storcli /cx <span class="built_in">set</span> loadbalancemode=&lt;on|off&gt; </span><br><span class="line">storcli /cx show eghs</span><br><span class="line">storcli /cx <span class="built_in">set</span> eghs [state=&lt;on|off&gt;] [eug=&lt;on|off&gt;] [smarter=&lt;on|off&gt;] </span><br><span class="line">storcli /cx show cacheflushint</span><br><span class="line">storcli /cx <span class="built_in">set</span> cacheflushint=&lt;value&gt; </span><br><span class="line">storcli /cx show prrate</span><br><span class="line">storcli /cx <span class="built_in">set</span> prrate=&lt;value&gt; </span><br><span class="line">storcli /cx show ccrate</span><br><span class="line">storcli /cx <span class="built_in">set</span> ccrate=&lt;value&gt; </span><br><span class="line">storcli /cx show bgirate</span><br><span class="line">storcli /cx <span class="built_in">set</span> bgirate =&lt;value&gt; </span><br><span class="line">storcli /cx show dpm </span><br><span class="line">storcli /cx <span class="built_in">set</span> dpm =&lt;on|off&gt; </span><br><span class="line">storcli /cx show sgpioforce </span><br><span class="line">storcli /cx <span class="built_in">set</span> sgpioforce =&lt;on|off&gt; </span><br><span class="line">storcli /cx <span class="built_in">set</span> supportssdpatrolread =&lt;on|off&gt; </span><br><span class="line">storcli /cx show migraterate</span><br><span class="line">storcli /cx <span class="built_in">set</span> migraterate=&lt;value&gt; </span><br><span class="line">storcli /cx show spinupdrivecount</span><br><span class="line">storcli /cx show wbsupport</span><br><span class="line">storcli /cx <span class="built_in">set</span> spinupdrivecount=&lt;value&gt; </span><br><span class="line">storcli /cx show spinupdelay</span><br><span class="line">storcli /cx <span class="built_in">set</span> spinupdelay=&lt;value&gt; </span><br><span class="line">storcli /cx show coercion</span><br><span class="line">storcli /cx <span class="built_in">set</span> coercion=&lt;value&gt; </span><br><span class="line">storcli /cx show smartpollinterval</span><br><span class="line">storcli /cx <span class="built_in">set</span> smartpollinterval=&lt;value&gt; </span><br><span class="line">storcli /cx show eccbucketsize</span><br><span class="line">storcli /cx <span class="built_in">set</span> eccbucketsize=&lt;value&gt; </span><br><span class="line">storcli /cx show eccbucketleakrate</span><br><span class="line">storcli /cx <span class="built_in">set</span> eccbucketleakrate=&lt;value&gt; </span><br><span class="line">storcli /cx show backplane</span><br><span class="line">storcli /cx <span class="built_in">set</span> backplane mode=&lt;value&gt; expose=&lt;on/off&gt; </span><br><span class="line">storcli /cx show perfmode</span><br><span class="line">storcli /cx <span class="built_in">set</span> perfmode=&lt;value&gt; [maxflushlines=&lt;value&gt; numiostoorder=&lt;value&gt;]</span><br><span class="line">storcli /cx show perfmodevalues</span><br><span class="line">storcli /cx show pi</span><br><span class="line">storcli /cx <span class="built_in">set</span> pi [state=&lt;on|off&gt;] [import=&lt;on|off&gt;]</span><br><span class="line">storcli /cx show time</span><br><span class="line">storcli /cx <span class="built_in">set</span> time=&lt;yyyymmdd hh:mm:ss | systemtime&gt; </span><br><span class="line">storcli /cx show ds</span><br><span class="line">storcli /cx <span class="built_in">set</span> ds=OFF <span class="built_in">type</span>=<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">4</span></span><br><span class="line">storcli /cx <span class="built_in">set</span> ds=ON <span class="built_in">type</span>=<span class="number">1</span>|<span class="number">2</span> [properties]</span><br><span class="line">storcli /cx <span class="built_in">set</span> ds=ON <span class="built_in">type</span>=<span class="number">3</span>|<span class="number">4</span> DefaultLdType=&lt;val&gt; [properties]</span><br><span class="line">storcli /cx <span class="built_in">set</span> ds [properties] </span><br><span class="line">storcli /cx show safeid</span><br><span class="line">storcli /cx show rehostinfo</span><br><span class="line">storcli /cx show pci</span><br><span class="line">storcli /cx show ASO</span><br><span class="line">storcli /cx <span class="built_in">set</span> aso key=&lt;key value&gt; preview</span><br><span class="line">storcli /cx <span class="built_in">set</span> aso key=&lt;key value&gt;</span><br><span class="line">storcli /cx <span class="built_in">set</span> aso transfertovault</span><br><span class="line">storcli /cx <span class="built_in">set</span> aso rehostcomplete</span><br><span class="line">storcli /cx <span class="built_in">set</span> aso deactivatetrialkey</span><br><span class="line">storcli /cx <span class="built_in">set</span> factory defaults</span><br><span class="line">storcli /cx download file=&lt;filepath&gt; [fwtype=&lt;val&gt;] [ResetNow] [nosigchk] </span><br><span class="line">    [noverchk]</span><br><span class="line">storcli /cx flush|flushcache</span><br><span class="line">storcli /cx/px show </span><br><span class="line">storcli /cx/px show all</span><br><span class="line">storcli /cx/px <span class="built_in">set</span> linkspeed=<span class="number">0</span>|<span class="number">1.5</span>|<span class="number">3</span>|<span class="number">6</span>|<span class="number">12</span> </span><br><span class="line">storcli /cx/bbu show </span><br><span class="line">storcli /cx/bbu <span class="built_in">set</span> SCAPVPD file=&lt;input file path&gt; VPDPage=&lt;SCapVPDFixed&gt;</span><br><span class="line">storcli /cx/bbu show all </span><br><span class="line">storcli /cx/bbu show status </span><br><span class="line">storcli /cx/bbu show properties </span><br><span class="line">storcli /cx/bbu show learn </span><br><span class="line">storcli /cx/bbu show gasgauge Offset=xxxx Numbytes=n </span><br><span class="line">storcli /cx/bbu start learn </span><br><span class="line">storcli /cx/bbu show modes </span><br><span class="line">storcli /cx/bbu <span class="built_in">set</span> [ learnDelayInterval=&lt;val&gt; | bbuMode=&lt;val&gt;  </span><br><span class="line">    |learnStartTime=[DDD HH | off] | autolearnmode=&lt;val&gt; | powermode=sleep | writeaccess=sealed ]</span><br><span class="line">storcli /cx/cv show </span><br><span class="line">storcli /cx/cv show all </span><br><span class="line">storcli /cx/cv show status </span><br><span class="line">storcli /cx/cv show learn </span><br><span class="line">storcli /cx/cv start learn </span><br><span class="line">storcli /cx show securitykey keyid </span><br><span class="line">storcli /cx start patrolread</span><br><span class="line">storcli /cx stop patrolread</span><br><span class="line">storcli /cx pause patrolread</span><br><span class="line">storcli /cx resume patrolread</span><br><span class="line">storcli /cx show patrolRead</span><br><span class="line">storcli /cx show powermonitoringinfo</span><br><span class="line">storcli /cx <span class="built_in">set</span> patrolread = &#123;&#123;on mode=&lt;auto|manual&gt; &#125;|&#123;off&#125;&#125;</span><br><span class="line">storcli /cx <span class="built_in">set</span> patrolread [starttime=&lt; yyyy/mm/dd hh&gt;] </span><br><span class="line">    [maxconcurrentpd =&lt;value&gt;] [includessds=&lt;on|onlymixed|off&gt;]</span><br><span class="line">    [uncfgareas=on|off]</span><br><span class="line">storcli /cx <span class="built_in">set</span> patrolread delay = &lt;value&gt;</span><br><span class="line">storcli /cx[/ex]/sx show diag paniclog [Query] | [ExtractSlot=x] </span><br><span class="line">                                         | [EraseSlot=x] [file=filepath]</span><br><span class="line">storcli /cx[/ex]/sx show diag smartlog [file=filepath] </span><br><span class="line">storcli /cx[/ex]/sx show diag errorlog [file=filepath] </span><br><span class="line">storcli /cx del Nytrocache [force]</span><br><span class="line">storcli /cx show badblocks</span><br><span class="line">storcli /cx flasherase </span><br><span class="line">storcli /cx shutdown </span><br><span class="line">storcli /cx/mx <span class="built_in">set</span> mode=&lt;Internal | External | Auto&gt; </span><br><span class="line">storcli /cx/mx show </span><br><span class="line">storcli /cx transform iMR </span><br><span class="line">storcli /cx restart </span><br><span class="line">storcli /cx/vx show BBMT</span><br><span class="line">storcli /cx/vx delete BBMT</span><br><span class="line">storcli /xd add <span class="built_in">type</span>=CacheDev </span><br><span class="line">                &lt;devices=comma separated cache devices  | ALL&gt; [force] </span><br><span class="line">storcli /xd add <span class="built_in">type</span>=VirtualDrive </span><br><span class="line">                &lt;devices=comma separated Virtual drives | ALL&gt; </span><br><span class="line">storcli /xd delete <span class="built_in">type</span>=&lt;CacheDev | VirtualDrive&gt; </span><br><span class="line">                        &lt;devices=comma separated cache devices or </span><br><span class="line">                        Virtual drives as applicable | ALL&gt; </span><br><span class="line">storcli /xd show <span class="built_in">type</span>=&lt;CacheDev | VirtualDrive&gt; [state=&lt;assigned|unassigned&gt;] </span><br><span class="line">storcli /xd show </span><br><span class="line">storcli /xd show perfmon </span><br><span class="line">storcli /xd/wd&lt;X|ALL&gt; show </span><br><span class="line">storcli /xd/wd&lt;X|ALL&gt; show safeid </span><br><span class="line">storcli /xd <span class="built_in">set</span> online [Vds=comma separated VD ids] </span><br><span class="line">storcli /xd/wdX apply key=value </span><br><span class="line">storcli /cx[/ex]/sx start format [thorough] </span><br><span class="line">storcli /cx show dequeuelog file=&lt;filepath&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Note:Use <span class="string">'page=[x]'</span>as the last option <span class="keyword">in</span> all the commands to <span class="built_in">set</span> the page break.</span><br><span class="line">      X=lines per page. E.g. <span class="string">'storcli help page=10'</span></span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      利用StorCLI命令不停机在线更换JBOD硬盘
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Solarflare低延迟万兆网卡配置和性能调优实践</title>
    <link href="https://wsgzao.github.io/post/solarflare/"/>
    <id>https://wsgzao.github.io/post/solarflare/</id>
    <published>2016-11-25T08:17:46.000Z</published>
    <updated>2016-11-25T06:43:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>因为交易系统部的同事在测试研究Intel DPDK和Solarflare的低延迟性能，硬件是Dell R730，OS为RHEL7.2，之前也对DPDK有所了解借这个机会再多接触一些，前者是开源方案但需要强大的技术团队支撑，而后者却是小众但几乎垄断全球交易所的商业方案，随着PCIe SSD，分布式存储，万兆交换机的崛起，这个市场也变得越来越活跃了。</p>
<blockquote>
<p>Solarflare make servers faster and more secure.</p>
</blockquote>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2016年11月25日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/solarflare/" target="_blank" rel="external">https://wsgzao.github.io/post/solarflare/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Solarflare - <a href="https://support.solarflare.com/index.php/component/cognidox/?view=categories&amp;id=1945" target="_blank" rel="external">https://support.solarflare.com/index.php/component/cognidox/?view=categories&amp;id=1945</a><br>OpenOnload - <a href="http://www.openonload.org/download.html" target="_blank" rel="external">http://www.openonload.org/download.html</a></p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p>Solarflare网卡安装与测试<br><a href="http://wenku.baidu.com/view/31652e7204a1b0717ed5dd13" target="_blank" rel="external">http://wenku.baidu.com/view/31652e7204a1b0717ed5dd13</a></p>
<p>Solarflare Quick SetupGuide_cn_1.3<br><a href="http://wenku.baidu.com/view/3d2f7c7a30b765ce0508763231126edb6f1a7610" target="_blank" rel="external">http://wenku.baidu.com/view/3d2f7c7a30b765ce0508763231126edb6f1a7610</a></p>
<h2 id="测试过程"><a href="#测试过程" class="headerlink" title="测试过程"></a>测试过程</h2><h3 id="install-sfc"><a href="#install-sfc" class="headerlink" title="install sfc"></a>install sfc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#yum install packages</span></span><br><span class="line">yum install gcc make kernel-devel perl autoconf automake libtool pciutils net-tools -y</span><br><span class="line"><span class="comment">#解压执行安装</span></span><br><span class="line"><span class="built_in">cd</span> openonload-<span class="number">201606</span>/scripts</span><br><span class="line">./onload_install</span><br><span class="line"><span class="comment">#reload onload</span></span><br><span class="line">onload_tool reload</span><br></pre></td></tr></table></figure>
<h3 id="remove-sfc"><a href="#remove-sfc" class="headerlink" title="remove sfc"></a>remove sfc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#unload onload</span></span><br><span class="line">onload_tool unload</span><br><span class="line"><span class="comment">#remove sfc</span></span><br><span class="line">modprobe –r sfc</span><br><span class="line"><span class="comment">#if found any sfc rpm, then remove them</span></span><br><span class="line">rpm -qa | grep sfc</span><br><span class="line">rpm <span class="operator">-e</span> *sfc*.rpm</span><br><span class="line"><span class="comment">#unintall onload</span></span><br><span class="line">onload_uninstall</span><br></pre></td></tr></table></figure>
<h3 id="tuning"><a href="#tuning" class="headerlink" title="tuning"></a>tuning</h3><blockquote>
<p>测试低延迟有条件建议先host直连再选择交换机，简单的ping无法验证具体数据，可以采用sfnettest来评估</p>
</blockquote>
<p>UDP - 1700ns<br>TCP - 1900ns </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#collect sfreport</span></span><br><span class="line">./sfreport.pl</span><br><span class="line"></span><br><span class="line"><span class="comment">#update firmware</span></span><br><span class="line">sfupdate --write</span><br><span class="line">dracut <span class="operator">-f</span></span><br><span class="line"><span class="comment">#if reboot not work, you need cut power and startup after one minute</span></span><br><span class="line">init <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#tuned-adm</span></span><br><span class="line">tuned-adm list</span><br><span class="line">tuned-adm profile latency-performance</span><br><span class="line"></span><br><span class="line"><span class="comment">#sfnettest</span></span><br><span class="line">onload -p latency ./sfnt-pingpong udp <span class="number">10.0</span>.<span class="number">21.10</span></span><br><span class="line">onload -p latency ./sfnt-pingpong tcp <span class="number">10.0</span>.<span class="number">21.10</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Solarflare make servers faster and more secure.
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Red Hat Enterprise Linux 6 升级 Red Hat Enterprise Linux 7 经验分享</title>
    <link href="https://wsgzao.github.io/post/rhel-upgrade/"/>
    <id>https://wsgzao.github.io/post/rhel-upgrade/</id>
    <published>2016-10-13T03:17:46.000Z</published>
    <updated>2016-10-13T03:41:29.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>因为交易系统部的同事提出了一个新的需求要将现有的RHEL6.7升级至RHEL7.1(最好保留数据升级)，之前对于小版本的升级无论是CentOS还是Redhat都可以直接通过yum update的方式实现软件包和内核的迭代更新，但是这次的需求经过Redhat知识库的研究发现这几乎是一个不可能轻松实现的任务，原因就是Redhat压根不支持大版本之间的升级，考虑到跨版本兼容性问题和原厂不做技术支持这两点，通过和Redhat二线电话沟通也确认了最终的实现方案，就是先备份相关重要配置和数据格式化/分区保留其它文件系统，重装后在把数据迁移回来。整个过程虽然提不上什么惊心动魄，但至少翻阅了大量材料，官方虽然给出了跨版本升级的步骤，但实现的代价和要求真的太高，这里一并分享出来方便大家学习和思考。</p>
<blockquote>
<p>How do I upgrade from RHEL 6 to RHEL 7? Reinstall</p>
</blockquote>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2016年10月13日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/rhel-upgrade/" target="_blank" rel="external">https://wsgzao.github.io/post/rhel-upgrade/</a></p>
<p><strong>扩展阅读</strong></p>
<p>红帽支持 RHEL 主版本之间的升级吗？- <a href="https://access.redhat.com/zh_CN/solutions/1388653" target="_blank" rel="external">https://access.redhat.com/zh_CN/solutions/1388653</a><br>How do I upgrade from RHEL 6 to RHEL 7? - <a href="https://access.redhat.com/solutions/637583" target="_blank" rel="external">https://access.redhat.com/solutions/637583</a></p>
<hr>
<h2 id="红帽支持-RHEL-主版本之间的升级吗？"><a href="#红帽支持-RHEL-主版本之间的升级吗？" class="headerlink" title="红帽支持 RHEL 主版本之间的升级吗？"></a>红帽支持 RHEL 主版本之间的升级吗？</h2><h3 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h3><ul>
<li>Red Hat Enterprise Linux 4</li>
<li>Red Hat Enterprise Linux 5</li>
<li>Red Hat Enterprise Linux 6</li>
<li>Red Hat Enterprise Linux 7</li>
</ul>
<h3 id="Issue"><a href="#Issue" class="headerlink" title="Issue"></a>Issue</h3><ul>
<li>如何从红帽企业版 Linux 的一个版本升级到另一个版本？</li>
<li>可以从 RHEL 的不同主版本之间移植吗？</li>
<li>红帽支持 RHEL 主版本之间的升级吗（比如从5升级到6）？</li>
<li>可以在 RHEL 5 上安装 RHEL 6 吗？</li>
<li>安装介质没有包含升级选项；</li>
<li>如何从 <code>RHEL 5</code> 升级到 <code>RHEL 6</code> ？</li>
</ul>
<h3 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h3><blockquote>
<p>Red Hat Enterprise Linux 4, 5, 6</p>
</blockquote>
<p>红帽 <strong>不支持</strong> RHEL 主版本之间的跨大版本升级。（主版本以整数表示。比如，RHEL 5 和 RHEL 6 都是不同的主版本。）</p>
<p>不同主版本之间的跨大版本升级，不会保留所有系统设置、服务配置和自定义设置。因此， <strong>红帽强烈建议重新安装系统，以进行主版本之间的升级</strong> 。建议在运行着的服务器旁，使用新的服务器安装一个全新的RHEL，然后把原有的设 置、软件和数据迁移到新服务器上，以确保系统和软件能在新服务器上正确运行。 这还有助于确保数据安全地从备份转移到新的系统。</p>
<p>还有方法可以不进行全新安装，来进行升级。要实现这个功能，插入新版本的安装光盘，然后在 boot 命令行中输入：</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># linux upgradeany</span></span><br></pre></td></tr></table></figure>
<p>这将引导您进行与 普通的安装过程很相近的升级步骤。再次说明，这个过程红帽是不予支持的。进行完这个升级操作后，如果您联系红帽技术支持，红帽只会当作全新的安装来提供支持。升级过程中产生的问题是不予支持的。任何时候出现的问题如果疑似与升级过程有关，红帽将要求您重新安装系统。</p>
<h3 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h3><ul>
<li>红帽建议，系统升级之前要先全面备份数据。</li>
<li>如果之前安装有第三方软件，建议在新系统上重新安装。</li>
<li>更换新版本系统后，个别软件包的配置文件可能会失效，因为新版本配置文件的格式和排列可能会有所变化。</li>
<li>如果之前安装有红帽的 layered products （比如 Cluster Suite）, 需要在新系统完全安装之后，手动升级它们。</li>
<li>用升级选项进行升级，系统可能会出现不稳定的情况。</li>
<li>如果出现意外情况，红帽全球支持只能建议您按照建议的方式，重新安装系统并进行迁移。</li>
</ul>
<p>可参考文档， <a href="https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Installation_Guide/ch-upgrade-x86.html" target="_blank" rel="external">Red Hat Enterprise Linux 6 Installation Guide, Chapter 37. Upgrading Your Current System</a></p>
<p>升级或重新安装系统后，请重新注册系统，请参考 <a href="https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Installation_Guide/ch-upgrade-x86.html" target="_blank" rel="external">Red Hat Enterprise Linux 6 Installation Guide, Chapter 37. Upgrading Your Current System</a></p>
<blockquote>
<p>Red Hat Enterprise Linux 7</p>
</blockquote>
<p>对于特定的使用情况，红帽支持从 <code>Red Hat Enterprise Linux 6</code> 升级到 <code>Red Hat Enterprise Linux 7</code> 。更多信息，请参考以下文档：</p>
<ul>
<li><a href="https://access.redhat.com/site/solutions/637583" target="_blank" rel="external">How do I upgrade from RHEL 6 to RHEL 7?</a></li>
<li><a href="https://access.redhat.com/site/solutions/799813" target="_blank" rel="external">What are the supported use cases for upgrading from RHEL 6 to RHEL 7?</a></li>
<li><a href="https://access.redhat.com/site/solutions/912213" target="_blank" rel="external">How do I subscribe to the RHEL Extras channel/repo?</a></li>
<li><a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/" target="_blank" rel="external">Red Hat Enterprise Linux 7 Installation Guide</a></li>
</ul>
<p>如有问题，请联系红帽全球支持服务 <a href="https://access.redhat.com/support/cases/new" target="_blank" rel="external">file a support case</a> ，或在 <a href="https://access.redhat.com/site/discussions/" target="_blank" rel="external">Discussions area of the Customer Portal</a> 中进行讨论。</p>
<h2 id="How-do-I-upgrade-from-RHEL-6-to-RHEL-7"><a href="#How-do-I-upgrade-from-RHEL-6-to-RHEL-7" class="headerlink" title="How do I upgrade from RHEL 6 to RHEL 7"></a>How do I upgrade from RHEL 6 to RHEL 7</h2><h3 id="Environment-1"><a href="#Environment-1" class="headerlink" title="Environment"></a>Environment</h3><blockquote>
<p>Red Hat Enterprise Linux 6.x to Red Hat Enterprise Linux 7</p>
</blockquote>
<table border="1"><br><tr><br><th><strong>Product Variant</strong></th><br><th><strong>x86 Architecture</strong></th><br><th><strong>x86_64 Architecture</strong></th><br><th><strong>IBM Power</strong></th><br><th><strong>IBM z Systems</strong></th><br></tr><br><tr><br><td><strong>Desktop Edition</strong></td><br><td>Not supported</td><br><td>Not supported</td><br><td>N/A</td><br><td>N/A</td><br></tr><br><tr><br><td><strong>Workstation Edition</strong></td><br><td>Not supported</td><br><td>Not supported</td><br><td>N/A</td><br><td>N/A</td><br></tr><br><tr><br><td><strong>Server Edition</strong></td><br><td>Not supported</td><br><td><font color="blue"><strong>Supported</strong></font></td><br><td><font color="blue"><strong>Supported[1]</strong></font></td><br><td><font color="blue"><strong>Supported[2]</strong></font></td><br></tr><br><tr><br><td><strong>HPC Compute Node</strong></td><br><td>Not supported</td><br><td><font color="blue"><strong>Supported</strong></font></td><br><td>N/A</td><br><td>N/A</td><br></tr><br><tr><br><td><strong>Server running CloudForms software</strong></td><br><td>N/A</td><br><td>Not supported</td><br><td>N/A</td><br><td>N/A</td><br></tr><br></table>

<p>[1] Red Hat Enterprise Linux for Power, big endian<br>[2] Red Hat Enterprise Linux for IBM z Systems</p>
<h3 id="Issue-1"><a href="#Issue-1" class="headerlink" title="Issue"></a>Issue</h3><ul>
<li>How do I do in-place upgrading from the latest Red Hat Enterprise Linux 6 to the latest Red Hat Enterprise Linux 7?</li>
<li>How do I use the preupgrade assistant and redhat-upgrade-tool to run a RHEL6 to RHEL7 upgrade?</li>
</ul>
<h3 id="Resolution-1"><a href="#Resolution-1" class="headerlink" title="Resolution"></a>Resolution</h3><p>Red Hat Enterprise Linux 7 (RHEL 7) is the first major release of RHEL to allow in-place upgrades from the previous RHEL major release (RHEL 6). An in-place upgrade offers a way of upgrading a system to a new major release of Red Hat Enterprise Linux by replacing the existing operating system.</p>
<p>This RHEL 6 to RHEL 7 upgrade procedure is fully supported if your Red Hat Enterprise Linux system meets the following criteria:</p>
<p><strong>Latest Red Hat Enterprise Linux 6</strong>: Before upgrading to the latest RHEL 7, you must start with RHEL 6 and update your system to have the latest RHEL 6 packages installed. (This is covered in the procedure below.)</p>
<p><strong>All Server editions (except x86)</strong>: All server editions (except x86) of Red Hat Enterprise Linux 6 can be upgraded with this procedure. Upgrades of RHEL Workstation and Desktop systems are not supported. Upgrades for the POWER architecture is supported. SEE TABLE ABOVE. Upgrade from 32-bit architecture is not supported.</p>
<p><strong>Limited package groups</strong>: The upgrade process handles only the following package groups and packages: Minimal (@minimal), Base (@base), Web Server (@web-server), DHCP Server, File Server (@nfs-server), and Print Server (@print-server). Although upgrades of other packages and groups are not supported, in some cases, packages can be uninstalled from the RHEL 6 system and reinstalled on the upgraded RHEL 7 system without a problem. SEE TABLE BELOW.</p>
<p>The supported use cases for upgrading RHEL 6 to RHEL 7:</p>
<table><br><thead><br><tr><br><th></th><br><th>Supported</th><br><th>Unsupported</th><br></tr><br></thead><br><tbody><br><tr><br><td><strong>Source to Upgrade</strong></td><br><td>The latest RHEL-6.X</td><br><td>RHEL 6.4 and earlier</td><br></tr><br><tr><br><td><strong>File Systems</strong></td><br><td>Like-file system upgrades<br>For example ext3 to ext3, ext4 to ext4, xfs to xfs</td><br><td>Unlike-file system upgrades<br>For example ext4 to xfs</td><br></tr><br><tr><br><td><strong>GNOME, KDE</strong></td><br><td>None</td><br><td>All GNOME, KDE installs</td><br></tr><br><tr><br><td><strong>Packages/Groups</strong></td><br><td>Minimal (@minimal)<br>Base (@base)<br>Web Server (@web-server)<br>DHCP Server<br>File Server (@nfs-server)<br>Print Server</td><br><td>All others</td><br></tr><br><tr><br><td><strong>Virtualization</strong></td><br><td>KVM, VMWare</td><br><td>Microsoft Hyper-V (coming soon)</td><br></tr><br><tr><br><td><strong>Red Hat Software Collections</strong></td><br><td>Using tested process</td><br><td>All others</td><br></tr><br><tr><br><td><strong>High Availability</strong></td><br><td>None</td><br><td>All</td><br></tr><br></tbody><br></table>

<p>The upgrade procedure consists of the following basic steps:</p>
<ol>
<li>Prepare for Upgrade: Make sure your system is backed up and up to date before beginning the preupgrade.</li>
<li>Install the Preupgrade Assistant: Enable the required repositories and install the preupgrade packages.</li>
<li>Run the Preupgrade Assistant: Check your system for upgrade issues before running the actual upgrade. No changes are made to your system and you can repeat this step until all issues are dealt with.</li>
<li>Run the Upgrade: Perform the actual upgrade.</li>
<li>Provide Feedback: Create a debug log to send to Red Hat in case there are problems.</li>
</ol>
<h2 id="实践步骤"><a href="#实践步骤" class="headerlink" title="实践步骤"></a>实践步骤</h2><blockquote>
<p>核心目标为格式化/分区，保留其它文件系统，做好相应备份重装RHEL7</p>
</blockquote>
<p>生产环境当前系统版本为RHEL6.7，推荐升级至RHEL7.1或者更新的版本</p>
<blockquote>
<p>通过RHEL7.1的ISO引导至INSTALLATION SUMMARY</p>
</blockquote>
<ul>
<li>DATE &amp; TIME设置为Asia/Shanghai timezone</li>
<li>LANGUAGE SUPPORT添加English(United States),简体中文(中国)</li>
<li>SOFTWARE SELECTION设置为Server with GUI</li>
<li>UBSTAKKATUIB DESTINATION分区选择I will configure partioning，点击DONE</li>
<li>找到现有系统中的/分区，选中后在右侧勾选Reformat，Mount Point设置为/，SYSTEM其它分区SWAP,/boot,/usr,/tmp,/var参照同样操作，DATA数据分区不动，点击DONE</li>
<li>Begin Install</li>
</ul>
<blockquote>
<p>安装结束后恢复备份数据</p>
</blockquote>
<ul>
<li>恢复原有网卡配置项和IP地址</li>
<li>恢复主机名/Hosts/Profile</li>
<li>恢复fstab分区检查数据一致性</li>
</ul>
]]></content>
    
    <summary type="html">
    
      How do I upgrade from RHEL 6 to RHEL 7? Reinstall
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux使用ntfs-3g挂载NTFS最佳实践</title>
    <link href="https://wsgzao.github.io/post/ntfs-3g/"/>
    <id>https://wsgzao.github.io/post/ntfs-3g/</id>
    <published>2016-07-29T08:17:46.000Z</published>
    <updated>2016-07-29T08:46:14.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Linux和Mac OS X因为某些原因本身不支持读写NTFS文件系统，大多数人平时也不需要与NTFS做数据文件的交互，只是有时候Windows用户应急状态下需要使用大容量移动硬盘拷贝数据，必须实现Linux下挂载NTFS，而Tuxera恰好为Linux和Mac用户提供了灰常简单的实现方法。</p>
<blockquote>
<p>Open Source: NTFS-3G，Read-Write NTFS Driver</p>
</blockquote>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2016年07月29日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/ntfs-3g/" target="_blank" rel="external">https://wsgzao.github.io/post/ntfs-3g/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Tuxera - <a href="https://www.tuxera.com/" target="_blank" rel="external">https://www.tuxera.com/</a></p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><blockquote>
<p>我偷个大懒直接引用官方的原话</p>
</blockquote>
<p>NTFS-3G is a stable, full-featured, read-write NTFS driver for Linux, Android, Mac OS X, FreeBSD, NetBSD, OpenSolaris, QNX, Haiku, and other operating systems. It provides safe handling of the Windows XP, Windows Server 2003, Windows 2000, Windows Vista, Windows Server 2008, Windows 7, Windows 8 and Windows 10 NTFS file systems. A <span class="Apple-converted-space"></span> <a href="http://www.tuxera.com/products/tuxera-ntfs-embedded/performance/" target="_blank" rel="external">high-performance</a> <span class="Apple-converted-space"></span> alternative, called Tuxera NTFS is available for <span class="Apple-converted-space"></span> <a href="http://www.tuxera.com/products/tuxera-ntfs-embedded/" target="_blank" rel="external">embedded devices</a> <span class="Apple-converted-space"></span> and <span class="Apple-converted-space"></span> <a href="http://www.tuxera.com/products/tuxera-ntfs-for-mac/" target="_blank" rel="external">Mac OS X</a>.</p>
<p>The release notes and the software changes can be found on the <span class="Apple-converted-space"></span> <a href="http://www.tuxera.com/community/release-history/" target="_blank" rel="external">Release History</a> <span class="Apple-converted-space"></span> page. Subscribe <span class="Apple-converted-space"></span> <a href="http://lists.sourceforge.net/mailman/listinfo/ntfs-3g-news" target="_blank" rel="external">here</a> <span class="Apple-converted-space"></span> for new release notifications.</p>
<h2 id="Open-Source-NTFS-3G"><a href="#Open-Source-NTFS-3G" class="headerlink" title="Open Source: NTFS-3G"></a>Open Source: NTFS-3G</h2><p>Latest Download - <a href="http://www.tuxera.com/community/open-source-ntfs-3g/" target="_blank" rel="external">http://www.tuxera.com/community/open-source-ntfs-3g/</a><br>NTFS-3G Manual -  <a href="http://www.tuxera.com/community/ntfs-3g-manual/" target="_blank" rel="external">http://www.tuxera.com/community/ntfs-3g-manual/</a><br>stable version - <a href="https://tuxera.com/opensource/ntfs-3g_ntfsprogs-2016.2.22.tgz" target="_blank" rel="external">https://tuxera.com/opensource/ntfs-3g_ntfsprogs-2016.2.22.tgz</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Installation</span></span><br><span class="line">tar zxvf /tmp/ntfs-<span class="number">3</span>g_ntfsprogs-<span class="number">2016.2</span>.<span class="number">22</span>.tgz</span><br><span class="line"><span class="built_in">cd</span> ntfs*</span><br><span class="line"><span class="comment">#yum install gcc</span></span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install <span class="comment"># or 'sudo make install' if you aren't root</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Usage</span></span><br><span class="line">fdisk <span class="operator">-l</span></span><br><span class="line">mkdir -p /mnt/windows</span><br><span class="line">mount -t ntfs-<span class="number">3</span>g /dev/sda1 /mnt/windows</span><br><span class="line"><span class="comment">#You can also make NTFS to be mounted during boot by adding the following line to the end of the /etc/fstab file:</span></span><br><span class="line">vi /etc/fstab</span><br><span class="line">/dev/sda1 /mnt/windows ntfs-<span class="number">3</span>g defaults <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="Tuxera-NTFS-for-Mac"><a href="#Tuxera-NTFS-for-Mac" class="headerlink" title="Tuxera NTFS for Mac"></a>Tuxera NTFS for Mac</h2><p>Mac新手入门以及常用软件推荐 - <a href="https://wsgzao.github.io/post/mac/" target="_blank" rel="external">https://wsgzao.github.io/post/mac/</a></p>
]]></content>
    
    <summary type="html">
    
      Open Source NTFS-3G，Read-Write NTFS Driver
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>从大苏菲TL-WDR8600退货降级至腾达AC9的决断</title>
    <link href="https://wsgzao.github.io/post/wdr8600/"/>
    <id>https://wsgzao.github.io/post/wdr8600/</id>
    <published>2016-06-12T08:17:46.000Z</published>
    <updated>2016-06-12T08:31:20.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ww3.sinaimg.cn/large/7207510dgw1f4sim1qwuhj20zk0p07ds.jpg" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>无线路由器从高中老师赠送的NetGear开始，TP-LINK*2，极路由1，小米路由mini，到回归大苏菲感受5G千兆网络技术革新，然而7天的使用体验又促使我降级选择了腾达AC9，技术超前和实用场景的不契合也让我吃了螃蟹坑了爹。虽然不是发烧友但也从KoolShare这样的专业论坛学到不少知识，体验第一代iPhone的人因为热爱和好奇心驱动，折腾自己有时很傻很天真，但也正因为如此他们才会成为第一批看见蓝海的开拓者。</p>
<blockquote>
<p>可惜自己再一次错爱了TP-LINK，不再推荐TP-LINK产品给其他朋友</p>
</blockquote>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2016年06月09日 - TL-WDR8600退货，降级腾达AC9<br>2016年06月01日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/wdr8600/" target="_blank" rel="external">https://wsgzao.github.io/post/wdr8600/</a></p>
<p><strong>扩展阅读</strong></p>
<p>AC9 1200M 5口全千兆双频无线路由器 - <a href="http://www.tenda.com.cn/product/AC9.html" target="_blank" rel="external">http://www.tenda.com.cn/product/AC9.html</a><br>TL-WDR8600 AC2600 双频千兆无线路由器 - <a href="http://www.tp-link.com.cn/product_497.html" target="_blank" rel="external">http://www.tp-link.com.cn/product_497.html</a><br>TP-LINK TL-WDR8600 裸照 - <a href="http://koolshare.cn/thread-39144-1-1.html" target="_blank" rel="external">http://koolshare.cn/thread-39144-1-1.html</a><br>诚意之作-腾达AC9千兆双频路由器众测报告 - <a href="http://test.smzdm.com/pingce/p/31659/" target="_blank" rel="external">http://test.smzdm.com/pingce/p/31659/</a></p>
<h2 id="购买记录"><a href="#购买记录" class="headerlink" title="购买记录"></a>购买记录</h2><blockquote>
<p>价格：京东 6.1 日活动满 1000 减 200 入手TL-WDR8600，大概800元出头，然而我又以259购买腾达AC9，原因后续会说</p>
</blockquote>
<p>TP-LINK TL-WDR8600 2600M 11AC双频千兆无线路由器 - <a href="http://item.jd.com/2471759.html" target="_blank" rel="external">http://item.jd.com/2471759.html</a></p>
<p>腾达（Tenda）AC9 1200M 11AC 千兆口无线增强型路由器 - <a href="http://item.jd.com/2720472.html" target="_blank" rel="external">http://item.jd.com/2720472.html</a></p>
<h2 id="购买原因"><a href="#购买原因" class="headerlink" title="购买原因"></a>购买原因</h2><blockquote>
<p>无线路由器我最关心3点</p>
</blockquote>
<ol>
<li>信号覆盖</li>
<li>连接稳定性</li>
<li>高速性能</li>
</ol>
<p>在极路由，小米路由，360路由，华为荣耀路由杀入无线路由器市场的今天，百兆带宽下的选择其实已经很多，而且价位多数都可以保持在200元以内，对于大家来说选择谁其实已经不重要了，自己喜欢就好。</p>
<p>我为什么会选择一款TP的新款顶配，虽然被TP坑过2回但我还是想再重新认识曾今<code>家用无线路由器</code>全球市场占有率第一的中国品牌，我希望可以看到TP-Link技术上的进步和用户体验上的改进。</p>
<p><img src="http://ww4.sinaimg.cn/large/7207510dgw1f4siqunejwj20ue0h9tbj.jpg" alt=""></p>
<p>最终7天体验后决定把大苏菲退货购买一款腾达的中端路由器，一方面是TP的高价格高规格并没有给我带来更优质的体验，微信语音丢包这个现象也让我十分困扰TP-Link的旗舰路由器到底值不值得。最后也是基于大量的网友评测数据和实际需求做出的决断，而TP-Link的这次出局或许值得大家一起分析下。</p>
<p><img src="http://ww3.sinaimg.cn/large/7207510dgw1f4sir6nml7j20ph0nn44i.jpg" alt=""></p>
<h2 id="评测内容"><a href="#评测内容" class="headerlink" title="评测内容"></a>评测内容</h2><blockquote>
<p>我没有KoolShare这么专业，大家可以参考其它无线路由产品的专业评测，比如R8500</p>
</blockquote>
<p><a href="http://koolshare.cn/portal.php?mod=list&amp;catid=9" target="_blank" rel="external">http://koolshare.cn/portal.php?mod=list&amp;catid=9</a></p>
<p><strong>测试方案</strong></p>
<blockquote>
<p>家用宽带上海电信 200M ，面积 96 平方米 </p>
</blockquote>
<ol>
<li>有线，无线，移动端分别测出当前极限值</li>
<li>开启满速下载测试ping延迟和丢包率</li>
<li>7天测试日常使用场景包括，小米盒子5G，2.4G关门最远距离测试30分钟以上微信语音</li>
</ol>
<p><img src="http://ww2.sinaimg.cn/large/7207510dgw1f4sirgf80aj20go0aa0tq.jpg" alt=""><br><img src="http://ww1.sinaimg.cn/large/7207510dgw1f4sirtl3zyj21kw166dxj.jpg" alt=""><br><img src="http://ww3.sinaimg.cn/large/7207510dgw1f4sis29szkj21kw166av9.jpg" alt=""><br><img src="http://ww2.sinaimg.cn/large/7207510dgw1f4sisp5zdij21kw166e81.jpg" alt=""><br><img src="http://ww1.sinaimg.cn/large/7207510dgw1f4sisybo0hj20u01hcq78.jpg" alt=""><br><img src="http://ww4.sinaimg.cn/large/7207510dgw1f4sit3kk8xj20u01hc78k.jpg" alt=""></p>
<h2 id="评测小结"><a href="#评测小结" class="headerlink" title="评测小结"></a>评测小结</h2><blockquote>
<p>家用路由器我按以下 5 个产品为标杆进行排序</p>
</blockquote>
<p>腾达AC9 &lt; 腾达 AC15(AC18众筹中) &lt; 网件 R7000 &lt; 华硕 AC68 &lt; 网件 R8500</p>
<ol>
<li>TP-LINK顶级家用产品最终以退货的形式出局实在是很难堪，而腾达中端的初体验也让我眼前一亮</li>
<li>无<code>单线并发多拨</code>和<code>通过路由器fq</code>的需求可以不考虑刷机，当然Merlin固件也是功不可没</li>
<li>如果你的预算在500元以内，通过软路由，无线放大器，无线中继等方式也可以达到满意的效果</li>
<li>极路由/小米路由/360路由/华为荣耀路由等，或许之前/现在仍然做得不够好，但不代表未来的无限可能</li>
</ol>
<p>​题图 - 重要的体验提升，始于重要的技术革新 By TP-LINK</p>
]]></content>
    
    <summary type="html">
    
      可惜自己再一次错爱了TP-LINK，不再推荐TP-LINK产品给其他朋友
    
    </summary>
    
      <category term="生活 | Life" scheme="https://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
    
  </entry>
  
  <entry>
    <title>DevOps实用资源分享</title>
    <link href="https://wsgzao.github.io/post/devops/"/>
    <id>https://wsgzao.github.io/post/devops/</id>
    <published>2016-05-12T08:31:24.000Z</published>
    <updated>2017-02-10T02:00:57.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/o2t5S8at.png" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>其实一直很想整理一篇DevOps学习资源导航类文章，主要原因除了自己的懒惰外，技术的不断创新也让未来更加值得期待。虽然在大多数情况下我们既无法面面俱到也突破不了点的极限，但是这也不会阻碍我们对于学习的热爱。梳理这篇文章也是希望自己能够始终保持学习的态度，完善自己的知识体系，坚持技术沉淀的过程，享受点滴进步的快乐。</p>
<blockquote>
<p>DevOps是一个持续改进的过程</p>
</blockquote>
<hr>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2016年05月11日 - 增加PHPHub，Ruby China<br>2016年03月25日 - 增加InfoQ，神秘的程序员<br>2016年02月14日 - 增加Forvo，Coursera，自强学堂<br>2016年01月04日 - 增加利器<br>2015年12月22日 - 增加极客学院，网易公开课，曹政微信订阅号<br>2015年10月29日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/devops/" target="_blank" rel="external">https://wsgzao.github.io/post/devops/</a></p>
<hr>
<h2 id="图书"><a href="#图书" class="headerlink" title="图书"></a>图书</h2><blockquote>
<p>我推荐大家尝试使用Kindle改变自己阅读的习惯</p>
</blockquote>
<p>Kindle Paperwhite - <a href="http://www.amazon.cn/" target="_blank" rel="external">http://www.amazon.cn/</a></p>
<h2 id="搜索引擎"><a href="#搜索引擎" class="headerlink" title="搜索引擎"></a>搜索引擎</h2><blockquote>
<p>善用搜索引擎，穿过一堵墙你的知识面可能会更加立体</p>
</blockquote>
<p>FQ - <a href="https://wsgzao.github.io/post/fq/" target="_blank" rel="external">https://wsgzao.github.io/post/fq/</a></p>
<ul>
<li>翻墙是一种学习态度</li>
</ul>
<p>Google - <a href="https://www.google.com/" target="_blank" rel="external">https://www.google.com/</a><br>Google Images - <a href="https://images.google.com/" target="_blank" rel="external">https://images.google.com/</a><br>Google Scholar - <a href="https://scholar.google.com/" target="_blank" rel="external">https://scholar.google.com/</a></p>
<ul>
<li>事实证明大多数情况下还是Google最懂我们的心</li>
</ul>
<p>WikipediA - <a href="https://www.wikipedia.org/" target="_blank" rel="external">https://www.wikipedia.org/</a></p>
<ul>
<li>试着把维基百科作为你的首选，弱化自己对于百度的依赖</li>
</ul>
<p>Forvo - <a href="http://zh.forvo.com/" target="_blank" rel="external">http://zh.forvo.com/</a></p>
<ul>
<li>妈妈再也不用担心我不会发音了，让Forvo来做你的发音指南</li>
</ul>
<h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><blockquote>
<p>黑客的思路往往让人眼前一亮，多向大牛们学习</p>
</blockquote>
<p>知道创宇研发技能表 - <a href="http://blog.knownsec.com/Knownsec_RD_Checklist/" target="_blank" rel="external">http://blog.knownsec.com/Knownsec_RD_Checklist/</a></p>
<ul>
<li>感谢<a href="http://evilcos.me/" target="_blank" rel="external">@余弦</a></li>
</ul>
<p>纳威安全导航 - <a href="http://navisec.it/" target="_blank" rel="external">http://navisec.it/</a></p>
<ul>
<li>乌云，FreeBuf，i春秋等都值得你多逛逛</li>
</ul>
<h2 id="阅读订阅"><a href="#阅读订阅" class="headerlink" title="阅读订阅"></a>阅读订阅</h2><blockquote>
<p>信息爆炸的时代如何过滤噪音很重要</p>
</blockquote>
<p>知乎日报 - <a href="http://daily.zhihu.com/" target="_blank" rel="external">http://daily.zhihu.com/</a></p>
<ul>
<li>每天 3 次，每次 7 分钟</li>
<li>我习惯下班后离线阅读生活中的美</li>
<li>读读日报和好奇心日报也推荐大家试试</li>
</ul>
<p>开发者头条 - <a href="http://toutiao.io/" target="_blank" rel="external">http://toutiao.io/</a></p>
<ul>
<li>码农周刊团队为程序员设计的阅读分享平台</li>
<li>极客头条，稀土掘金，伯乐在线等也是类似的</li>
</ul>
<p>湾区日报 - <a href="http://wanqu.co/" target="_blank" rel="external">http://wanqu.co/</a></p>
<ul>
<li>关注创业与技术,每天推送5篇优质英文文章</li>
<li>坚持向来不易，锻炼下英文阅读能力也不错哦</li>
</ul>
<p>深蓝阅读 - <a href="http://bluereader.org/" target="_blank" rel="external">http://bluereader.org/</a></p>
<ul>
<li>简单好用的内容订阅平台</li>
</ul>
<p>利器 - <a href="http://liqi.io/" target="_blank" rel="external">http://liqi.io/</a></p>
<ul>
<li>创造者和他们的工具</li>
</ul>
<h2 id="社区"><a href="#社区" class="headerlink" title="社区"></a>社区</h2><blockquote>
<p>Way to Explore &amp; Way too Extreme</p>
</blockquote>
<p>V2EX - <a href="http://www.v2ex.com/" target="_blank" rel="external">http://www.v2ex.com/</a></p>
<ul>
<li>一个与众不同的社区</li>
</ul>
<p>Stack Overflow - <a href="http://stackoverflow.com/" target="_blank" rel="external">http://stackoverflow.com/</a></p>
<ul>
<li>如果你使用 Google 相信会在这里看到不少高质量的答案</li>
</ul>
<p>PHPhub - <a href="https://phphub.org/" target="_blank" rel="external">https://phphub.org/</a></p>
<ul>
<li>PHPhub 是积极向上的 PHP &amp; Laravel 开发者社区</li>
</ul>
<p>Ruby China - <a href="https://ruby-china.org/" target="_blank" rel="external">https://ruby-china.org/</a></p>
<ul>
<li>中国 Ruby 社区，由众多爱好者共同维护，致力于构建完善的 Ruby 中文社区</li>
</ul>
<h2 id="微信订阅号"><a href="#微信订阅号" class="headerlink" title="微信订阅号"></a>微信订阅号</h2><p>小道消息 - WebNotes</p>
<ul>
<li>冯大辉的小道消息已经成为微信订阅号的标杆之一</li>
</ul>
<p>曹政 - caozsay</p>
<ul>
<li>曹大做为一个有故事的人，愿意分享更愿意交流，已经很难得了</li>
</ul>
<p>高效运维 - greatops</p>
<ul>
<li>萧田国组织维护的”高效运维”公众号每周多篇干货满满的原创好文</li>
</ul>
<p>神秘的程序员 - coderstory</p>
<ul>
<li>西乔和霍炬共同创作的程序员主题漫画，为生活添加一抹色彩</li>
</ul>
<p>InfoQ - infoqchina</p>
<ul>
<li>InfoQ在微信端的推广和推送质量都是满满的诚意</li>
</ul>
<h2 id="OJ"><a href="#OJ" class="headerlink" title="OJ"></a>OJ</h2><blockquote>
<p>ACM和奥数类似属于有天赋的你们，但实际工作中更要注重学习方法和问题总结</p>
</blockquote>
<p>LeetCode - <a href="http://leetcode.com/" target="_blank" rel="external">http://leetcode.com/</a></p>
<ul>
<li>leetcode 是一个针对程序员的面试准备平台</li>
</ul>
<p>牛客网 - <a href="http://www.nowcoder.com/" target="_blank" rel="external">http://www.nowcoder.com/</a></p>
<ul>
<li>一个新的专业IT笔试面试备考平台</li>
</ul>
<h2 id="信息聚合"><a href="#信息聚合" class="headerlink" title="信息聚合"></a>信息聚合</h2><blockquote>
<p>分享一些实用的技术学习路线</p>
</blockquote>
<p>InfoQ - <a href="http://www.infoq.com/" target="_blank" rel="external">http://www.infoq.com/</a></p>
<ul>
<li>促进软件开发领域知识与创新的传播</li>
</ul>
<p>鸟哥的Linux私房菜 - <a href="http://vbird.dic.ksu.edu.tw/" target="_blank" rel="external">http://vbird.dic.ksu.edu.tw/</a></p>
<ul>
<li>我也是跟着鸟哥的文章进入Linux</li>
</ul>
<p>存储基础知识 - <a href="https://community.emc.com/thread/176852" target="_blank" rel="external">https://community.emc.com/thread/176852</a></p>
<ul>
<li>EMC官方整理的教程，由浅入深知识面也很广</li>
</ul>
<p>菜鸟教程 - <a href="http://www.runoob.com/" target="_blank" rel="external">http://www.runoob.com/</a></p>
<ul>
<li>学的不仅是技术，更是梦想</li>
<li>同类型还有w3school等</li>
</ul>
<p>自强学堂 - <a href="http://www.ziqiangxuetang.com/" target="_blank" rel="external">http://www.ziqiangxuetang.com/</a></p>
<ul>
<li>感谢@涂伟忠，Django可是自强学堂的招牌教程</li>
</ul>
<p>优设 - <a href="http://hao.uisdc.com/" target="_blank" rel="external">http://hao.uisdc.com/</a></p>
<ul>
<li>以前很喜欢腾讯CDC的设计理念，现在老了只能偶尔瞅瞅</li>
</ul>
<p>VMware - <a href="http://www.vmware.com/cn/support/support-resources/pubs/" target="_blank" rel="external">http://www.vmware.com/cn/support/support-resources/pubs/</a></p>
<ul>
<li>没有贴图还能把虚拟化手册写得灰常清晰具有可操作性，VMware必须得算一个</li>
<li>当然也推荐大家阅读RedHat，SuSE，Oracle等官方帮助文档</li>
</ul>
<h2 id="Blog"><a href="#Blog" class="headerlink" title="Blog"></a>Blog</h2><blockquote>
<p>推荐的Blog不多，希望大家找到适合自己的博客</p>
</blockquote>
<p>编程随想 - <a href="https://program-think.blogspot.com/" target="_blank" rel="external">https://program-think.blogspot.com/</a></p>
<ul>
<li>你应该了解一些真实的信息</li>
</ul>
<p>阮一峰 - <a href="http://www.ruanyifeng.com/" target="_blank" rel="external">http://www.ruanyifeng.com/</a></p>
<ul>
<li>坚持分享技术和生活的典范</li>
</ul>
<p>酷壳 - <a href="http://coolshell.cn/" target="_blank" rel="external">http://coolshell.cn/</a></p>
<ul>
<li>坚持更新技术类Blog的人或团队越来越少，这也是认真做事的态度</li>
</ul>
<h2 id="在线教育"><a href="#在线教育" class="headerlink" title="在线教育"></a>在线教育</h2><p>极客学院 - <a href="http://wiki.jikexueyuan.com/" target="_blank" rel="external">http://wiki.jikexueyuan.com/</a></p>
<ul>
<li>在线教育类网站很多，我不做太多推荐，极客学院Wiki是一个好产品</li>
</ul>
<p>网易公开课 - <a href="http://open.163.com/" target="_blank" rel="external">http://open.163.com/</a></p>
<ul>
<li>国内外优质的MOOC资源很丰富，一起系统的完善自己的知识体系吧</li>
</ul>
<p>Coursera - <a href="https://www.coursera.org/" target="_blank" rel="external">https://www.coursera.org/</a></p>
<ul>
<li>在网上学习全世界最好的课程</li>
<li>在国外生活的同学几乎都会推荐的网络学习平台</li>
</ul>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><blockquote>
<p>还有很多需要耐心等待时间的验证</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      DevOps是一个持续改进的过程
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>中文文案排版指北</title>
    <link href="https://wsgzao.github.io/post/chinese-copywriting-guidelines/"/>
    <id>https://wsgzao.github.io/post/chinese-copywriting-guidelines/</id>
    <published>2016-05-09T07:31:24.000Z</published>
    <updated>2017-02-10T02:00:57.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/ekrNgJeK.jpeg" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。</p>
</blockquote>
<hr>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2016年05月09日 - 更新至release v0.0.9<br>2015年10月24日 - 更新官方翻译的简体中文<br>2015年07月11日 - 转载初稿，转化为简体中文</p>
<p>本文链接 - <a href="https://wsgzao.github.io/post/chinese-copywriting-guidelines/" target="_blank" rel="external">https://wsgzao.github.io/post/chinese-copywriting-guidelines/</a></p>
<p><strong>原文出处</strong></p>
<p>Chinese Copywriting Guidelines：中文文案排版指北 - <a href="https://github.com/sparanoid/chinese-copywriting-guidelines" target="_blank" rel="external">https://github.com/sparanoid/chinese-copywriting-guidelines</a><br>Chinese Copywriting Guidelines：中文文案排版指北（简体中文版） - <a href="https://github.com/mzlogin/chinese-copywriting-guidelines" target="_blank" rel="external">https://github.com/mzlogin/chinese-copywriting-guidelines</a></p>
<hr>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#空格">空格</a><ul>
<li><a href="#中英文之间需要增加空格">中英文之间需要增加空格</a></li>
<li><a href="#中文与数字之间需要增加空格">中文与数字之间需要增加空格</a></li>
<li><a href="#数字与单位之间需要增加空格">数字与单位之间需要增加空格</a></li>
<li><a href="#全角标点与其他字符之间不加空格">全角标点与其他字符之间不加空格</a></li>
<li><a href="#-ms-text-autospace-to-the-rescue"><code>-ms-text-autospace</code> to the rescue?</a></li>
</ul>
</li>
<li><a href="#标点符号">标点符号</a><ul>
<li><a href="#不重复使用标点符号">不重复使用标点符号</a></li>
</ul>
</li>
<li><a href="#全角和半角">全角和半角</a><ul>
<li><a href="#使用全角中文标点">使用全角中文标点</a></li>
<li><a href="#数字使用半角字符">数字使用半角字符</a></li>
<li><a href="#遇到完整的英文整句特殊名词其內容使用半角标点">遇到完整的英文整句、特殊名词，其內容使用半角标点</a></li>
</ul>
</li>
<li><a href="#名词">名词</a><ul>
<li><a href="#专有名词使用正确的大小写">专有名词使用正确的大小写</a></li>
<li><a href="#不要使用不地道的缩写">不要使用不地道的缩写</a></li>
</ul>
</li>
<li><a href="#争议">争议</a><ul>
<li><a href="#链接之间增加空格">链接之间增加空格</a></li>
<li><a href="#简体中文使用直角引号">简体中文使用直角引号</a></li>
</ul>
</li>
<li><a href="#工具">工具</a></li>
<li><a href="#谁在这样做">谁在这样做？</a></li>
<li><a href="#参考文献">参考文献</a></li>
</ul>
<h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p>
<p>与大家共勉之。」——<a href="https://github.com/vinta/pangu.js" target="_blank" rel="external">vinta/paranoid-auto-spacing</a></p>
<h3 id="中英文之间需要增加空格"><a href="#中英文之间需要增加空格" class="headerlink" title="中英文之间需要增加空格"></a>中英文之间需要增加空格</h3><p>正确：</p>
<blockquote>
<p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>在LeanCloud上，数据存储是围绕<code>AVObject</code>进行的。</p>
<p>在 LeanCloud上，数据存储是围绕<code>AVObject</code> 进行的。</p>
</blockquote>
<p>完整的正确用法：</p>
<blockquote>
<p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。每个 <code>AVObject</code> 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 <code>AVObject</code> 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p>
</blockquote>
<p>例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。</p>
<h3 id="中文与数字之间需要增加空格"><a href="#中文与数字之间需要增加空格" class="headerlink" title="中文与数字之间需要增加空格"></a>中文与数字之间需要增加空格</h3><p>正确：</p>
<blockquote>
<p>今天出去买菜花了 5000 元。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>今天出去买菜花了 5000元。</p>
<p>今天出去买菜花了5000元。</p>
</blockquote>
<h3 id="数字与单位之间需要增加空格"><a href="#数字与单位之间需要增加空格" class="headerlink" title="数字与单位之间需要增加空格"></a>数字与单位之间需要增加空格</h3><p>正确：</p>
<blockquote>
<p>我家的光纤入户宽带有 10 Gbps，SSD 一共有 20 TB。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>我家的光纤入户宽带有 10Gbps，SSD 一共有 10TB。</p>
</blockquote>
<p>例外：度／百分比与数字之间不需要增加空格：</p>
<p>正确：</p>
<blockquote>
<p>今天是 233° 的高温。</p>
<p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>今天是 233 ° 的高温。</p>
<p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p>
</blockquote>
<h3 id="全角标点与其他字符之间不加空格"><a href="#全角标点与其他字符之间不加空格" class="headerlink" title="全角标点与其他字符之间不加空格"></a>全角标点与其他字符之间不加空格</h3><p>正确：</p>
<blockquote>
<p>刚刚买了一部 iPhone，好开心！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>刚刚买了一部 iPhone ，好开心！</p>
</blockquote>
<h3 id="ms-text-autospace-to-the-rescue"><a href="#ms-text-autospace-to-the-rescue" class="headerlink" title="-ms-text-autospace to the rescue?"></a><code>-ms-text-autospace</code> to the rescue?</h3><p>Microsoft 有个 <a href="http://msdn.microsoft.com/en-us/library/ie/ms531164(v=vs.85" target="_blank" rel="external"><code>-ms-text-autospace</code></a>.aspx) 的 CSS 属性可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 OS X、iOS 的用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。</p>
<h2 id="标点符号"><a href="#标点符号" class="headerlink" title="标点符号"></a>标点符号</h2><h3 id="不重复使用标点符号"><a href="#不重复使用标点符号" class="headerlink" title="不重复使用标点符号"></a>不重复使用标点符号</h3><p>正确：</p>
<blockquote>
<p>德国队竟然战胜了巴西队！</p>
<p>她竟然对你说「喵」？！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>德国队竟然战胜了巴西队！！</p>
<p>德国队竟然战胜了巴西队！！！！！！！！</p>
<p>她竟然对你说「喵」？？！！</p>
<p>她竟然对你说「喵」？！？！？？！！</p>
</blockquote>
<h2 id="全角和半角"><a href="#全角和半角" class="headerlink" title="全角和半角"></a>全角和半角</h2><p>不明白什么是全角（全形）与半角（半形）符号？请查看维基百科词条『<a href="http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2" target="_blank" rel="external">全角和半角</a>』。</p>
<h3 id="使用全角中文标点"><a href="#使用全角中文标点" class="headerlink" title="使用全角中文标点"></a>使用全角中文标点</h3><p>正确：</p>
<blockquote>
<p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p>
<p>核磁共振成像（NMRI）是什么原理都不知道？JFGI！</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎!</p>
<p>嗨!你知道嘛?今天前台的小妹跟我说”喵”了哎!</p>
<p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p>
<p>核磁共振成像(NMRI)是什么原理都不知道?JFGI!</p>
</blockquote>
<h3 id="数字使用半角字符"><a href="#数字使用半角字符" class="headerlink" title="数字使用半角字符"></a>数字使用半角字符</h3><p>正确：</p>
<blockquote>
<p>这件蛋糕只卖 1000 元。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>这件蛋糕只卖 １０００ 元。</p>
</blockquote>
<p>例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。</p>
<h3 id="遇到完整的英文整句、特殊名词，其內容使用半角标点"><a href="#遇到完整的英文整句、特殊名词，其內容使用半角标点" class="headerlink" title="遇到完整的英文整句、特殊名词，其內容使用半角标点"></a>遇到完整的英文整句、特殊名词，其內容使用半角标点</h3><p>正确：</p>
<blockquote>
<p>乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」</p>
<p>推荐你阅读《Hackers &amp; Painters: Big Ideas from the Computer Age》，非常的有趣。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」</p>
<p>推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。</p>
</blockquote>
<h2 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h2><h3 id="专有名词使用正确的大小写"><a href="#专有名词使用正确的大小写" class="headerlink" title="专有名词使用正确的大小写"></a>专有名词使用正确的大小写</h3><p>大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论內容，在这里只对部分易错用法进行简述。</p>
<p>正确：</p>
<blockquote>
<p>使用 GitHub 登录</p>
<p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>使用 github 登录</p>
<p>使用 GITHUB 登录</p>
<p>使用 Github 登录</p>
<p>使用 gitHub 登录</p>
<p>使用 gｲんĤЦ8 登录</p>
<p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p>
<p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p>
<p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p>
<p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p>
<p>我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。</p>
</blockquote>
<p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标准的大小写规范进行书写；并通过 <code>text-transform: uppercase;</code>／<code>text-transform: lowercase;</code> 对表现形式进行定义。</p>
<h3 id="不要使用不地道的缩写"><a href="#不要使用不地道的缩写" class="headerlink" title="不要使用不地道的缩写"></a>不要使用不地道的缩写</h3><p>正确：</p>
<blockquote>
<p>我们需要一位熟悉 JavaScript、HTML5，至少理解一种框架（如 Backbone.js、AngularJS、React 等）的前端开发者。</p>
</blockquote>
<p>错误：</p>
<blockquote>
<p>我们需要一位熟悉 Js、h5，至少理解一种框架（如 backbone、angular、RJS 等）的 FED。</p>
</blockquote>
<h2 id="争议"><a href="#争议" class="headerlink" title="争议"></a>争议</h2><p>以下用法略带有个人色彩，既：无论是否遵循下述规则，从语法的角度来讲都是<strong>正确</strong>的。</p>
<h3 id="链接之间增加空格"><a href="#链接之间增加空格" class="headerlink" title="链接之间增加空格"></a>链接之间增加空格</h3><p>用法：</p>
<blockquote>
<p>请 <a href="#">提交一个 issue</a> 并分配给相关同事。</p>
<p>访问我们网站的最新动态，请 <a href="#">点击这里</a> 进行订阅！</p>
</blockquote>
<p>对比用法：</p>
<blockquote>
<p>请<a href="#">提交一个 issue</a> 并分配给相关同事。</p>
<p>访问我们网站的最新动态，请<a href="#">点击这里</a>进行订阅！</p>
</blockquote>
<h3 id="简体中文使用直角引号"><a href="#简体中文使用直角引号" class="headerlink" title="简体中文使用直角引号"></a>简体中文使用直角引号</h3><p>用法：</p>
<blockquote>
<p>「老师，『有条不紊』的『紊』是什么意思？」</p>
</blockquote>
<p>对比用法：</p>
<blockquote>
<p>“老师，‘有条不紊’的‘紊’是什么意思？”</p>
</blockquote>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><table>
<thead>
<tr>
<th>仓库</th>
<th>语言</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/vinta/paranoid-auto-spacing" target="_blank" rel="external">vinta/paranoid-auto-spacing</a></td>
<td>JavaScript</td>
</tr>
<tr>
<td><a href="https://github.com/huei90/pangu.node" target="_blank" rel="external">huei90/pangu.node</a></td>
<td>Node.js</td>
</tr>
<tr>
<td><a href="https://github.com/huacnlee/auto-correct" target="_blank" rel="external">huacnlee/auto-correct</a></td>
<td>Ruby</td>
</tr>
<tr>
<td><a href="https://github.com/sparanoid/space-lover" target="_blank" rel="external">sparanoid/space-lover</a></td>
<td>PHP (WordPress)</td>
</tr>
<tr>
<td><a href="https://github.com/NauxLiu/auto-correct" target="_blank" rel="external">nauxliu/auto-correct</a></td>
<td>PHP</td>
</tr>
<tr>
<td><a href="https://github.com/hotoo/pangu.vim" target="_blank" rel="external">hotoo/pangu.vim</a></td>
<td>Vim</td>
</tr>
<tr>
<td><a href="https://github.com/sparanoid/grunt-auto-spacing" target="_blank" rel="external">sparanoid/grunt-auto-spacing</a></td>
<td>Node.js (Grunt)</td>
</tr>
<tr>
<td><a href="https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk" target="_blank" rel="external">hjiang/scripts/add-space-between-latin-and-cjk</a></td>
<td>Python</td>
</tr>
</tbody>
</table>
<h2 id="谁在这样做？"><a href="#谁在这样做？" class="headerlink" title="谁在这样做？"></a>谁在这样做？</h2><table>
<thead>
<tr>
<th>网站</th>
<th>文案</th>
<th>UGC</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.apple.com/cn/" target="_blank" rel="external">Apple 中国</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.apple.com/hk/" target="_blank" rel="external">Apple 香港</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.apple.com/tw/" target="_blank" rel="external">Apple 台湾</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.microsoft.com/zh-cn/" target="_blank" rel="external">Microsoft 中国</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.microsoft.com/zh-hk/" target="_blank" rel="external">Microsoft 香港</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="http://www.microsoft.com/zh-tw/" target="_blank" rel="external">Microsoft 台湾</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="https://leancloud.cn/" target="_blank" rel="external">LeanCloud</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="https://www.zhihu.com/" target="_blank" rel="external">知乎</a></td>
<td>Yes</td>
<td>部分用户达成</td>
</tr>
<tr>
<td><a href="https://www.v2ex.com/" target="_blank" rel="external">V2EX</a></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><a href="https://segmentfault.com/" target="_blank" rel="external">SegmentFault</a></td>
<td>Yes</td>
<td>部分用户达成</td>
</tr>
<tr>
<td><a href="http://apple4us.com/" target="_blank" rel="external">Apple4us</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="https://www.wandoujia.com/" target="_blank" rel="external">豌豆荚</a></td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr>
<td><a href="https://ruby-china.org/" target="_blank" rel="external">Ruby China</a></td>
<td>Yes</td>
<td>标题达成</td>
</tr>
<tr>
<td><a href="https://phphub.org/" target="_blank" rel="external">PHPHub</a></td>
<td>Yes</td>
<td>标题达成</td>
</tr>
</tbody>
</table>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul>
<li><a href="http://grammar.about.com/od/punctuationandmechanics/a/Guidelines-For-Using-Capital-Letters.htm" target="_blank" rel="external">Guidelines for Using Capital Letters</a></li>
<li><a href="http://en.wikipedia.org/wiki/Letter_case" target="_blank" rel="external">Letter case - Wikipedia</a></li>
<li><a href="http://www.oxforddictionaries.com/words/punctuation" target="_blank" rel="external">Punctuation - Oxford Dictionaries</a></li>
<li><a href="https://owl.english.purdue.edu/owl/section/1/6/" target="_blank" rel="external">Punctuation - The Purdue OWL</a></li>
<li><a href="http://www.wikihow.com/Use-English-Punctuation-Correctly" target="_blank" rel="external">How to Use English Punctuation Corrently - wikiHow</a></li>
<li><a href="https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F" target="_blank" rel="external">格式 - openSUSE</a></li>
<li><a href="http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2" target="_blank" rel="external">全角和半角 - 维基百科</a></li>
<li><a href="http://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F" target="_blank" rel="external">引号 - 维基百科</a></li>
<li><a href="http://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F" target="_blank" rel="external">疑问惊叹号 - 维基百科</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Git常用命令和Git团队使用规范指南</title>
    <link href="https://wsgzao.github.io/post/git/"/>
    <id>https://wsgzao.github.io/post/git/</id>
    <published>2016-04-22T08:22:32.000Z</published>
    <updated>2017-02-10T02:00:57.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/fAhm82RJ.png" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在2005年的某一天，Linux之父Linus Torvalds 发布了他的又一个里程碑作品——Git。它的出现改变了软件开发流程，大大地提高了开发流畅度，直到现在仍十分流行，完全没有衰退的迹象。其实一般情况下，只需要掌握git的几个常用命令即可，但是在使用的过程中难免会遇到各种复杂的需求，这时候经常需要搜索，非常麻烦，故总结了一下自己平常会用到的git操作。本文根据团队实践记录Git入门指南和Git常用命令，文章中不仅记录了Git的搭建和使用教程，还参考了大量Git团队使用规范上的经验，希望大家可以结合自己团队的实际应用场景让Git协作优雅的落地。</p>
<blockquote>
<p>Git是目前世界上最先进的分布式版本控制系统</p>
</blockquote>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2016年04月22日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/git/" target="_blank" rel="external">https://wsgzao.github.io/post/git/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Git Book - <a href="https://git-scm.com/book/zh/" target="_blank" rel="external">https://git-scm.com/book/zh/</a><br>git简明指南 - <a href="http://rogerdudler.github.io/git-guide/index.zh.html" target="_blank" rel="external">http://rogerdudler.github.io/git-guide/index.zh.html</a><br>常用 Git 命令清单 - <a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html</a><br>猴子都能懂的GIT入门 - <a href="http://backlogtool.com/git-guide/cn/" target="_blank" rel="external">http://backlogtool.com/git-guide/cn/</a><br>Git教程 - <a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000</a></p>
<h2 id="SVN与Git的最主要的区别"><a href="#SVN与Git的最主要的区别" class="headerlink" title="SVN与Git的最主要的区别"></a>SVN与Git的最主要的区别</h2><p>SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而干活的时候，用的都是自己的电脑，所以首先要从中央服务器哪里得到最新的版本，然后干活，干完后，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，如果在局域网还可以，带宽够大，速度够快，如果在互联网下，如果网速慢的话，就纳闷了。</p>
<p>Git是分布式版本控制系统，那么它就没有中央服务器的，每个人的电脑就是一个完整的版本库，这样，工作的时候就不需要联网了，因为版本都是在自己的电脑上。既然每个人的电脑都有一个完整的版本库，那多个人如何协作呢？比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。</p>
<h2 id="Git搭建和使用"><a href="#Git搭建和使用" class="headerlink" title="Git搭建和使用"></a>Git搭建和使用</h2><blockquote>
<p>Git上手并不难，深入学习还是建议多实践，可以参考扩展阅读中廖雪峰的Git教程</p>
</blockquote>
<h3 id="Git服务端"><a href="#Git服务端" class="headerlink" title="Git服务端"></a>Git服务端</h3><blockquote>
<p>服务端搭建Git很简单，有更多需求不妨试试Gogs和Gitlab</p>
</blockquote>
<p>使用Gogs轻松搭建可能比GitLab更好用的Git服务平台 - <a href="https://wsgzao.github.io/post/gogs/" target="_blank" rel="external">https://wsgzao.github.io/post/gogs/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装git</span></span><br><span class="line">sudo apt-get install git</span><br><span class="line">yum install git</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个git用户，用来运行git服务</span></span><br><span class="line">sudo adduser git</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建证书使用公钥免密码登录(可选)</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">vi ~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化Git仓库</span></span><br><span class="line">sudo git init --bare sample.git</span><br><span class="line">sudo chown -R git:git sample.git</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用shell登录</span></span><br><span class="line">vi /etc/passwd</span><br><span class="line">git:x:<span class="number">1001</span>:<span class="number">1001</span>:,,,:/home/git:/usr/bin/git-shell</span><br><span class="line"></span><br><span class="line"><span class="comment">#在客户端上克隆远程仓库</span></span><br><span class="line">git <span class="built_in">clone</span> git@server:/srv/sample.git</span><br></pre></td></tr></table></figure>
<p>管理公钥推荐使用Gitosis<br>Gitosis - <a href="https://github.com/res0nat0r/gitosis" target="_blank" rel="external">https://github.com/res0nat0r/gitosis</a><br>Gitosis配置手记 - <a href="http://debugo.com/gitosis/" target="_blank" rel="external">http://debugo.com/gitosis/</a></p>
<p>管理权限推荐使用Gitolite<br>Gitolite - <a href="https://github.com/sitaramc/gitolite" target="_blank" rel="external">https://github.com/sitaramc/gitolite</a></p>
<h3 id="Git客户端"><a href="#Git客户端" class="headerlink" title="Git客户端"></a>Git客户端</h3><blockquote>
<p>Git客户端可以按个人习惯来选择，遵守团队协作中的Git规范标准才是更重要的</p>
</blockquote>
<p>Git - <a href="https://git-scm.com/" target="_blank" rel="external">https://git-scm.com/</a><br>TortoiseGit - <a href="https://tortoisegit.org/" target="_blank" rel="external">https://tortoisegit.org/</a><br>SourceTree - <a href="https://www.sourcetreeapp.com/" target="_blank" rel="external">https://www.sourcetreeapp.com/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以最基本的Git命令行为例，先下载Git</span></span><br><span class="line">https://git-scm.com/download/</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置git提交用户名和邮箱，定义别名方便区分</span></span><br><span class="line">git config --global user.name <span class="string">"你的姓名"</span></span><br><span class="line">git config --global user.email <span class="string">"you@example.com"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#克隆仓库</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="built_in">cap</span>@<span class="number">172.28</span>.<span class="number">70.243</span>:/<span class="built_in">cap</span>/cap.git</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> <span class="built_in">cap</span>@<span class="number">172.28</span>.<span class="number">70.243</span>:/<span class="built_in">cap</span>/cap.git</span><br><span class="line">Cloning into <span class="string">'cap'</span>...</span><br><span class="line">warning: You appear to have cloned an empty repository.</span><br><span class="line">Checking connectivity... done.</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试推送</span></span><br><span class="line">touch README</span><br><span class="line">git add README</span><br><span class="line">git commit -m <span class="string">"add readme"</span></span><br><span class="line">git push origin master</span><br><span class="line"></span><br><span class="line">Counting objects: <span class="number">3</span>, done.</span><br><span class="line">Writing objects: <span class="number">100</span>% (<span class="number">3</span>/<span class="number">3</span>), <span class="number">199</span> bytes | <span class="number">0</span> bytes/s, done.</span><br><span class="line">Total <span class="number">3</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">To <span class="built_in">cap</span>@<span class="number">172.28</span>.<span class="number">70.243</span>:/<span class="built_in">cap</span>/cap.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br></pre></td></tr></table></figure>
<h2 id="Git常用命令"><a href="#Git常用命令" class="headerlink" title="Git常用命令"></a>Git常用命令</h2><p><strong>符号约定</strong></p>
<ul>
<li><code>&lt;xxx&gt;</code> 自定义内容</li>
<li><code>[xxx]</code> 可选内容</li>
<li><code>[&lt;xxx&gt;]</code>自定义可选内容</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#初始设置</span></span><br><span class="line">git config --global user.name <span class="string">"&lt;用户名&gt;"</span> <span class="comment">#设置用户名</span></span><br><span class="line">git config --global user.email <span class="string">"&lt;电子邮件&gt;"</span> <span class="comment">#设置电子邮件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#本地操作</span></span><br><span class="line">git add [-i] <span class="comment">#保存更新，-i为逐个确认。</span></span><br><span class="line">git status <span class="comment">#检查更新。</span></span><br><span class="line">git commit [<span class="operator">-a</span>] -m <span class="string">"&lt;更新说明&gt;"</span> <span class="comment">#提交更新，-a为包含内容修改和增删，-m为说明信息，也可以使用 -am。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#远端操作</span></span><br><span class="line">git <span class="built_in">clone</span> &lt;git地址&gt; <span class="comment">#克隆到本地。</span></span><br><span class="line">git fetch <span class="comment">#远端抓取。</span></span><br><span class="line">git merge <span class="comment">#与本地当前分支合并。</span></span><br><span class="line">git pull [&lt;远端别名&gt;] [&lt;远端branch&gt;] <span class="comment">#抓取并合并,相当于第2、3步</span></span><br><span class="line">git push [<span class="operator">-f</span>] [&lt;远端别名&gt;] [&lt;远端branch&gt;] <span class="comment">#推送到远端，-f为强制覆盖</span></span><br><span class="line">git remote add &lt;别名&gt; &lt;git地址&gt; <span class="comment">#设置远端别名</span></span><br><span class="line">git remote [-v] <span class="comment">#列出远端，-v为详细信息</span></span><br><span class="line">git remote show &lt;远端别名&gt; <span class="comment">#查看远端信息</span></span><br><span class="line">git remote rename &lt;远端别名&gt; &lt;新远端别名&gt; <span class="comment">#重命名远端</span></span><br><span class="line">git remote rm &lt;远端别名&gt; <span class="comment">#删除远端</span></span><br><span class="line">git remote update [&lt;远端别名&gt;] <span class="comment">#更新分支列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#分支相关</span></span><br><span class="line">git branch [-r] [<span class="operator">-a</span>] <span class="comment">#列出分支，-r远端 ,-a全部</span></span><br><span class="line">git branch &lt;分支名&gt; <span class="comment">#新建分支</span></span><br><span class="line">git branch -b &lt;分支名&gt; <span class="comment">#新建并切换分支</span></span><br><span class="line">git branch <span class="operator">-d</span> &lt;分支名&gt; <span class="comment">#删除分支</span></span><br><span class="line">git checkout &lt;分支名&gt; <span class="comment">#切换到分支</span></span><br><span class="line">git checkout -b &lt;本地branch&gt; [-t &lt;远端别名&gt;/&lt;远端分支&gt;] <span class="comment">#-b新建本地分支并切换到分支, -t绑定远端分支</span></span><br><span class="line">git merge &lt;分支名&gt; <span class="comment">#合并某分支到当前分支</span></span><br></pre></td></tr></table></figure>
<p>Git常用命令 - <a href="http://gityuan.com/2015/06/27/git-notes/" target="_blank" rel="external">http://gityuan.com/2015/06/27/git-notes/</a></p>
<p><img src="http://gityuan.com/images/git/1.png" alt=""></p>
<ul>
<li>workspace: 本地的工作目录。（记作A）</li>
<li>index：缓存区域，临时保存本地改动。（记作B）</li>
<li>local repository: 本地仓库，只想最后一次提交HEAD。（记作C）</li>
<li>remote repository：远程仓库。（记作D）</li>
</ul>
<blockquote>
<p>以下所有的命令的功能说明，都采用上述的标记的A、B、C、D的方式来阐述。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#初始化</span></span><br><span class="line">git init //创建</span><br><span class="line">git <span class="built_in">clone</span> /path/to/repository //检出</span><br><span class="line">git config --global user.email <span class="string">"you@example.com"</span> //配置email</span><br><span class="line">git config --global user.name <span class="string">"Name"</span> //配置用户名</span><br><span class="line"></span><br><span class="line"><span class="comment">#操作</span></span><br><span class="line">git add &lt;file&gt; // 文件添加，A → B</span><br><span class="line">git add . // 所有文件添加，A → B</span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">"代码提交信息"</span> //文件提交，B → C</span><br><span class="line">git commit --amend //与上次commit合并, *B → C</span><br><span class="line"></span><br><span class="line">git push origin master //推送至master分支, C → D</span><br><span class="line">git pull //更新本地仓库至最新改动， D → A</span><br><span class="line">git fetch //抓取远程仓库更新， D → C</span><br><span class="line"></span><br><span class="line">git <span class="built_in">log</span> //查看提交记录</span><br><span class="line">git status //查看修改状态</span><br><span class="line">git diff//查看详细修改内容</span><br><span class="line">git show//显示某次提交的内容</span><br><span class="line"></span><br><span class="line"><span class="comment">#撤销操作</span></span><br><span class="line">git reset &lt;file&gt;//某个文件索引会回滚到最后一次提交， C → B</span><br><span class="line">git reset//索引会回滚到最后一次提交， C → B</span><br><span class="line">git reset --hard // 索引会回滚到最后一次提交， C → B → A</span><br><span class="line"></span><br><span class="line">git checkout // 从index复制到workspace， B → A</span><br><span class="line">git checkout -- files // 文件从index复制到workspace， B → A</span><br><span class="line">git checkout HEAD -- files // 文件从<span class="built_in">local</span> repository复制到workspace， C → A</span><br><span class="line"></span><br><span class="line"><span class="comment">#分支相关</span></span><br><span class="line">git checkout -b branch_name //创建名叫“branch_name”的分支，并切换过去</span><br><span class="line">git checkout master //切换回主分支</span><br><span class="line">git branch <span class="operator">-d</span> branch_name // 删除名叫“branch_name”的分支</span><br><span class="line">git push origin branch_name //推送分支到远端仓库</span><br><span class="line">git merge branch_name // 合并分支branch_name到当前分支(如master)</span><br><span class="line">git rebase //衍合，线性化的自动， D → A</span><br><span class="line"></span><br><span class="line"><span class="comment">#冲突处理</span></span><br><span class="line">git diff //对比workspace与index</span><br><span class="line">git diff HEAD //对于workspace与最后一次commit</span><br><span class="line">git diff &lt;<span class="built_in">source</span>_branch&gt; &lt;target_branch&gt; //对比差异</span><br><span class="line">git add &lt;filename&gt; //修改完冲突，需要add以标记合并成功</span><br><span class="line"></span><br><span class="line"><span class="comment">#其他</span></span><br><span class="line">gitk //开灯图形化git</span><br><span class="line">git config color.ui <span class="literal">true</span> //彩色的 git 输出</span><br><span class="line">git config format.pretty oneline //显示历史记录时，每个提交的信息只显示一行</span><br><span class="line">git add -i //交互式添加文件到暂存区</span><br></pre></td></tr></table></figure>
<h2 id="Git使用规范"><a href="#Git使用规范" class="headerlink" title="Git使用规范"></a>Git使用规范</h2><p>Git 使用规范流程 - <a href="http://www.ruanyifeng.com/blog/2015/08/git-use-process.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2015/08/git-use-process.html</a><br>团队中的 Git 实践 - <a href="https://ourai.ws/posts/working-with-git-in-team/" target="_blank" rel="external">https://ourai.ws/posts/working-with-git-in-team/</a><br>构家网 git 团队协作使用规范 v2 - <a href="http://wenku.baidu.com/view/e1430d1b7f1922791788e81e" target="_blank" rel="external">http://wenku.baidu.com/view/e1430d1b7f1922791788e81e</a></p>
<blockquote>
<p>Git使用规范提醒</p>
</blockquote>
<ul>
<li>使用Git过程中，必须通过创建分支进行开发，坚决禁止在主干分支上直接开发。review的同事有责任检查其他同事是否遵循分支规范。</li>
<li>在Git中，默认是不会提交空目录的，如果想提交某个空目录到版本库中，需要在该目录下新建一个 .gitignore 的空白文件，就可以提交了</li>
<li>把外部文件纳入到自己的 Git 分支来的时候一定要记得是先比对，确认所有修改都是自己修改的，然后再纳入。不然，容易出现代码回溯</li>
<li>多人协作时，不要各自在自己的 Git 分支开发，然后发文件合并。正确的方法应该是开一个远程分支，然后一起在远程分支里协作。不然，容易出现代码回溯（即别人的代码被覆盖的情况）</li>
<li>每个人提交代码是一定要 git diff 看提交的东西是不是都是自己修改的。如果有不是自己修改的内容，很可能就是代码回溯</li>
<li>review 代码的时候如果看到有被删除掉的代码，一定要确实是否是写代码的同事自己删除的。如果不是，很可能就是代码回溯</li>
</ul>
]]></content>
    
    <summary type="html">
    
      Git是目前世界上最先进的分布式版本控制系统
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Windows常用软件推荐</title>
    <link href="https://wsgzao.github.io/post/windows/"/>
    <id>https://wsgzao.github.io/post/windows/</id>
    <published>2016-04-19T08:35:27.000Z</published>
    <updated>2017-02-10T02:00:57.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/l6zV1ws3.jpeg" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>很多人都认为我是计算机高手，其实我只会帮你修理下你的电脑啦，曾几何时我也帮助过好多好多的同学和老师，尝试和体验各种各样的软件，但谁又能想到我曾今也对你们的电脑做过很多失败的坑爹操作，把你们最宝贵的数据撸得灰飞烟灭。作为一名非职业HelpDesk，我一定不是最最优秀的那一群技术大牛，但我也努力超越了99.99%的从业者，Because I just love and enjoy thinking to do better and better.</p>
<p>如果你认同<code>高效，实用</code>的软件使用理念就跟着我走吧，让我们一起寻找<code>适合自己的好用软件</code>。</p>
<blockquote>
<p>长期更新此文以督促自己的懒惰，我要用佳软改变你一生的习惯。</p>
</blockquote>
<hr>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2016年04月19日 - PC Hunter，阿呆猫/ADSafe，微信/钉钉，Navicat<br>2016年01月04日 - 扩展阅读增加利器，完善细节内容<br>2015年12月10日 - 增加硬件选型专题，替换SecureCRT为Xmanager，mRemoteNG为MobaXterm<br>2015年10月05日 - 增加Office 2016, 清理不和谐内容<br>2015年08月06日 - 增加Ditto, mRemoteNG, SocksCap64, SwitchHosts<br>2015年08月04日 - 增加StartIsBack++, Clover, Cmd Markdown, JetBrains<br>2015年05月29日 - 增加AnyDesk，COW，替换QQ拼音纯净版为百度输入法<br>2015年04月16日 - 增加Listary，Bandisoft，Adobe Acrobat DC，Auto CAD 2016<br>2015年03月31日 - 增加微PE，有道云协作，自同步<br>2015年03月05日 - 正式更名为Windows常用软件推荐，统一日志标题和链接<br>2015年02月24日 - 替换TrueCrypt为VeraCrypt，增加易数一键还原，百度电脑专家<br>2015年02月20日 - 剥离Mac和Android部分<br>2014年11月12日 - 增加Win10，3DM运行库，网易云音乐，好奇心日报，调整部分链接和描述<br>2014年08月26日 - 引导部分原版链接至第三方Mod修改版(绿色精简)<br>2014年08月13日 - 增加DirectX Repair，EaseUS Data Recovery Wizard和Mac专题<br>2014年08月12日 - 精简优化分离内容，转化为Markdown书写<br>2014年06月02日 - 更新猎豹免费WiFi和猎豹清理大师<br>2014年04月15日 - 更新Windows 8.1 With Update和一小波翻墙工具并调整部分软件推荐<br>2014年03月18日 - 更新TeamViewer 9，Sublime 3，读知乎<br>2014年03月07日 - 新增雅虎天气，更新Office2013 With SP1等其它软件版本及评语<br>2014年01月20日 - 更新部分软件评语，新增专业软件部分之文件传输专题<br>2013年12月27日 - 手机浏览器回归QQ浏览器，更新部分软件版本和推荐优先级<br>2013年12月03日 - 更新部分软件版本，新增专业软件部分之文本处理专题<br>2013年11月28日 - 更新大批软件版本，新增福昕风腾PDF，StartIsBackPlus，高德地图<br>2013年11月21日 - PE更换为IT天空 SKYPE<br>2013年11月03日 - 增加专业软件部分之网络穿透专题<br>2013年10月08日 - 简单看图制图类工具更换为QQ影像<br>2013年10月04日 - 手机浏览器更换为傲游及链接文字描述等细节<br>2013年09月21日 - 精细化内容<br>2013年09月19日 - 完善内容<br>2013年09月07日 - 补充专业软件部分<br>2013年08月29日 - 微调精炼语法<br>2013年08月28日 - 优化下语句和措辞<br>2013年08月27日 - 增加Software List For Android<br>2013年08月26日 - 增加OS部分<br>2013年08月25日 - 补充特色推荐部分<br>2013年08月24日 - 常用软件部分基本结束<br>2013年08月23日 - 补充内容<br>2013年08月22日 - 补充内容<br>2013年08月21日 - 梳理框架</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/windows/" target="_blank" rel="external">https://wsgzao.github.io/post/windows/</a></p>
<p>扩展阅读</p>
<ul>
<li>利器 - <a href="http://liqi.io/" target="_blank" rel="external">http://liqi.io/</a></li>
<li>小众软件 - <a href="http://love.appinn.com/" target="_blank" rel="external">http://love.appinn.com/</a></li>
<li>善用佳软 - <a href="http://xbeta.info/" target="_blank" rel="external">http://xbeta.info/</a></li>
<li>zd423 - <a href="http://www.zdfans.com/" target="_blank" rel="external">http://www.zdfans.com/</a></li>
<li>Apps索引 - <a href="https://wsgzao.github.io/index/#Apps" target="_blank" rel="external">https://wsgzao.github.io/index/#Apps</a></li>
</ul>
<hr>
<h2 id="硬件选型"><a href="#硬件选型" class="headerlink" title="硬件选型"></a>硬件选型</h2><blockquote>
<p>选择笔记本不一定为了办公和轻便，使用台式机也未必只是为了玩游戏和大屏享受，手机和平板也可以辅助我们工作，无论选择哪种硬件，使用起来能够赏心悦目，得心应手，提高效率才是我们追求的本质。</p>
</blockquote>
<h3 id="笔记本"><a href="#笔记本" class="headerlink" title="笔记本"></a>笔记本</h3><ol>
<li>从颜值角度出发我会推荐Dell XPS和MacBook</li>
<li>从实用方向考虑我会选择ThinkPad X250和ThinkPad X1</li>
<li>其它好的选择当然也是随心啦，比如大神船和最有可能乱入的小米和华为</li>
</ol>
<h3 id="台式机"><a href="#台式机" class="headerlink" title="台式机"></a>台式机</h3><blockquote>
<p>京东提供了一个相对透明开放的装机平台，至少可以让很多人避开奸商偷袭</p>
</blockquote>
<p>京东装机大师 - <a href="http://diy.jd.com/" target="_blank" rel="external">http://diy.jd.com/</a><br>萌叔装机好福哟 - <a href="https://shironeko.taobao.com" target="_blank" rel="external">https://shironeko.taobao.com</a></p>
<h3 id="配件"><a href="#配件" class="headerlink" title="配件"></a>配件</h3><blockquote>
<p>推荐大家多参考利器</p>
</blockquote>
<ol>
<li>8G内存和256G SSD固态硬盘会逐步成为标配，提高生产力的首选</li>
<li>你可能也需要手感不错的鼠标和掷地有声的机械键盘</li>
<li>一把舒服的座椅和高大上的显示器</li>
<li>欢迎继续补充</li>
</ol>
<h3 id="系统部署"><a href="#系统部署" class="headerlink" title="系统部署"></a>系统部署</h3><p>ThinkPad X1 Carbon使用经验分享(解决Windows 10高分屏模糊) - <a href="https://wsgzao.github.io/post/thinkpad/" target="_blank" rel="external">https://wsgzao.github.io/post/thinkpad/</a></p>
<h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><blockquote>
<p>重装系统建议谨慎行事，丢失数据可是很蛋疼的一件事哦</p>
</blockquote>
<p>Windows 7 - <a href="http://zxkh19501.blog.163.com/" target="_blank" rel="external">http://zxkh19501.blog.163.com/</a></p>
<ul>
<li>普通用户建议稳定在Win7</li>
<li>怀有好奇心的朋友可考虑向Win10迈进</li>
<li>玩游戏和办公需求高者请勿尝鲜</li>
</ul>
<p>Windows 10 - <a href="http://www.zdfans.com/win10" target="_blank" rel="external">http://www.zdfans.com/win10</a></p>
<ul>
<li>Windows 10强势回归</li>
</ul>
<p>Ghost - <a href="http://songyongzhi.blog.163.com/" target="_blank" rel="external">http://songyongzhi.blog.163.com/</a></p>
<ul>
<li>偷懒请认准Ghost，ESD会慢慢成为新的标准</li>
<li>安装方式建议【U盘引导+移动硬盘安装】</li>
</ul>
<p>Others - <a href="http://msdn.itellyou.cn/" target="_blank" rel="external">http://msdn.itellyou.cn/</a></p>
<ul>
<li>简单直接的微软原版资源下载渠道</li>
</ul>
<p>U盘装机助理 - <a href="http://www.itiankong.net/forum-usbzl-1.html" target="_blank" rel="external">http://www.itiankong.net/forum-usbzl-1.html</a></p>
<ul>
<li>作者频繁的更新速度深深的折磨着我幼小的心灵</li>
</ul>
<p>微PE - <a href="http://www.wepe.com.cn/" target="_blank" rel="external">http://www.wepe.com.cn/</a></p>
<ul>
<li>感谢前通用PE作者@李培聪的付出，祝你创业顺利哈</li>
</ul>
<hr>
<h2 id="常用软件"><a href="#常用软件" class="headerlink" title="常用软件"></a>常用软件</h2><h3 id="特色推荐"><a href="#特色推荐" class="headerlink" title="特色推荐"></a>特色推荐</h3><p>Listary -  <a href="http://www.listary.com/" target="_blank" rel="external">http://www.listary.com/</a></p>
<ul>
<li>如果Mac下的Alfred作为排名第一的效率工具类神器，那你还在犹豫什么呢，必装</li>
<li>我也从Launchy转投Listary，是时候放开Everything/Total Commander</li>
</ul>
<p>阿呆猫 - <a href="http://www.admflt.com/" target="_blank" rel="external">http://www.admflt.com/</a></p>
<ul>
<li>ADSafe名气太响受到制约，移动端去广告可继续使用</li>
<li>发现上网异常请自觉停用此类去广告软件</li>
</ul>
<p>Http File Server - <a href="http://www.rejetto.com/hfs/?f=dl" target="_blank" rel="external">http://www.rejetto.com/hfs/?f=dl</a></p>
<ul>
<li>十分方便的HTTP文件共享服务器</li>
</ul>
<p>PC Hunter - <a href="http://www.xuetr.com/" target="_blank" rel="external">http://www.xuetr.com/</a></p>
<ul>
<li>PC Hunter是一个Windows系统信息查看软件，同时也是一个手工杀毒辅助软件</li>
</ul>
<h3 id="压缩解压缩"><a href="#压缩解压缩" class="headerlink" title="压缩解压缩"></a>压缩解压缩</h3><p>好压 - <a href="http://haozip.2345.com/" target="_blank" rel="external">http://haozip.2345.com/</a></p>
<ul>
<li>简单方便，自带虚拟光驱</li>
<li>WinRAR，7zip，360压缩也许都很优秀，但我相信自己体验后做出的选择</li>
</ul>
<p>Bandizip - <a href="http://www.bandisoft.com/bandizip" target="_blank" rel="external">http://www.bandisoft.com/bandizip</a></p>
<ul>
<li>Bandisoft出品，轻巧、快速、免费的压缩软件</li>
</ul>
<h3 id="图像浏览处理"><a href="#图像浏览处理" class="headerlink" title="图像浏览处理"></a>图像浏览处理</h3><p>2345看图王 - <a href="http://pic.2345.com/" target="_blank" rel="external">http://pic.2345.com/</a></p>
<ul>
<li>速度最快的看图软件</li>
<li>ACDSee臃肿，Picasa乏力，专业制图请使用PS</li>
</ul>
<p>Honeyview - <a href="http://www.bandisoft.com/honeyview/" target="_blank" rel="external">http://www.bandisoft.com/honeyview/</a></p>
<ul>
<li>也是Bandisoft家族出品，速度惊人的图像浏览器</li>
</ul>
<p>Faststone Capture - <a href="http://www.portablesoft.org/faststone-capture/" target="_blank" rel="external">http://www.portablesoft.org/faststone-capture/</a></p>
<ul>
<li>截图神器+录屏工具</li>
<li>我也不反对大家使用QQ截图哈</li>
</ul>
<p>Adobe Photoshop - <a href="http://www.flighty.cn/html/soft/20141016_263.html" target="_blank" rel="external">http://www.flighty.cn/html/soft/20141016_263.html</a></p>
<ul>
<li>专业制图利器</li>
<li>Mod By 轻狂志</li>
</ul>
<h3 id="文字办公"><a href="#文字办公" class="headerlink" title="文字办公"></a>文字办公</h3><p>Microsoft Office 2016 - <a href="http://pan.baidu.com/s/1hq4gSTI" target="_blank" rel="external">http://pan.baidu.com/s/1hq4gSTI</a></p>
<ul>
<li>整合32位和64位，整合Visio &amp; Project</li>
<li>移动端推荐使用金山WPS</li>
<li>推荐大家购买Office 365，全平台好用且不贵</li>
</ul>
<p>Microsoft Office 2007 - <a href="http://pan.baidu.com/share/link?shareid=966283776&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=966283776&amp;uk=1157904223</a></p>
<ul>
<li>Office 2007 SP3中英双语VOL集成</li>
<li>整合Visio &amp; Project</li>
<li>已完美激活建议求稳者安装</li>
</ul>
<p>MathType - <a href="http://fengqingwuhen.blog.163.com/blog/static/17747406320141019104445935/" target="_blank" rel="external">http://fengqingwuhen.blog.163.com/blog/static/17747406320141019104445935/</a></p>
<ul>
<li>最佳数学公式编辑器</li>
</ul>
<p>福昕风腾PDF套件金山版 - <a href="http://pan.baidu.com/s/17qSRE" target="_blank" rel="external">http://pan.baidu.com/s/17qSRE</a></p>
<ul>
<li>优秀的个人免费PDF阅读软件</li>
<li>简单小巧够用</li>
</ul>
<p>Adobe Acrobat - <a href="http://yun.baidu.com/s/1c0Lmgj2" target="_blank" rel="external">http://yun.baidu.com/s/1c0Lmgj2</a></p>
<ul>
<li>需要使用专业功能朋友还是坚持Acrobat吧</li>
</ul>
<h3 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h3><p>Maxthon傲游 - <a href="http://www.maxthon.cn/" target="_blank" rel="external">http://www.maxthon.cn/</a></p>
<ul>
<li>被搜狗，360极速，金山猎豹，百度浏览器，QQ浏览器依次挑战，但依旧努力改变着世界</li>
<li>因为微信试试全新的QQ浏览器吧</li>
</ul>
<p>Google Chrome - <a href="http://chrome.google.com/" target="_blank" rel="external">http://chrome.google.com/</a></p>
<ul>
<li>简洁的界面和精益求精的内核是核心</li>
<li>插件丰富，版本飙得够快</li>
</ul>
<h3 id="输入法"><a href="#输入法" class="headerlink" title="输入法"></a>输入法</h3><p>百度输入法 - <a href="http://shurufa.baidu.com" target="_blank" rel="external">http://shurufa.baidu.com</a></p>
<ul>
<li>百度输入法尊重用户体验成功上位，全平台统一已成定局</li>
<li>搜狗/腾讯输入法已经合体，产品同质化的今天选择谁已经不再重要</li>
</ul>
<h3 id="安全防护"><a href="#安全防护" class="headerlink" title="安全防护"></a>安全防护</h3><p>腾讯电脑管家 - <a href="http://guanjia.qq.com" target="_blank" rel="external">http://guanjia.qq.com</a></p>
<ul>
<li>刷个存在感，希望淡淡的耍流氓</li>
</ul>
<p>金山毒霸 - <a href="http://www.ijinshan.com/" target="_blank" rel="external">http://www.ijinshan.com/</a></p>
<ul>
<li>金山一直很努力，但也学着耍流氓</li>
<li>猎豹系列很出色</li>
</ul>
<p>360安全中心 - <a href="http://www.360.cn/" target="_blank" rel="external">http://www.360.cn/</a></p>
<ul>
<li>用户体验和技术实力毋庸置疑</li>
<li>我不喜欢周鸿祎yī靠打压对手的流氓商业模式</li>
<li>360已经在安全领域形成垄断优势</li>
</ul>
<p>百度电脑专家 - <a href="http://zhuanjia.baidu.com/" target="_blank" rel="external">http://zhuanjia.baidu.com/</a></p>
<ul>
<li>360和腾讯都有电脑修复，但唯独百度解决了很多实际问题</li>
<li>百度卫士和杀毒还需要努力啊，被KPI逼着真耍流氓</li>
</ul>
<h3 id="媒体处理"><a href="#媒体处理" class="headerlink" title="媒体处理"></a>媒体处理</h3><p>QQ影音 - <a href="http://player.qq.com/" target="_blank" rel="external">http://player.qq.com/</a></p>
<ul>
<li>全能，轻巧，无广告</li>
<li>PotPlayer或许是目前最佳的播放器</li>
</ul>
<p>QQ音乐 - <a href="http://music.qq.com/" target="_blank" rel="external">http://music.qq.com/</a></p>
<ul>
<li>我办理了绿钻</li>
</ul>
<p>网易云音乐 - <a href="http://music.163.com" target="_blank" rel="external">http://music.163.com</a></p>
<ul>
<li>网易再一次用优秀的产品体验为自己赢得了口碑</li>
</ul>
<p>完美解码 - <a href="http://jm.wmzhe.com/" target="_blank" rel="external">http://jm.wmzhe.com/</a></p>
<ul>
<li>高清全能解码播放</li>
<li>视频制作需要</li>
</ul>
<p>格式工厂 - <a href="http://www.pcfreetime.com/" target="_blank" rel="external">http://www.pcfreetime.com/</a></p>
<ul>
<li>经常音视频转码必备之一吧</li>
</ul>
<h3 id="下载工具"><a href="#下载工具" class="headerlink" title="下载工具"></a>下载工具</h3><p>QQ旋风 - <a href="http://xf.qq.com/" target="_blank" rel="external">http://xf.qq.com/</a></p>
<ul>
<li>界面清爽，回归下载本质</li>
<li>如今浏览器自带下载也足矣</li>
</ul>
<p>迅雷 - <a href="http://dl.xunlei.com/" target="_blank" rel="external">http://dl.xunlei.com/</a></p>
<ul>
<li>产品本身很优秀</li>
<li>恭喜IPO成功，期待和小米的整合组建智能家庭</li>
</ul>
<h3 id="聊天通信"><a href="#聊天通信" class="headerlink" title="聊天通信"></a>聊天通信</h3><p>QQ - <a href="http://im.qq.com/" target="_blank" rel="external">http://im.qq.com/</a></p>
<ul>
<li>我办理了QQ会员</li>
</ul>
<p>飞信 - <a href="http://feixin.10086.cn/" target="_blank" rel="external">http://feixin.10086.cn/</a></p>
<ul>
<li>群发短信，微信改变了我们的生活，4G的时代短信将离我们远去</li>
<li>只剩免费的短信报警作用吧</li>
</ul>
<p>微信 - <a href="http://weixin.qq.com/" target="_blank" rel="external">http://weixin.qq.com/</a></p>
<ul>
<li>简单的生活方式，合理的权限隐私控制</li>
<li>被陌陌/钉钉弯道超车也是产品定位无法改变的格局</li>
</ul>
<p>钉钉 - <a href="http://www.dingtalk.com/" target="_blank" rel="external">http://www.dingtalk.com/</a></p>
<ul>
<li>虽然一直不看好陌陌，但存在即合理，视频主播和网红都这么火，能变现才是硬道理</li>
<li>钉钉的企业级协同办公直击用户的痛点，希望能越做越好</li>
</ul>
<h3 id="词典翻译"><a href="#词典翻译" class="headerlink" title="词典翻译"></a>词典翻译</h3><p>有道词典 - <a href="http://cidian.youdao.com/" target="_blank" rel="external">http://cidian.youdao.com/</a></p>
<ul>
<li>越做越强，短期内无人能超越</li>
<li>金山词霸和必应词典看移动端吧</li>
</ul>
<h3 id="邮件客户端"><a href="#邮件客户端" class="headerlink" title="邮件客户端"></a>邮件客户端</h3><p>Foxmail - <a href="http://foxmail.com.cn/" target="_blank" rel="external">http://foxmail.com.cn/</a></p>
<ul>
<li>入职后的第一件事就是收发邮件</li>
<li>个人日常在线邮箱建议使用QQ邮箱</li>
<li>投简历还是无奈选择Gmail</li>
</ul>
<h3 id="文本编辑器"><a href="#文本编辑器" class="headerlink" title="文本编辑器"></a>文本编辑器</h3><p>NotePad2 - <a href="http://pan.baidu.com/s/1qWkb1q0" target="_blank" rel="external">http://pan.baidu.com/s/1qWkb1q0</a></p>
<ul>
<li>差个tab标签，建议替换自带记事本</li>
<li>Mod By zhfi</li>
</ul>
<p>Sublime Text - <a href="http://pan.baidu.com/share/home?uk=3693847658#category/type=0" target="_blank" rel="external">http://pan.baidu.com/share/home?uk=3693847658#category/type=0</a></p>
<ul>
<li>无比性感的编辑器，</li>
<li>建议补充搭配使用</li>
</ul>
<p>UEStudio -  <a href="http://hrtsea.com/?s=UEStudio" target="_blank" rel="external">http://hrtsea.com/?s=UEStudio</a></p>
<ul>
<li>专业强大的文本编辑器</li>
<li>略显臃肿</li>
</ul>
<p>Cmd Markdown - <a href="http://www.zybuluo.com/mdeditor" target="_blank" rel="external">http://www.zybuluo.com/mdeditor</a></p>
<ul>
<li>Markdown简洁的语法可以辅助你书写更有质量的文章</li>
<li>作业部落推出客户端啦</li>
</ul>
<h3 id="数据同步共享"><a href="#数据同步共享" class="headerlink" title="数据同步共享"></a>数据同步共享</h3><p>金山快盘 - <a href="http://www.kuaipan.cn/" target="_blank" rel="external">http://www.kuaipan.cn/</a></p>
<ul>
<li>百度网盘统一文件共享，360不时捅其菊花，金山不断深耕协同办公，腾讯继续保持蛋疼状态</li>
</ul>
<p>Evernote - <a href="http://www.evernote.com/" target="_blank" rel="external">http://www.evernote.com/</a></p>
<ul>
<li>笔记类应用除了onenote我只认可它</li>
<li>建议搭配金山快盘和Evernote，提高工作效率</li>
</ul>
<p>有道云协作 - <a href="http://note.youdao.com/groupintro.html" target="_blank" rel="external">http://note.youdao.com/groupintro.html</a></p>
<ul>
<li>跨平台支持多人实时协作，可以极大提升团队效率</li>
<li>虽然没有直接推荐有道云笔记但对于文字编辑类工作者来说整合使用还是很方便的</li>
</ul>
<p>FileGee - <a href="http://cn.filegee.com/" target="_blank" rel="external">http://cn.filegee.com/</a></p>
<ul>
<li>国内优秀的个人免费本地同步工具</li>
</ul>
<p>自同步 - <a href="http://www.zisync.com/" target="_blank" rel="external">http://www.zisync.com/</a></p>
<ul>
<li>局域网最高效的文件同步、共享工具</li>
</ul>
<h3 id="数据备份恢复"><a href="#数据备份恢复" class="headerlink" title="数据备份恢复"></a>数据备份恢复</h3><p>易数一键还原 - <a href="http://www.onekeyrestore.cn/" target="_blank" rel="external">http://www.onekeyrestore.cn/</a></p>
<ul>
<li>以DiskGenius为内核开发，安全易用靠谱</li>
<li>同时推荐ORM一键还原系统</li>
</ul>
<p>DiskGenius -  <a href="http://pan.baidu.com/s/1kTj3b75" target="_blank" rel="external">http://pan.baidu.com/s/1kTj3b75</a></p>
<ul>
<li>国内磁盘分区和数据恢复的佼佼者</li>
<li>Mod By MyCrack</li>
</ul>
<p>EaseUS Data Recovery Wizard - <a href="http://www.0daydown.com/?s=EaseUS+Data+Recovery" target="_blank" rel="external">http://www.0daydown.com/?s=EaseUS+Data+Recovery</a></p>
<ul>
<li>原先是国产易我数据恢复，现在依旧犀利啊</li>
</ul>
<h3 id="数据加密"><a href="#数据加密" class="headerlink" title="数据加密"></a>数据加密</h3><p>VeraCrypt -  <a href="http://sourceforge.net/projects/veracrypt/" target="_blank" rel="external">http://sourceforge.net/projects/veracrypt/</a></p>
<ul>
<li>替代TrueCrypt，不断修复安全漏洞</li>
<li>微软自带的 BitLocker 驱动器加密也足矣</li>
</ul>
<h3 id="快速启动"><a href="#快速启动" class="headerlink" title="快速启动"></a>快速启动</h3><p>StartIsBack++ - <a href="http://www.zdfans.com/5573.html" target="_blank" rel="external">http://www.zdfans.com/5573.html</a></p>
<ul>
<li>最好用的开始菜单恢复软件</li>
</ul>
<p>Clover - <a href="http://ejie.me/" target="_blank" rel="external">http://ejie.me/</a></p>
<ul>
<li>为你的 Windows Explorer 插上翅膀</li>
<li>可惜作者不更新了，在Win10上会有一些小Bug</li>
</ul>
<p>Ditto - <a href="http://ditto-cp.sourceforge.net/" target="_blank" rel="external">http://ditto-cp.sourceforge.net/</a></p>
<ul>
<li>不可不用的精品免费Windows剪贴板增强小工具</li>
</ul>
<p>SwitchHosts - <a href="http://oldj.github.io/SwitchHosts/" target="_blank" rel="external">http://oldj.github.io/SwitchHosts/</a></p>
<ul>
<li>SwitchHosts! 是一个管理、切换多个 hosts 方案的工具</li>
<li>它是一个免费开源的软件，基于 wxPython 开发，可在 Windows/Linux/Mac 下运行</li>
</ul>
<h3 id="光盘刻录"><a href="#光盘刻录" class="headerlink" title="光盘刻录"></a>光盘刻录</h3><p>Nero -  <a href="http://pan.baidu.com/share/link?shareid=1935729386&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=1935729386&amp;uk=1157904223</a></p>
<ul>
<li>专注刻录，刻录时记得校验数据，别刻飞了</li>
</ul>
<p>UltraISO - <a href="http://www.zdfans.com/1397.html" target="_blank" rel="external">http://www.zdfans.com/1397.html</a></p>
<ul>
<li>作为经常折腾各类操作系统的人来说，它不可或缺</li>
</ul>
<h3 id="驱动运行库"><a href="#驱动运行库" class="headerlink" title="驱动运行库"></a>驱动运行库</h3><p>万能驱动助理 - <a href="http://www.wandrv.com" target="_blank" rel="external">http://www.wandrv.com</a></p>
<ul>
<li>确实是装机必备的万能驱动包</li>
</ul>
<p>驱动精灵 - <a href="http://www.drivergenius.com/" target="_blank" rel="external">http://www.drivergenius.com/</a></p>
<ul>
<li>不重装电脑或者驱动异常，别没事升级驱动</li>
</ul>
<p>DirectX Repair - <a href="http://blog.csdn.net/vbcom/article/details/6962388" target="_blank" rel="external">http://blog.csdn.net/vbcom/article/details/6962388</a></p>
<ul>
<li>系统+游戏修复神器啊</li>
</ul>
<p>3DM游戏运行库 - <a href="http://bbs.3dmgame.com/thread-3551335-1-1.html" target="_blank" rel="external">http://bbs.3dmgame.com/thread-3551335-1-1.html</a></p>
<ul>
<li>集成32位和64位运行库，是目前互联网上最新最全的常用运行库合集</li>
</ul>
<h3 id="远程控制"><a href="#远程控制" class="headerlink" title="远程控制"></a>远程控制</h3><p>TeamViewer - <a href="http://www.zdfans.com/789.html" target="_blank" rel="external">http://www.zdfans.com/789.html</a></p>
<ul>
<li>远程控制，内网穿透，VPN共享，跨平台</li>
<li>对个人免费，业界良心啊，QQ表示继续努力</li>
</ul>
<p>AnyDesk - <a href="http://anydesk.com/" target="_blank" rel="external">http://anydesk.com/</a></p>
<ul>
<li>远程控制效果或许会超出你的想象，作为TeamViewer备用方案</li>
</ul>
<p>向日葵 - <a href="http://sunlogin.oray.com/zh_CN/" target="_blank" rel="external">http://sunlogin.oray.com/zh_CN/</a></p>
<ul>
<li>硬是一种态度</li>
</ul>
<hr>
<h2 id="专业软件"><a href="#专业软件" class="headerlink" title="专业软件"></a>专业软件</h2><blockquote>
<p>大部分行业都有属于自己的专业工具，我这里仅结合实际列举较为实用的</p>
</blockquote>
<p>VMware Workstation -  <a href="http://www.zdfans.com/?s=vmware" target="_blank" rel="external">http://www.zdfans.com/?s=vmware</a></p>
<ul>
<li>我相信硬件性能过剩的趋势将驱使更多的人走近虚拟化，感受另一个奇妙的世界</li>
</ul>
<p>Xmanager - <a href="http://www.0daydown.com/?s=Xmanager+" target="_blank" rel="external">http://www.0daydown.com/?s=Xmanager+</a></p>
<ul>
<li>相信新版Xmanager一定会让你爱不释手，放下SecureCRT的执念</li>
<li>利用Xmanager-Passive可以轻松映射图形化界面，Xshell、SecureCRT，PuTTY等都适用</li>
</ul>
<p>Adobe - <a href="http://yun.baidu.com/share/home?uk=1308988221" target="_blank" rel="external">http://yun.baidu.com/share/home?uk=1308988221</a></p>
<ul>
<li>Mod By liuhangtnnd</li>
</ul>
<p>Auto CAD - <a href="http://www.zdfans.com/4808.html" target="_blank" rel="external">http://www.zdfans.com/4808.html</a></p>
<ul>
<li>Mod By 珊瑚の海</li>
</ul>
<p>FreeMind - <a href="http://sourceforge.net/projects/freemind/" target="_blank" rel="external">http://sourceforge.net/projects/freemind/</a></p>
<ul>
<li>免费简单好用的思维脑图工具</li>
<li>XMind，Mindjet MindManager或许更专业</li>
</ul>
<p>Axure RP - <a href="http://www.0daydown.com/?s=Axure+RP" target="_blank" rel="external">http://www.0daydown.com/?s=Axure+RP</a></p>
<ul>
<li>一个产品经理必备的交互原型设计工具</li>
<li>ProcessOn做为一个在线协作绘图平台也是非常好用的</li>
</ul>
<p>JetBrains - <a href="http://www.jetbrains.com/" target="_blank" rel="external">http://www.jetbrains.com/</a></p>
<ul>
<li>IntelliJ IDEA, PhpStorm, PyCharm, ReSharper等都是这家出品的</li>
<li>学生和老师可以免费试用全套产品哈</li>
</ul>
<p>Navicat - <a href="http://www.navicat.com.cn/" target="_blank" rel="external">http://www.navicat.com.cn/</a></p>
<ul>
<li>最佳的数据库管理工具</li>
</ul>
<h3 id="网络穿透专题"><a href="#网络穿透专题" class="headerlink" title="网络穿透专题"></a>网络穿透专题</h3><blockquote>
<p>善用此类工具你可以穿透各类网络干你想干的事情</p>
</blockquote>
<p>CCProxy - <a href="http://www.ccproxy.com/" target="_blank" rel="external">http://www.ccproxy.com/</a></p>
<ul>
<li>最佳共享上网行为管理软件</li>
<li>与Teamviewer VPN协同二级代理穿透网络</li>
</ul>
<p>COW - <a href="https://github.com/cyfdecyf/cow" target="_blank" rel="external">https://github.com/cyfdecyf/cow</a></p>
<ul>
<li>COW 是一个简化穿墙的 HTTP 代理服务器</li>
</ul>
<p>Proxifier - <a href="http://pan.baidu.com/share/link?shareid=3076195103&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=3076195103&amp;uk=1157904223</a></p>
<ul>
<li>让不支持代理的软件也能通，如mstsc</li>
</ul>
<p>MobaXterm - <a href="http://www.0daydown.com/?s=MobaXterm" target="_blank" rel="external">http://www.0daydown.com/?s=MobaXterm</a></p>
<ul>
<li>MobaXterm是一款豪华、全功能的终端软件MobaXterm</li>
<li>用来代替mRemote管理3389在适合不过了</li>
</ul>
<p>SocksCap64 - <a href="http://www.sockscap64.com/" target="_blank" rel="external">http://www.sockscap64.com/</a></p>
<ul>
<li>最好用的网络加速/Socks代理软件</li>
</ul>
<h3 id="文本处理专题"><a href="#文本处理专题" class="headerlink" title="文本处理专题"></a>文本处理专题</h3><blockquote>
<p>本专题将重点解决日常办公中遇到的PDF转换，内容检索，ORC识别等专向领域</p>
</blockquote>
<p>Smallpdf - <a href="http://smallpdf.com/cn" target="_blank" rel="external">http://smallpdf.com/cn</a></p>
<ul>
<li>云服务时代可以让我们轻松玩转pdf</li>
</ul>
<p>FileLocator Pro - <a href="http://www.portablesoft.org/filelocator-pro-portable/" target="_blank" rel="external">http://www.portablesoft.org/filelocator-pro-portable/</a></p>
<ul>
<li>最好的免索引全文搜索工具</li>
<li>文件检索请使用Everything</li>
</ul>
<p>ABBYY FineReader Corporate - <a href="http://www.ttrar.com/html/ABBYY-FineReader-Corporate.html" target="_blank" rel="external">http://www.ttrar.com/html/ABBYY-FineReader-Corporate.html</a></p>
<ul>
<li>世界第一的OCR软件!识别率英文120%!中文99%!这货是真的真的很强</li>
</ul>
<p>Beyond Compare - <a href="http://www.ttrar.com/html/Beyond-Compare.html" target="_blank" rel="external">http://www.ttrar.com/html/Beyond-Compare.html</a></p>
<ul>
<li>不可多得的专业级的文件夹和文件对比工具</li>
</ul>
<h3 id="文件传输专题"><a href="#文件传输专题" class="headerlink" title="文件传输专题"></a>文件传输专题</h3><blockquote>
<p>本身这没有什么好介绍的，但是最近智能家庭的概念和各大互联网企业的动作让我看见某些市场前景，我这里简单预测下自己的判断。<br>迅雷的离线下载、云点播和百度云这两样”范云服务“产品将在未来的智能家庭硬件大战中起到关键性的作用，它们与其它产品如无线路由器，电视机的合作和融合将会彻底改变我们的生活方式，目前来看已经在改变。</p>
</blockquote>
<p>常用下载工具没有推荐 - ?</p>
<ul>
<li>无论是迅雷，QQ旋风，还是国外的IDM，EagleGet，最终应该转型为类似百度云这样的平台类应用</li>
</ul>
<p>WinSCP - <a href="http://winscp.net/eng/download.php" target="_blank" rel="external">http://winscp.net/eng/download.php</a></p>
<ul>
<li>个人认为是目前最佳的sftp和ftp传输工具，用户体验已超越FileZilla Client</li>
</ul>
<p>Serv-U - <a href="http://www.ttrar.com/html/Serv-U-FTP-Server-Platinum.html" target="_blank" rel="external">http://www.ttrar.com/html/Serv-U-FTP-Server-Platinum.html</a></p>
<ul>
<li>这也许是世界上最好的FTP服务器之一</li>
<li>如果觉得贵不妨尝试下国产的xlight</li>
</ul>
<p>FileZilla Server - <a href="https://filezilla-project.org/download.php?type=server" target="_blank" rel="external">https://filezilla-project.org/download.php?type=server</a></p>
<ul>
<li>Windows下的免费服务端就用这个吧</li>
<li>Unix一般用vsftpd或者ProFTPD较多，当然你也要考虑处理中文乱码</li>
</ul>
<hr>
<p>题图 - 移动先行，云优先   Mobile-First，Cloud-First</p>
]]></content>
    
    <summary type="html">
    
      长期更新此文以督促自己的懒惰，我要用佳软改变你一生的习惯
    
    </summary>
    
      <category term="软件 | Soft" scheme="https://wsgzao.github.io/categories/%E8%BD%AF%E4%BB%B6-Soft/"/>
    
    
  </entry>
  
  <entry>
    <title>vsftpd安装以及配置FTP虚拟用户实践</title>
    <link href="https://wsgzao.github.io/post/vsftpd/"/>
    <id>https://wsgzao.github.io/post/vsftpd/</id>
    <published>2016-04-15T07:42:19.000Z</published>
    <updated>2017-02-10T02:00:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>正如vsftpd官方宣传中所说<code>Probably the most secure and fastest FTP server for UNIX-like systems.</code>我相信这是大多数人选择vsftpd来搭建Linux的FTP服务器的原因，当然ProFTPD用的人应该也不在少数。文章将以清晰直观的方式介绍安装vsftpd以及配置FTP虚拟用户的过程，希望对大家有帮助。</p>
<blockquote>
<p>首选的FTP服务器搭建方式</p>
</blockquote>
<hr>
<h2 id="更新历史"><a href="#更新历史" class="headerlink" title="更新历史"></a>更新历史</h2><p>2016年04月15日 - 增加vsftp匿名用户上传和下载<br>2015年08月24日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/vsftpd/" target="_blank" rel="external">https://wsgzao.github.io/post/vsftpd/</a></p>
<p>扩展阅读</p>
<p>CentOS 6.4 下安装vsftpd - <a href="http://www.cnblogs.com/xiongpq/p/3384759.html" target="_blank" rel="external">http://www.cnblogs.com/xiongpq/p/3384759.html</a><br>ProFTPD - <a href="http://www.proftpd.org/" target="_blank" rel="external">http://www.proftpd.org/</a><br>vsftpd - <a href="http://vsftpd.beasts.org" target="_blank" rel="external">http://vsftpd.beasts.org</a></p>
<hr>
<h2 id="设置匿名用户上传下载"><a href="#设置匿名用户上传下载" class="headerlink" title="设置匿名用户上传下载"></a>设置匿名用户上传下载</h2><blockquote>
<p>使用最简单的方法设置vsftp匿名用户上传和下载</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装vsftpd</span></span><br><span class="line">yum -y install vsftpd</span><br><span class="line">chkconfig vsftpd on</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改vsftpd.conf</span></span><br><span class="line">cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf.bak</span><br><span class="line">vi /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#默认部分可保持不动</span></span><br><span class="line">anonymous_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="built_in">local</span>_<span class="built_in">enable</span>=YES</span><br><span class="line">write_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="built_in">local</span>_<span class="built_in">umask</span>=<span class="number">022</span></span><br><span class="line">dirmessage_<span class="built_in">enable</span>=YES</span><br><span class="line">xferlog_<span class="built_in">enable</span>=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=YES</span><br><span class="line"></span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">userlist_<span class="built_in">enable</span>=YES</span><br><span class="line">tcp_wrappers=YES</span><br><span class="line"></span><br><span class="line"><span class="comment">#增加匿名访问目录</span></span><br><span class="line">anon_root=/var/ftp</span><br><span class="line"></span><br><span class="line"><span class="comment">#打开匿名用户上传/删除/重命名权限</span></span><br><span class="line">anon_upload_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_mkdir_write_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_other_write_<span class="built_in">enable</span>=YES</span><br><span class="line"></span><br><span class="line"><span class="comment">#匿名用户的掩码（如需要，需自己添加，含义：如umask是022,这时创建一个权限为666的文件，文件的实际权限为666-022=644）</span></span><br><span class="line">anon_<span class="built_in">umask</span>=<span class="number">022</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设定支持ASCII模式的上传和下载功能</span></span><br><span class="line">ascii_upload_<span class="built_in">enable</span>=YES</span><br><span class="line">ascii_download_<span class="built_in">enable</span>=YES</span><br><span class="line"></span><br><span class="line"><span class="comment">#增加日志记录</span></span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/xferlog</span><br><span class="line">dual_<span class="built_in">log</span>_<span class="built_in">enable</span>=YES</span><br><span class="line">vsftpd_<span class="built_in">log</span>_file=/var/<span class="built_in">log</span>/vsftpd.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启vsftpd服务并配置目录权限</span></span><br><span class="line">service vsftpd restart</span><br><span class="line"><span class="built_in">cd</span> /var/ftp</span><br><span class="line">mkdir pub</span><br><span class="line">chmod <span class="number">777</span> pub/</span><br><span class="line"></span><br><span class="line"><span class="comment">#常见问题</span></span><br><span class="line">默认情况下，ftp的根目录为/var/ftp，为了安全，这个目录默认不允许设置为<span class="number">777</span>权限，否则ftp将无法访问。但是我们要匿名上传文件，需要“other”用户的写权限，正确的做法：</span><br><span class="line">在/var/ftp中建立一个pub（名子自己起吧）文件夹，将个文件夹权限设置为<span class="number">777</span>（视具体需要自己设），在upload这个文件夹中，匿名用户可以上传文件、创建文件夹、删除文件等。一般至此，便实现vsftpd匿名用户的上传下载了。如果还不行可能selinux的问题，关闭即可。</span><br></pre></td></tr></table></figure>
<h2 id="安装vsftpd"><a href="#安装vsftpd" class="headerlink" title="安装vsftpd"></a>安装vsftpd</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前系统版本</span></span><br><span class="line">cat /etc/redhat-release </span><br><span class="line">CentOS release <span class="number">6.6</span> (Final)</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看是否已经安装vsftpd</span></span><br><span class="line">rpm -qa | grep vsftpd</span><br><span class="line"><span class="comment">#如果没有，就安装，并设置开机启动</span></span><br><span class="line">yum -y install vsftpd</span><br><span class="line">chkconfig vsftpd on</span><br></pre></td></tr></table></figure>
<h2 id="基于虚拟用户的配置"><a href="#基于虚拟用户的配置" class="headerlink" title="基于虚拟用户的配置"></a>基于虚拟用户的配置</h2><blockquote>
<p>所谓虚拟用户就是没有使用真实的帐户，只是通过映射到真实帐户和设置权限的目的。虚拟用户不能登录CentOS系统。</p>
</blockquote>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#服务器独立运行</span></span><br><span class="line">listen=YES</span><br><span class="line"><span class="comment">#设定不允许匿名访问</span></span><br><span class="line">anonymous_<span class="built_in">enable</span>=NO</span><br><span class="line"><span class="comment">#设定本地用户可以访问。注：如使用虚拟宿主用户，在该项目设定为NO的情况下所有虚拟用户将无法访问</span></span><br><span class="line"><span class="built_in">local</span>_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#使用户不能离开主目录</span></span><br><span class="line">chroot_list_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#设定支持ASCII模式的上传和下载功能</span></span><br><span class="line">ascii_upload_<span class="built_in">enable</span>=YES</span><br><span class="line">ascii_download_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#PAM认证文件名。PAM将根据/etc/pam.d/vsftpd进行认证</span></span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line"><span class="comment">#设定启用虚拟用户功能</span></span><br><span class="line">guest_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#指定虚拟用户的宿主用户，CentOS中已经有内置的ftp用户了</span></span><br><span class="line">guest_username=ftp</span><br><span class="line"><span class="comment">#设定虚拟用户个人vsftp的CentOS FTP服务文件存放路径。存放虚拟用户个性的CentOS FTP服务文件(配置文件名=虚拟用户名)</span></span><br><span class="line">user_config_dir=/etc/vsftpd/vuser_conf</span><br><span class="line"><span class="comment">#配置vsftpd日志（可选）</span></span><br><span class="line">xferlog_<span class="built_in">enable</span>=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/xferlog</span><br><span class="line">dual_<span class="built_in">log</span>_<span class="built_in">enable</span>=YES</span><br><span class="line">vsftpd_<span class="built_in">log</span>_file=/var/<span class="built_in">log</span>/vsftpd.log</span><br></pre></td></tr></table></figure>
<h3 id="进行认证"><a href="#进行认证" class="headerlink" title="进行认证"></a>进行认证</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装Berkeley DB工具，很多人找不到db_load的问题就是没有安装这个包</span></span><br><span class="line">yum install db4 db4-utils</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建用户密码文本，注意奇行是用户名，偶行是密码</span></span><br><span class="line">vi /etc/vsftpd/vuser_passwd.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line"><span class="number">123456</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#生成虚拟用户认证的db文件</span></span><br><span class="line">db_load -T -t <span class="built_in">hash</span> <span class="operator">-f</span> /etc/vsftpd/vuser_passwd.txt /etc/vsftpd/vuser_passwd.db</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑认证文件，全部注释掉原来语句，再增加以下两句</span></span><br><span class="line">vi /etc/pam.d/vsftpd</span><br><span class="line"></span><br><span class="line">auth required pam_userdb.so db=/etc/vsftpd/vuser_passwd</span><br><span class="line">account required pam_userdb.so db=/etc/vsftpd/vuser_passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建虚拟用户配置文件</span></span><br><span class="line">mkdir /etc/vsftpd/vuser_conf/</span><br><span class="line"><span class="comment">#文件名等于vuser_passwd.txt里面的账户名，否则下面设置无效</span></span><br><span class="line">vi /etc/vsftpd/vuser_conf/<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#虚拟用户根目录,根据实际情况修改</span></span><br><span class="line"><span class="built_in">local</span>_root=/data/ftp</span><br><span class="line">write_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_<span class="built_in">umask</span>=<span class="number">022</span></span><br><span class="line">anon_world_readable_only=NO</span><br><span class="line">anon_upload_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_mkdir_write_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_other_write_<span class="built_in">enable</span>=YES</span><br></pre></td></tr></table></figure>
<h3 id="设置FTP根目录权限"><a href="#设置FTP根目录权限" class="headerlink" title="设置FTP根目录权限"></a>设置FTP根目录权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#最新的vsftpd要求对主目录不能有写的权限所以ftp为755，主目录下面的子目录再设置777权限</span></span><br><span class="line">mkdir /data/ftp</span><br><span class="line">chmod -R <span class="number">755</span> /data</span><br><span class="line">chmod -R <span class="number">777</span> /data/ftp</span><br><span class="line"></span><br><span class="line"><span class="comment">#建立限制用户访问目录的空文件</span></span><br><span class="line">touch /etc/vsftpd/chroot_list</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果启用vsftpd日志需手动建立日志文件</span></span><br><span class="line">touch /var/<span class="built_in">log</span>/xferlog </span><br><span class="line">touch /var/<span class="built_in">log</span>/vsftpd.log</span><br></pre></td></tr></table></figure>
<h3 id="配置PASV模式（可选）"><a href="#配置PASV模式（可选）" class="headerlink" title="配置PASV模式（可选）"></a>配置PASV模式（可选）</h3><blockquote>
<p>vsftpd默认没有开启PASV模式，现在FTP只能通过PORT模式连接，要开启PASV默认需要通过下面的配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">打开/etc/vsftpd/vsftpd.conf，在末尾添加</span><br><span class="line"></span><br><span class="line"><span class="comment">#开启PASV模式</span></span><br><span class="line">pasv_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#最小端口号</span></span><br><span class="line">pasv_min_port=<span class="number">40000</span></span><br><span class="line"><span class="comment">#最大端口号</span></span><br><span class="line">pasv_max_port=<span class="number">40080</span></span><br><span class="line">pasv_promiscuous=YES</span><br><span class="line"></span><br><span class="line"><span class="comment">#在防火墙配置内开启40000到40080端口</span></span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p -dport <span class="number">40000</span>:<span class="number">40080</span> -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启iptabls和vsftpd</span></span><br><span class="line">service iptables restart</span><br><span class="line">service vsftpd restart</span><br><span class="line"></span><br><span class="line">现在可以使用PASV模式连接你的FTP服务器了~</span><br></pre></td></tr></table></figure>
<h3 id="Selinux和防火墙"><a href="#Selinux和防火墙" class="headerlink" title="Selinux和防火墙"></a>Selinux和防火墙</h3><blockquote>
<p>该关闭的关闭，该放行的放行</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#关闭selinux/iptables</span></span><br><span class="line">sed -i <span class="string">'/SELINUX/s/enforcing/disabled/'</span> /etc/selinux/config</span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">chkconfig iptables off</span><br><span class="line">service iptables stop</span><br></pre></td></tr></table></figure>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>如果登录时出现</p>
<pre><code>500 OOPS: priv_sock_get_result. Connection closed by remote host.
</code></pre><p>这样的错误，需要升级pam</p>
<pre><code>yum update pam
</code></pre>]]></content>
    
    <summary type="html">
    
      首选的FTP服务器搭建方式
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
  <entry>
    <title>Cobbler自动化安装配置实践</title>
    <link href="https://wsgzao.github.io/post/cobbler/"/>
    <id>https://wsgzao.github.io/post/cobbler/</id>
    <published>2016-04-12T08:22:32.000Z</published>
    <updated>2017-02-10T02:00:57.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/b1p5A8Cy.jpeg" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Cobbler是一个自动化和简化系统安装的工具，通过使用网络引导来控制和启动安装。Cobbler的特性包括存储库镜像、Kickstart模板和连接电源管理系统。使用Cobbler之前需要先了解下PXE和Kickstart的基本原理，文章包含了Cobbler工作原理和Cobbler部署实践两部分内容，交叉关联性的内容还是蛮多的，遇到报错也不要怕，都会一步一步解决的。</p>
<blockquote>
<p>使用Cobbler轻松设置和管理网络安装环境</p>
</blockquote>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2016年04月12日 - 初稿</p>
<p>阅读原文 - <a href="https://wsgzao.github.io/post/cobbler/" target="_blank" rel="external">https://wsgzao.github.io/post/cobbler/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Cobbler Manuals - <a href="http://cobbler.github.io/manuals/" target="_blank" rel="external">http://cobbler.github.io/manuals/</a><br>自动化运维工具Cobbler - <a href="http://cuchadanfan.blog.51cto.com/9940284/1698348" target="_blank" rel="external">http://cuchadanfan.blog.51cto.com/9940284/1698348</a></p>
<h2 id="Cobbler工作原理"><a href="#Cobbler工作原理" class="headerlink" title="Cobbler工作原理"></a>Cobbler工作原理</h2><p>Cobbler由Python语言开发，是对PXE和Kickstart以及DHCP的封装。融合很多特性，提供了CLI和Web的管理形式。更加方便的实行网络安装。同时，Cobbler也提供了API接口，使用其它语言也很容易做扩展。它不紧可以安装物理机，同时也支持kvm、xen虚拟化、Guest OS的安装。更多的是它还能结合Puppet等集中化管理软件，实现自动化的管理。</p>
<p>Cobbler 支持众多的发行版：Red Hat、Fedora、CentOS、Debian、Ubuntu 和 SuSE。当添加一个操作系统（通常通过使用 ISO 文件）时，Cobbler 知道如何解压缩合适的文件并调整网络服务，以正确引导机器。Cobbler 使用命令行方式管理，也提供了基于Web的图形化配置管理工具（cobbler-web）。通过配置cobbler自动部署DHCP、TFTP、HTTP，在安装过程中加载kiskstart无人值守安装应答文件实现无人值守。从客户端使用PXE引导启动安装。</p>
<p><strong>Server端</strong><br>第一步，启动Cobbler服务<br>第二步，进行Cobbler错误检查，执行cobbler check命令<br>第三步，进行配置同步，执行cobbler sync命令<br>第四步，复制相关启动文件文件到TFTP目录中<br>第五步，启动DHCP服务，提供地址分配<br>第六步，DHCP服务分配IP地址<br>第七步，TFTP传输启动文件<br>第八步，Server端接收安装信息<br>第九步，Server端发送ISO镜像与Kickstart文件 </p>
<p><strong>Client端</strong><br>第一步，客户端以PXE模式启动<br>第二步，客户端获取IP地址<br>第三步，通过TFTP服务器获取启动文件<br>第四步，进入Cobbler安装选择界面<br>第五步，客户端确定加载信息<br>第六步，根据配置信息准备安装系统<br>第七步，加载Kickstart文件<br>第八步，传输系统安装的其它文件<br>第九步，进行安装系统 </p>
<h2 id="Cobbler部署实践"><a href="#Cobbler部署实践" class="headerlink" title="Cobbler部署实践"></a>Cobbler部署实践</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置YUM源</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repo.d/</span><br><span class="line">vi epel.repo</span><br><span class="line"></span><br><span class="line">[epel]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux <span class="number">6</span> - <span class="variable">$basearch</span></span><br><span class="line">baseurl=http://download.fedoraproject.org/pub/epel/<span class="number">6</span>/<span class="variable">$basearch</span></span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-6&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=<span class="number">1</span></span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[epel-debuginfo]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux <span class="number">6</span> - <span class="variable">$basearch</span> - Debug</span><br><span class="line">baseurl=http://download.fedoraproject.org/pub/epel/<span class="number">6</span>/<span class="variable">$basearch</span>/debug</span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-6&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=<span class="number">0</span></span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-<span class="number">6</span></span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">[epel-source]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux <span class="number">6</span> - <span class="variable">$basearch</span> - Source</span><br><span class="line">baseurl=http://download.fedoraproject.org/pub/epel/<span class="number">6</span>/SRPMS</span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-6&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=<span class="number">0</span></span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-<span class="number">6</span></span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入GPG key</span></span><br><span class="line">sudo rpm --import http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改repo文件添加CentOS 6.X的YUM源</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line">cp rhel-source.repo rhel-source.repo.bak</span><br><span class="line">vi rhel-source.repo</span><br><span class="line"></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Base</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Updates</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Extras</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Plus</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除缓存查看是否生效</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line">yum repolist</span><br><span class="line"></span><br><span class="line"><span class="comment">#直接cobbler关联依赖包</span></span><br><span class="line">yum install cobbler cobbler-web httpd rsync tftp-server xinetd dhcp python-ctypes debmirror pykickstart cman fence-agents dnsmasq </span><br><span class="line"></span><br><span class="line"><span class="comment">#使用yum-plugin-downloadonly插件</span></span><br><span class="line">yum install -y yum-plugin-downloadonly</span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/cobbler cobbler cobbler-web httpd rsync tftp-server xinetd dhcp python-ctypes debmirror pykickstart cman fence-agents dnsmasq </span><br><span class="line"></span><br><span class="line"><span class="comment">#必要服务</span></span><br><span class="line">（<span class="number">1</span>）cobbler      （cobbler的核心）</span><br><span class="line">（<span class="number">2</span>）httpd        （提供cobbler的web界面）</span><br><span class="line">（<span class="number">3</span>）dhcpd        （为自动安装系统分配IP地址）</span><br><span class="line">（<span class="number">4</span>）epel-release （为之提供yum源）</span><br><span class="line">（<span class="number">5</span>）rsync        （cobbler需要同步信息）</span><br><span class="line">（<span class="number">6</span>）cobbler-web  （cobbler的一个web插件）</span><br><span class="line">（<span class="number">7</span>）xinetd       （为rsync和tftp的守护进程）</span><br><span class="line">（<span class="number">8</span>）tftp         （传送安装的一些文件的类似ftp）</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查cobbler配置，常见错误如下</span></span><br><span class="line">cobbler check</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> : The <span class="string">'server'</span> field <span class="keyword">in</span> /etc/cobbler/settings must be <span class="built_in">set</span> to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP <span class="keyword">for</span> the boot server as reachable by all machines that will use it.</span><br><span class="line"><span class="number">2</span> : For PXE to be functional, the <span class="string">'next_server'</span> field <span class="keyword">in</span> /etc/cobbler/settings must be <span class="built_in">set</span> to something other than <span class="number">127.0</span>.<span class="number">0.1</span>, and should match the IP of the boot server on the PXE network.</span><br><span class="line"><span class="number">3</span> : change <span class="string">'disable'</span> to <span class="string">'no'</span> <span class="keyword">in</span> /etc/xinetd.d/tftp</span><br><span class="line"><span class="number">4</span> : some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run <span class="string">'cobbler get-loaders'</span> to download them, or, <span class="keyword">if</span> you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files <span class="keyword">in</span> this directory, should you want to support all architectures, should include pxelinux.<span class="number">0</span>, menu.c32, elilo.efi, and yaboot. The <span class="string">'cobbler get-loaders'</span> <span class="built_in">command</span> is the easiest way to resolve these requirements.</span><br><span class="line"><span class="number">5</span> : change <span class="string">'disable'</span> to <span class="string">'no'</span> <span class="keyword">in</span> /etc/xinetd.d/rsync</span><br><span class="line"><span class="number">6</span> : file /etc/xinetd.d/rsync does not exist</span><br><span class="line"><span class="number">7</span> : debmirror package is not installed, it will be required to manage debian deployments and repositories</span><br><span class="line"><span class="number">8</span> : ksvalidator was not found, install pykickstart</span><br><span class="line"><span class="number">9</span> : The default password used by the sample templates <span class="keyword">for</span> newly installed machines (default_password_crypted <span class="keyword">in</span> /etc/cobbler/settings) is still <span class="built_in">set</span> to <span class="string">'cobbler'</span> and should be changed, try: <span class="string">"openssl passwd -1 -salt 'random-phrase-here' 'your-password-here'"</span> to generate new one</span><br><span class="line"><span class="number">10</span> : fencing tools were not found, and are required to use the (optional) power management features. install cman or fence-agents to use them</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.编辑/etc/cobbler/settings文件，找到 server选项，修改为本机IP即可</span><br><span class="line"><span class="number">2</span>.编辑/etc/cobbler/settings文件，找到 next_server选项，修改为本机IP即可</span><br><span class="line"><span class="number">3</span>.SELinux的设置, 如果上面已经关闭了SELinux就不用管了</span><br><span class="line"><span class="number">4</span>.执行 cobbler get-loaders，系统将自动下载loader程序，完成提示<span class="number">4</span>的修复工作。</span><br><span class="line"><span class="number">5</span>.编辑/etc/xinetd.d/tftp文件，将文件中的<span class="built_in">disable</span>字段的配置由yes改为no</span><br><span class="line"><span class="number">6</span>.编辑/etc/xinetd.d/rsync文件，将文件中的<span class="built_in">disable</span>字段的配置由yes改为no</span><br><span class="line"><span class="number">7</span>.在iptables中将<span class="number">69</span>，<span class="number">80</span>，<span class="number">25151</span>端口打开。如果仅仅只是在内部环境中使用，建议直接将防火墙关掉</span><br><span class="line"><span class="number">8</span>.提示说debmirror没安装。如果不是安装 debian之类的系统，此提示可以忽略</span><br><span class="line"><span class="number">9</span>.修改cobbler用户的默认密码，可以使用如下命令生成密码，并使用生成后的密码替换/etc/cobbler/settings中的密码。生成密码命令：openssl passwd -<span class="number">1</span> -salt <span class="string">'random-phrase-here'</span> <span class="string">'your-password-here'</span>其中“random-phrase-here”为任意字符</span><br><span class="line"><span class="number">10</span>.安装cman或者fence-agents</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭selinux/iptables</span></span><br><span class="line">sed -i <span class="string">'/SELINUX/s/enforcing/disabled/'</span> /etc/selinux/config</span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">chkconfig iptables off</span><br><span class="line">service iptables stop</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置tftp服务和rsync服务</span></span><br><span class="line">sed -i <span class="string">'/disable/c\\tdisable\t\t\t= no'</span> /etc/xinetd.d/tftp</span><br><span class="line">sed -i <span class="operator">-e</span> <span class="string">'s/\=\ yes/\=\ no/g'</span> /etc/xinetd.d/rsync </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置DHCP server的IP</span></span><br><span class="line">sed -i <span class="string">'s/next_server: 127.0.0.1/next_server: 172.28.70.245/g'</span> /etc/cobbler/settings  </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置cobbler的IP</span></span><br><span class="line">sed -i <span class="string">'s/server: 127.0.0.1/server: 172.28.70.245/g'</span> /etc/cobbler/settings  </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler管理rsync</span></span><br><span class="line">sed -i <span class="string">'s/manage_rsync: 0/manage_rsync: 1/g'</span> /etc/cobbler/settings  </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler管理DHCP</span></span><br><span class="line">sed -i <span class="string">'s/manage_dhcp: 0/manage_dhcp: 1/g'</span> /etc/cobbler/settings </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler一次安装开关（可选）</span></span><br><span class="line">sed -i <span class="string">'s/pxe_just_once: 0/pxe_just_once: 1/g'</span> /etc/cobbler/settings</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler管理DNS（可选）</span></span><br><span class="line">sed -i <span class="string">'s/manage_dns: 0/manage_dns: 1/g'</span> /etc/cobbler/settings</span><br><span class="line"></span><br><span class="line"><span class="comment">#开启动态更新（可选）</span></span><br><span class="line">sed -i <span class="string">'s/allow_dynamic_settings: 0/allow_dynamic_settings: 1/g'</span> /etc/cobbler/settings</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置debmirror</span></span><br><span class="line">sed -i <span class="operator">-e</span> <span class="string">'s/@dists=/#@dists=/g'</span> /etc/debmirror.conf</span><br><span class="line">sed -i <span class="operator">-e</span> <span class="string">'s/@arches=/#@arches=/g'</span> /etc/debmirror.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑dnsmasq.template中dhcp-range部分</span></span><br><span class="line"><span class="comment">#vi /etc/cobbler/dnsmasq.template</span></span><br><span class="line">vi /etc/dnsmasq.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cobbler generated configuration file for dnsmasq</span></span><br><span class="line"><span class="comment"># $date</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># resolve.conf .. ?</span></span><br><span class="line"><span class="comment">#no-poll</span></span><br><span class="line"><span class="comment">#enable-dbus</span></span><br><span class="line"><span class="built_in">read</span>-ethers</span><br><span class="line">addn-hosts = /var/lib/cobbler/cobbler_hosts</span><br><span class="line"></span><br><span class="line">dhcp-range=<span class="number">172.28</span>.<span class="number">70.246</span>,<span class="number">172.28</span>.<span class="number">70.250</span></span><br><span class="line">dhcp-option=<span class="number">3</span>,<span class="variable">$next_server</span></span><br><span class="line">dhcp-lease-max=<span class="number">1000</span></span><br><span class="line">dhcp-authoritative</span><br><span class="line">dhcp-boot=pxelinux.<span class="number">0</span></span><br><span class="line">dhcp-boot=net:normalarch,pxelinux.<span class="number">0</span></span><br><span class="line">dhcp-boot=net:ia64,<span class="variable">$elilo</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重启dnsmasq</span></span><br><span class="line">/etc/init.d/dnsmasq restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑dhcp.template</span></span><br><span class="line">cp /etc/cobbler/dhcp.template /etc/cobbler/dhcp.template.bak</span><br><span class="line">vi /etc/cobbler/dhcp.template</span><br><span class="line"></span><br><span class="line"><span class="comment"># ******************************************************************</span></span><br><span class="line"><span class="comment"># Cobbler managed dhcpd.conf file</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># generated from cobbler dhcp.conf template ($date)</span></span><br><span class="line"><span class="comment"># Do NOT make changes to /etc/dhcpd.conf. Instead, make your changes</span></span><br><span class="line"><span class="comment"># in /etc/cobbler/dhcp.template, as /etc/dhcpd.conf will be</span></span><br><span class="line"><span class="comment"># overwritten.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ******************************************************************</span></span><br><span class="line"></span><br><span class="line">ddns-update-style interim;</span><br><span class="line"></span><br><span class="line">allow booting;</span><br><span class="line">allow bootp;</span><br><span class="line"></span><br><span class="line">ignore client-updates;</span><br><span class="line"><span class="built_in">set</span> vendorclass = option vendor-class-identifier;</span><br><span class="line"></span><br><span class="line">option pxe-system-type code <span class="number">93</span> = unsigned <span class="built_in">integer</span> <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">subnet <span class="number">172.28</span>.<span class="number">70.0</span> netmask <span class="number">255.255</span>.<span class="number">255.0</span> &#123;</span><br><span class="line">     option routers             <span class="number">172.28</span>.<span class="number">70.254</span>;</span><br><span class="line">     option domain-name-servers <span class="number">172.28</span>.<span class="number">70.254</span>;</span><br><span class="line">     option subnet-mask         <span class="number">255.255</span>.<span class="number">255.0</span>;</span><br><span class="line">     range dynamic-bootp        <span class="number">172.28</span>.<span class="number">70.246</span> <span class="number">172.28</span>.<span class="number">70.250</span>;</span><br><span class="line">     default-lease-time         <span class="number">21600</span>;</span><br><span class="line">     max-lease-time             <span class="number">43200</span>;</span><br><span class="line">     next-server                <span class="variable">$next_server</span>;</span><br><span class="line">     class <span class="string">"pxeclients"</span> &#123;</span><br><span class="line">          match <span class="keyword">if</span> substring (option vendor-class-identifier, <span class="number">0</span>, <span class="number">9</span>) = <span class="string">"PXEClient"</span>;</span><br><span class="line">          <span class="keyword">if</span> option pxe-system-type = <span class="number">00</span>:<span class="number">02</span> &#123;</span><br><span class="line">                  filename <span class="string">"ia64/elilo.efi"</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> option pxe-system-type = <span class="number">00</span>:<span class="number">06</span> &#123;</span><br><span class="line">                  filename <span class="string">"grub/grub-x86.efi"</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> option pxe-system-type = <span class="number">00</span>:<span class="number">07</span> &#123;</span><br><span class="line">                  filename <span class="string">"grub/grub-x86_64.efi"</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  filename <span class="string">"pxelinux.0"</span>;</span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#for dhcp_tag in $dhcp_tags.keys():</span></span><br><span class="line">    <span class="comment">## group could be subnet if your dhcp tags line up with your subnets</span></span><br><span class="line">    <span class="comment">## or really any valid dhcpd.conf construct ... if you only use the</span></span><br><span class="line">    <span class="comment">## default dhcp tag in cobbler, the group block can be deleted for a</span></span><br><span class="line">    <span class="comment">## flat configuration</span></span><br><span class="line"><span class="comment"># group for Cobbler DHCP tag: $dhcp_tag</span></span><br><span class="line">group &#123;</span><br><span class="line">        <span class="comment">#for mac in $dhcp_tags[$dhcp_tag].keys():</span></span><br><span class="line">            <span class="comment">#set iface = $dhcp_tags[$dhcp_tag][$mac]</span></span><br><span class="line">    host <span class="variable">$iface</span>.name &#123;</span><br><span class="line">        hardware ethernet <span class="variable">$mac</span>;</span><br><span class="line">        <span class="comment">#if $iface.ip_address:</span></span><br><span class="line">        fixed-address <span class="variable">$iface</span>.ip_address;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">#if $iface.hostname:</span></span><br><span class="line">        option host-name <span class="string">"<span class="variable">$iface</span>.hostname"</span>;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">#if $iface.netmask:</span></span><br><span class="line">        option subnet-mask <span class="variable">$iface</span>.netmask;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">#if $iface.gateway:</span></span><br><span class="line">        option routers <span class="variable">$iface</span>.gateway;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">#if $iface.enable_gpxe:</span></span><br><span class="line">        <span class="keyword">if</span> exists user-class and option user-class = <span class="string">"gPXE"</span> &#123;</span><br><span class="line">            filename <span class="string">"http://<span class="variable">$cobbler_server</span>/cblr/svc/op/gpxe/system/<span class="variable">$iface</span>.owner"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> exists user-class and option user-class = <span class="string">"iPXE"</span> &#123;</span><br><span class="line">            filename <span class="string">"http://<span class="variable">$cobbler_server</span>/cblr/svc/op/gpxe/system/<span class="variable">$iface</span>.owner"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            filename <span class="string">"undionly.kpxe"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#else</span></span><br><span class="line">        filename <span class="string">"<span class="variable">$iface</span>.filename"</span>;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">## Cobbler defaults to $next_server, but some users</span></span><br><span class="line">        <span class="comment">## may like to use $iface.system.server for proxied setups</span></span><br><span class="line">        next-server <span class="variable">$next_server</span>;</span><br><span class="line">        <span class="comment">## next-server $iface.next_server;</span></span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">#end for</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#end for</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将dns和dhcp的管理引擎都配置为dnsmasq，修改/etc/cobbler/modules.conf</span></span><br><span class="line">vi /etc/cobbler/modules.conf</span><br><span class="line"></span><br><span class="line">[authentication]</span><br><span class="line">module = authn_configfile</span><br><span class="line">[dns]</span><br><span class="line">module = manage_dnsmasq</span><br><span class="line">[dhcp]</span><br><span class="line">module = manage_dnsmasq</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改httpd配置并启动</span></span><br><span class="line">vi /etc/httpd/conf/httpd.conf</span><br><span class="line"></span><br><span class="line">ServerName <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">80</span></span><br><span class="line"></span><br><span class="line">/etc/init.d/httpd restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置目标系统root密码，这个设置只对CentOS/RHEL有效</span></span><br><span class="line">PASSWORD=<span class="string">"`echo "</span>admin123<span class="string">" | openssl passwd -1 -salt 'root' –stdin`"</span></span><br><span class="line">sed -i s@<span class="string">"^default_password_crypted.*$"</span>@<span class="string">"default_password_crypted: \"<span class="variable">$PASSWORD</span>\""</span>@g /etc/cobbler/settings</span><br><span class="line">***</span><br><span class="line">default_password_crypted: <span class="string">"<span class="variable">$1</span><span class="variable">$cobbler</span><span class="variable">$k</span>/5ITeQUOffuOujzEvhjY."</span></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line"><span class="comment">#下载启动菜单,启动报错请尝试service cobblerd restart </span></span><br><span class="line">cobbler get-loaders</span><br><span class="line"></span><br><span class="line">cobbler@root<span class="comment">#cobbler get-loaders</span></span><br><span class="line">task started: <span class="number">2016</span>-<span class="number">04</span>-<span class="number">11</span>_092911_get_loaders</span><br><span class="line">task started (id=Download Bootloader Content, time=Mon Apr <span class="number">11</span> <span class="number">09</span>:<span class="number">29</span>:<span class="number">11</span> <span class="number">2016</span>)</span><br><span class="line">downloading http://cobbler.github.io/loaders/README to /var/lib/cobbler/loaders/README</span><br><span class="line">downloading http://cobbler.github.io/loaders/COPYING.elilo to /var/lib/cobbler/loaders/COPYING.elilo</span><br><span class="line">downloading http://cobbler.github.io/loaders/COPYING.yaboot to /var/lib/cobbler/loaders/COPYING.yaboot</span><br><span class="line">downloading http://cobbler.github.io/loaders/COPYING.syslinux to /var/lib/cobbler/loaders/COPYING.syslinux</span><br><span class="line">downloading http://cobbler.github.io/loaders/elilo-<span class="number">3.8</span>-ia64.efi to /var/lib/cobbler/loaders/elilo-ia64.efi</span><br><span class="line">downloading http://cobbler.github.io/loaders/yaboot-<span class="number">1.3</span>.<span class="number">17</span> to /var/lib/cobbler/loaders/yaboot</span><br><span class="line">downloading http://cobbler.github.io/loaders/pxelinux.<span class="number">0</span>-<span class="number">3.86</span> to /var/lib/cobbler/loaders/pxelinux.<span class="number">0</span></span><br><span class="line">downloading http://cobbler.github.io/loaders/menu.c32-<span class="number">3.86</span> to /var/lib/cobbler/loaders/menu.c32</span><br><span class="line">downloading http://cobbler.github.io/loaders/grub-<span class="number">0.97</span>-x86.efi to /var/lib/cobbler/loaders/grub-x86.efi</span><br><span class="line">downloading http://cobbler.github.io/loaders/grub-<span class="number">0.97</span>-x86_64.efi to /var/lib/cobbler/loaders/grub-x86_64.efi</span><br><span class="line">*** TASK COMPLETE ***</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启相关服务并配置自动启动</span></span><br><span class="line">chkconfig cobblerd on  </span><br><span class="line">chkconfig httpd on</span><br><span class="line">chkconfig xinetd on</span><br><span class="line">chkconfig dnsmasq on </span><br><span class="line"> </span><br><span class="line">service httpd restart  </span><br><span class="line">service xinetd restart  </span><br><span class="line">service dnsmasq restart </span><br><span class="line">service cobblerd restart  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#检查并同步cobbler配置，如果有如下报错确认文件存在可以忽略</span></span><br><span class="line">cobbler@ZJ/etc/cobbler<span class="comment">#cobbler check</span></span><br><span class="line">The following are potential configuration items that you may want to fix:</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> : file /etc/xinetd.d/rsync does not exist</span><br><span class="line"></span><br><span class="line">Restart cobblerd and <span class="keyword">then</span> run <span class="string">'cobbler sync'</span> to apply changes.</span><br><span class="line"></span><br><span class="line">cobbler@ZJ/etc/cobbler<span class="comment">#cobbler sync</span></span><br><span class="line">task started: <span class="number">2016</span>-<span class="number">04</span>-<span class="number">11</span>_170138_sync</span><br><span class="line">task started (id=Sync, time=Mon Apr <span class="number">11</span> <span class="number">17</span>:<span class="number">01</span>:<span class="number">38</span> <span class="number">2016</span>)</span><br><span class="line">running pre-sync triggers</span><br><span class="line">cleaning trees</span><br><span class="line">removing: /var/lib/tftpboot/grub/images</span><br><span class="line">copying bootloaders</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/pxelinux.<span class="number">0</span> -&gt; /var/lib/tftpboot/pxelinux.<span class="number">0</span></span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/menu.c32 -&gt; /var/lib/tftpboot/menu.c32</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/yaboot -&gt; /var/lib/tftpboot/yaboot</span><br><span class="line">trying hardlink /usr/share/syslinux/memdisk -&gt; /var/lib/tftpboot/memdisk</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/grub-x86_64.efi -&gt; /var/lib/tftpboot/grub/grub-x86_64.efi</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/grub-x86.efi -&gt; /var/lib/tftpboot/grub/grub-x86.efi</span><br><span class="line">copying distros to tftpboot</span><br><span class="line">copying images</span><br><span class="line">generating PXE configuration files</span><br><span class="line">generating PXE menu structure</span><br><span class="line">rendering DHCP files</span><br><span class="line">rendering DNS files</span><br><span class="line">rendering TFTPD files</span><br><span class="line">generating /etc/xinetd.d/tftp</span><br><span class="line">cleaning link caches</span><br><span class="line">rendering Rsync files</span><br><span class="line">running post-sync triggers</span><br><span class="line">running python triggers from /var/lib/cobbler/triggers/sync/post/*</span><br><span class="line">running python trigger cobbler.modules.sync_post_restart_services</span><br><span class="line">running: service dnsmasq restart</span><br><span class="line">received on stdout: Shutting down dnsmasq: [  OK  ]</span><br><span class="line">Starting dnsmasq: [  OK  ]</span><br><span class="line"></span><br><span class="line">received on stderr: </span><br><span class="line">running shell triggers from /var/lib/cobbler/triggers/sync/post/*</span><br><span class="line">running python triggers from /var/lib/cobbler/triggers/change/*</span><br><span class="line">running python trigger cobbler.modules.scm_track</span><br><span class="line">running shell triggers from /var/lib/cobbler/triggers/change/*</span><br><span class="line">*** TASK COMPLETE ***</span><br><span class="line"></span><br><span class="line"><span class="comment">#开启动态编辑后的效果</span></span><br><span class="line">cobbler setting report</span><br><span class="line">cobbler setting report [--name=option]</span><br><span class="line"></span><br><span class="line">allow_duplicate_hostnames               : <span class="number">0</span></span><br><span class="line">allow_duplicate_ips                     : <span class="number">0</span></span><br><span class="line">allow_duplicate_macs                    : <span class="number">0</span></span><br><span class="line">allow_dynamic_settings                  : <span class="number">1</span></span><br><span class="line">always_write_dhcp_entries               : <span class="number">0</span></span><br><span class="line">anamon_enabled                          : <span class="number">0</span></span><br><span class="line">auth_token_expiration                   : <span class="number">3600</span></span><br><span class="line">authn_pam_service                       : login</span><br><span class="line"><span class="built_in">bind</span>_chroot_path                        : </span><br><span class="line"><span class="built_in">bind</span>_master                             : <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">build_reporting_email                   : [<span class="string">'root@localhost'</span>]</span><br><span class="line">build_reporting_enabled                 : <span class="number">0</span></span><br><span class="line">build_reporting_ignorelist              : [<span class="string">''</span>]</span><br><span class="line">build_reporting_sender                  : </span><br><span class="line">build_reporting_smtp_server             : localhost</span><br><span class="line">build_reporting_subject                 : </span><br><span class="line">build_reporting_to_address              : </span><br><span class="line">buildisodir                             : /var/cache/cobbler/buildiso</span><br><span class="line">cheetah_import_whitelist                : [<span class="string">'random'</span>, <span class="string">'re'</span>, <span class="string">'time'</span>]</span><br><span class="line">client_use_https                        : <span class="number">0</span></span><br><span class="line">client_use_localhost                    : <span class="number">0</span></span><br><span class="line">cobbler_master                          : </span><br><span class="line">consoles                                : /var/consoles</span><br><span class="line">createrepo_flags                        : -c cache <span class="operator">-s</span> sha</span><br><span class="line">default_deployment_method               : ssh</span><br><span class="line">default_kickstart                       : /var/lib/cobbler/kickstarts/default.ks</span><br><span class="line">default_name_servers                    : []</span><br><span class="line">default_name_servers_search             : []</span><br><span class="line">default_ownership                       : [<span class="string">'admin'</span>]</span><br><span class="line">default_password_crypted                : <span class="variable">$1</span><span class="variable">$root</span><span class="variable">$JX8M6OcOn</span>.pjk0pHdnG0y0</span><br><span class="line">default_template_<span class="built_in">type</span>                   : cheetah</span><br><span class="line">default_virt_bridge                     : xenbr0</span><br><span class="line">default_virt_disk_driver                : raw</span><br><span class="line">default_virt_file_size                  : <span class="number">5</span></span><br><span class="line">default_virt_ram                        : <span class="number">512</span></span><br><span class="line">default_virt_<span class="built_in">type</span>                       : xenpv</span><br><span class="line"><span class="built_in">enable</span>_gpxe                             : <span class="number">0</span></span><br><span class="line"><span class="built_in">enable</span>_menu                             : <span class="number">1</span></span><br><span class="line">func_auto_setup                         : <span class="number">0</span></span><br><span class="line">func_master                             : overlord.example.org</span><br><span class="line">http_port                               : <span class="number">80</span></span><br><span class="line">isc_<span class="built_in">set</span>_host_name                       : <span class="number">0</span></span><br><span class="line">iso_template_dir                        : /etc/cobbler/iso</span><br><span class="line">kerberos_realm                          : EXAMPLE.COM</span><br><span class="line">kernel_options                          : &#123;<span class="string">'ksdevice'</span>: <span class="string">'bootif'</span>, <span class="string">'lang'</span>: <span class="string">' '</span>, <span class="string">'text'</span>: <span class="string">'~'</span>&#125;</span><br><span class="line">kernel_options_s390x                    : &#123;<span class="string">'vnc'</span>: <span class="string">'~'</span>, <span class="string">'ip'</span>: False, <span class="string">'RUNKS'</span>: <span class="number">1</span>, <span class="string">'ramdisk_size'</span>: <span class="number">40000</span>, <span class="string">'ro'</span>: <span class="string">'~'</span>, <span class="string">'root'</span>: <span class="string">'/dev/ram0'</span>&#125;</span><br><span class="line">ldap_anonymous_<span class="built_in">bind</span>                     : <span class="number">1</span></span><br><span class="line">ldap_base_dn                            : DC=example,DC=com</span><br><span class="line">ldap_management_default_<span class="built_in">type</span>            : authconfig</span><br><span class="line">ldap_port                               : <span class="number">389</span></span><br><span class="line">ldap_search_<span class="built_in">bind</span>_dn                     : </span><br><span class="line">ldap_search_passwd                      : </span><br><span class="line">ldap_search_prefix                      : uid=</span><br><span class="line">ldap_server                             : ldap.example.com</span><br><span class="line">ldap_tls                                : <span class="number">1</span></span><br><span class="line">ldap_tls_cacertfile                     : </span><br><span class="line">ldap_tls_certfile                       : </span><br><span class="line">ldap_tls_keyfile                        : </span><br><span class="line">manage_dhcp                             : <span class="number">1</span></span><br><span class="line">manage_dns                              : <span class="number">1</span></span><br><span class="line">manage_forward_zones                    : []</span><br><span class="line">manage_reverse_zones                    : []</span><br><span class="line">manage_rsync                            : <span class="number">1</span></span><br><span class="line">manage_tftp                             : <span class="number">1</span></span><br><span class="line">manage_tftpd                            : <span class="number">1</span></span><br><span class="line">mgmt_classes                            : []</span><br><span class="line">mgmt_parameters                         : &#123;<span class="string">'from_cobbler'</span>: <span class="number">1</span>&#125;</span><br><span class="line">next_server                             : <span class="number">172.28</span>.<span class="number">70.245</span></span><br><span class="line">power_management_default_<span class="built_in">type</span>           : ipmitool</span><br><span class="line">power_template_dir                      : /etc/cobbler/power</span><br><span class="line">proxy_url_ext                           : </span><br><span class="line">proxy_url_int                           : </span><br><span class="line">puppet_auto_setup                       : <span class="number">0</span></span><br><span class="line">puppet_parameterized_classes            : <span class="number">1</span></span><br><span class="line">puppet_server                           : puppet</span><br><span class="line">puppet_version                          : <span class="number">2</span></span><br><span class="line">puppetca_path                           : /usr/bin/puppet</span><br><span class="line">pxe_just_once                           : <span class="number">1</span></span><br><span class="line">pxe_template_dir                        : /etc/cobbler/pxe</span><br><span class="line">redhat_management_key                   : </span><br><span class="line">redhat_management_permissive            : <span class="number">0</span></span><br><span class="line">redhat_management_server                : xmlrpc.rhn.redhat.com</span><br><span class="line">redhat_management_<span class="built_in">type</span>                  : off</span><br><span class="line">register_new_installs                   : <span class="number">0</span></span><br><span class="line">remove_old_puppet_certs_automatically   : <span class="number">0</span></span><br><span class="line">replicate_repo_rsync_options            : -avzH</span><br><span class="line">replicate_rsync_options                 : -avzH</span><br><span class="line">reposync_flags                          : <span class="operator">-l</span> -n <span class="operator">-d</span></span><br><span class="line">restart_dhcp                            : <span class="number">1</span></span><br><span class="line">restart_dns                             : <span class="number">1</span></span><br><span class="line">restart_xinetd                          : <span class="number">1</span></span><br><span class="line">run_install_triggers                    : <span class="number">1</span></span><br><span class="line">scm_track_enabled                       : <span class="number">0</span></span><br><span class="line">scm_track_mode                          : git</span><br><span class="line">serializer_pretty_json                  : <span class="number">0</span></span><br><span class="line">server                                  : <span class="number">172.28</span>.<span class="number">70.245</span></span><br><span class="line">sign_puppet_certs_automatically         : <span class="number">0</span></span><br><span class="line">signature_path                          : /var/lib/cobbler/distro_signatures.json</span><br><span class="line">signature_url                           : http://cobbler.github.io/signatures/<span class="number">2.6</span>.x/latest.json</span><br><span class="line">snippetsdir                             : /var/lib/cobbler/snippets</span><br><span class="line">template_remote_kickstarts              : <span class="number">0</span></span><br><span class="line">virt_auto_boot                          : <span class="number">1</span></span><br><span class="line">webdir                                  : /var/www/cobbler</span><br><span class="line">xmlrpc_port                             : <span class="number">25151</span></span><br><span class="line">yum_distro_priority                     : <span class="number">1</span></span><br><span class="line">yum_post_install_mirror                 : <span class="number">1</span></span><br><span class="line">yumdownloader_flags                     : --resolve</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改seting文件cobbler登陆服务器地址</span></span><br><span class="line">cobbler setting edit --name=server --value=<span class="number">172.28</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">#ks脚本关闭pxe，这样就不会重复安装</span></span><br><span class="line">cobbler setting edit --name=pxe_just_once --value=<span class="number">1</span></span><br><span class="line"><span class="comment">#TFTP服务器 IP地址</span></span><br><span class="line">cobbler setting edit --name=next_server --value=<span class="number">172.28</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">#cobbler管理rsync，dhcp，dns</span></span><br><span class="line">cobbler setting edit --name=manage_rsync --value=<span class="number">1</span></span><br><span class="line">cobbler setting edit --name=manage_dhcp --value=<span class="number">1</span></span><br><span class="line">cobbler setting edit --name=manage_dns --value=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="cobbler导入镜像"><a href="#cobbler导入镜像" class="headerlink" title="cobbler导入镜像"></a>cobbler导入镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用镜像文件</span></span><br><span class="line">mount -o loop /tmp/rhel-server-<span class="number">6.3</span>-x86_64-dvd.iso /mnt/rhel63</span><br><span class="line"><span class="comment">#使用光盘</span></span><br><span class="line">mount /dev/sr0 /mnt/rhel63</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行镜像导入，并关联自定义的自动安装配置ks脚本，这个地方我们可以为不同的系统版本指定不同的自动安装ks脚本（这个过程实际比较长，cobbler会把软件整个复制一份到本地，在这之前，务必确认硬盘空间足够装下镜像）</span></span><br><span class="line">cobbler import --path=/tmp/rhel63 --name=rhel63 --kickstart=/var/lib/cobbler/kickstarts/rhel63.cfg</span><br><span class="line"></span><br><span class="line">task started: <span class="number">2016</span>-<span class="number">04</span>-<span class="number">12</span>_090326_import</span><br><span class="line">task started (id=Media import, time=Tue Apr <span class="number">12</span> <span class="number">09</span>:<span class="number">03</span>:<span class="number">26</span> <span class="number">2016</span>)</span><br><span class="line">Found a candidate signature: breed=redhat, version=rhel6</span><br><span class="line">Found a matching signature: breed=redhat, version=rhel6</span><br><span class="line">Adding distros from path /var/www/cobbler/ks_mirror/rhel63:</span><br><span class="line">creating new distro: rhel63-x86_64</span><br><span class="line">trying symlink: /var/www/cobbler/ks_mirror/rhel63 -&gt; /var/www/cobbler/links/rhel63-x86_64</span><br><span class="line">creating new profile: rhel63-x86_64</span><br><span class="line">associating repos</span><br><span class="line">checking <span class="keyword">for</span> rsync repo(s)</span><br><span class="line">checking <span class="keyword">for</span> rhn repo(s)</span><br><span class="line">checking <span class="keyword">for</span> yum repo(s)</span><br><span class="line">starting descent into /var/www/cobbler/ks_mirror/rhel63 <span class="keyword">for</span> rhel63-x86_64</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/HighAvailability</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/HighAvailability</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/HighAvailability/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/HighAvailability/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/Server</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/Server</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/Server/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/Server/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/LoadBalancer</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/LoadBalancer</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/LoadBalancer/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/LoadBalancer/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/ScalableFileSystem</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/ScalableFileSystem</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/ScalableFileSystem/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/ScalableFileSystem/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/ResilientStorage</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/ResilientStorage</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/ResilientStorage/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/ResilientStorage/repodata</span><br><span class="line">*** TASK COMPLETE ***</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看cobbler导入结果</span></span><br><span class="line">cobbler distro list</span><br><span class="line">cobbler report</span><br><span class="line"></span><br><span class="line"><span class="comment">#验证ks有效性，剩下的就是PXE引导测试了</span></span><br><span class="line">cobbler validateks</span><br></pre></td></tr></table></figure>
<h2 id="cobbler-web"><a href="#cobbler-web" class="headerlink" title="cobbler-web"></a>cobbler-web</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置Web登录,cobbler 2.6以上版本已经无需修改</span></span><br><span class="line">sed -i <span class="string">'s/module = authn_denyall/module = authn_configfile/g'</span> /etc/cobbler/modules.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler Web登录用户登录密码</span></span><br><span class="line">htdigest /etc/cobbler/users.digest <span class="string">"Cobbler"</span> cobbler</span><br><span class="line">Changing password <span class="keyword">for</span> user cobbler <span class="keyword">in</span> realm Cobbler</span><br><span class="line">New password:cobbler</span><br><span class="line">Re-type new password:cobbler</span><br><span class="line"></span><br><span class="line"><span class="comment">#cobbler_web登录地址，推荐使用命令行管理</span></span><br><span class="line">http://&#123;IP&#125;/cobbler_web</span><br></pre></td></tr></table></figure>
<h2 id="Cobbler相关选项说明"><a href="#Cobbler相关选项说明" class="headerlink" title="Cobbler相关选项说明"></a>Cobbler相关选项说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Cobbler 常用命令详解</span></span><br><span class="line">cobbler check <span class="comment">#检查cobbler配置 </span></span><br><span class="line">cobbler sync <span class="comment">#同步配置到dhcp/pxe和数据目录 </span></span><br><span class="line">cobbler list <span class="comment">#列出所有的cobbler元素 </span></span><br><span class="line">cobbler import <span class="comment">#导入安装的系统镜像 </span></span><br><span class="line">cobbler report <span class="comment">#列出各元素的详细信息 </span></span><br><span class="line">cobbler distro <span class="comment">#查看导入的发行版系统信息 </span></span><br><span class="line">cobbler profile <span class="comment">#查看配置信息 </span></span><br><span class="line">cobbler system <span class="comment">#查看添加的系统信息 </span></span><br><span class="line">cobbler reposync <span class="comment">#同步yum仓库到本地</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入镜像文件</span></span><br><span class="line">命令：cobbler import --path=镜像路径 -- name=安装引导名 --arch=<span class="number">32</span>位或<span class="number">64</span>位</span><br><span class="line">参数：</span><br><span class="line">path 是镜像所挂载的目录 </span><br><span class="line">name 是导入到cobbler里面显示的名字 </span><br><span class="line">arch 是<span class="number">32</span>位系统还是<span class="number">64</span>位系统</span><br><span class="line"></span><br><span class="line"><span class="comment">#导入kickstart文件</span></span><br><span class="line">命令：cobbler profile add --name=list名 --distro=镜像 --kickstart=路径</span><br><span class="line">参数：</span><br><span class="line">name是表示添加的ks 的名字，用cobbler report可以看到这个名字 </span><br><span class="line">distro 是用哪个镜像，list的distros里面选择一个，需要版本相对应 </span><br><span class="line">kickstart 是具体的 ks 文件路径</span><br><span class="line"></span><br><span class="line"><span class="comment">#同步DHCP、HTTPD</span></span><br><span class="line">命令：cobbler sync</span><br><span class="line">注，每次修改完dhcp.template之类的配置文件需要执行一次使其生效。</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看Cobbler列表</span></span><br><span class="line">命令：cobbler list</span><br><span class="line">注，列出Cobbler所有的元素。</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除相关列表</span></span><br><span class="line">命令：cobbler distro/profile remove --name=要删除的引导文件名</span><br><span class="line">删除指定 distro , 也就是镜像</span><br><span class="line">删除指定的 profile 文件，也就是 ks</span><br><span class="line"></span><br><span class="line"><span class="comment">#Cobbler安装后目录说明</span></span><br><span class="line">cobbler配置文件目录/etc/cobbler：</span><br><span class="line">/etc/cobbler/settings <span class="comment">#cobbler主配置文件 </span></span><br><span class="line">/etc/cobbler/iso/ <span class="comment">#iso模板配置文件 </span></span><br><span class="line">/etc/cobbler/pxe <span class="comment">#pxe模板文件 </span></span><br><span class="line">/etc/cobbler/power <span class="comment">#电源的配置文件 </span></span><br><span class="line">/etc/cobbler/users.conf <span class="comment">#Web 服务授权配置文件 </span></span><br><span class="line">/etc/cobbler/users.digest <span class="comment">#用于web访问的用户名密码配置文件 </span></span><br><span class="line">/etc/cobbler/dhcp.template <span class="comment">#DHCP服务的配置模板 </span></span><br><span class="line">/etc/cobbler/dnsmasq.template <span class="comment">#DNS服务的配置模板 </span></span><br><span class="line">/etc/cobbler/tftpd.template <span class="comment">#tftp服务的配置模板 </span></span><br><span class="line">/etc/cobbler/modules.conf <span class="comment">#Cobbler模块配置文件</span></span><br><span class="line"></span><br><span class="line">cobbler数据目录/var/lib/cobbler：</span><br><span class="line">/var/lib/cobbler/config/ <span class="comment">#用于存放distros、systems、profiles等信息配置文件 </span></span><br><span class="line">/var/lib/cobbler/triggers <span class="comment">#用于存放用户定义的cobbler 命令 </span></span><br><span class="line">/var/lib/cobbler/kickstarts/ <span class="comment">#默认存放kickstart文件 </span></span><br><span class="line">/var/lib/cobbler/loaders <span class="comment">#存放的各种引导程序</span></span><br><span class="line"></span><br><span class="line">镜像数据目录/var/www/cobbler：</span><br><span class="line">/var/www/cobbler/ks_mirror/ <span class="comment">#导入的发行版系统的所有数据 </span></span><br><span class="line">/var/www/cobbler/images/ <span class="comment">#导入发行版的Kernel和initrd镜像用于远程网络启动 </span></span><br><span class="line">/var/www/cobbler/repo_mirror/ <span class="comment">#yum仓库存储目录</span></span><br><span class="line"></span><br><span class="line">日志目录 /var/<span class="built_in">log</span>/cobbler/：</span><br><span class="line">/var/<span class="built_in">log</span>/cobbler/install.log <span class="comment">#客户端的安装系统日志 </span></span><br><span class="line">/var/<span class="built_in">log</span>/cobbler/cobbler.log <span class="comment">#cobbler日志</span></span><br></pre></td></tr></table></figure>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#多查看错误日志</span></span><br><span class="line">less /var/<span class="built_in">log</span>/cobbler/cobbler.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#为cobbler-web重置用户密码</span></span><br><span class="line">htdigest /etc/cobbler/users.digest <span class="string">"Cobbler"</span> cobbler </span><br><span class="line"><span class="comment">#添加新用户</span></span><br><span class="line">htdigest /etc/cobbler/users.digest <span class="string">"Cobbler"</span>  usernam</span><br><span class="line"></span><br><span class="line"><span class="comment">#DHCP多网卡环境可以指定网卡</span></span><br><span class="line">vi /etc/sysconfig/dhcpd </span><br><span class="line"><span class="comment"># Command line options here</span></span><br><span class="line">DHCPDARGS=eth0</span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      使用Cobbler轻松设置和管理网络安装环境
    
    </summary>
    
      <category term="学习 | Study" scheme="https://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
    
  </entry>
  
</feed>
